/*! For license information please see main.43f2efd0.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var k=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case C:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case _:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return N(e(t))}catch(Ya){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},F=[],j=-1;function U(e){return{current:e}}function V(e){0>j||(e.current=F[j],F[j]=null,j--)}function z(e,t){j++,F[j]=e.current,e.current=t}var B,q,H=U(null),W=U(null),G=U(null),K=U(null);function Q(e,t){switch(z(G,t),z(W,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bh(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(H),z(H,e)}function Y(){V(H),V(W),V(G)}function X(e){null!==e.memoizedState&&z(K,e);var t=H.current,n=bh(t,e.type);t!==n&&(z(W,e),z(H,n))}function J(e){W.current===e&&(V(H),V(W)),K.current===e&&(V(K),hd._currentValue=L)}function Z(e){if(void 0===B)try{throw Error()}catch(Ya){var t=Ya.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",q=-1<Ya.stack.indexOf("\n    at")?" (<anonymous>)":-1<Ya.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+q}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ya){var r=Ya}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(Ya){return"\nError generating stack: "+Ya.message+"\n"+Ya.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,oe=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(_e(e)/Se|0)|0},_e=Math.log,Se=Math.LN2;var Ee=256,Ce=262144,xe=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=Te(r):0!==(o&=a)?i=Te(o):n||0!==(n=a&~e)&&(i=Te(n)):0!==(a=r&~s)?i=Te(a):0!==o?i=Te(o):n||0!==(n=r&~e)&&(i=Te(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function ke(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=xe;return 0===(62914560&(xe<<=1))&&(xe=4194304),e}function Re(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ne(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Me(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function je(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Ad(e.type)}function Ue(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Ve=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ve,Be="__reactProps$"+Ve,qe="__reactContainer$"+Ve,He="__reactEvents$"+Ve,We="__reactListeners$"+Ve,Ge="__reactHandles$"+Ve,Ke="__reactResources$"+Ve,Qe="__reactMarker$"+Ve;function Ye(e){delete e[ze],delete e[Be],delete e[He],delete e[We],delete e[Ge]}function Xe(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Fh(e);null!==e;){if(n=e[ze])return n;e=Fh(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[ze]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function $e(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},at={};function lt(e,t,n){if(i=t,re.call(at,i)||!re.call(ot,i)&&(st.test(i)?at[i]=!0:(ot[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ND){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?wt(e,o,ht(t)):null!=n?wt(e,o,ht(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ht(a):e.removeAttribute("name")}function bt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),ft(e)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Et(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Tt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Tt(e,s,t[s])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Nt(){}var Dt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Lt=null;function Ft(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Be]||null;if(!i)throw Error(o(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var jt=!1;function Ut(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Mt||null!==Lt)&&(eu(),Mt&&(t=Mt,e=Lt,Lt=Mt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(zt)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(ND){Bt=!1}var Ht=null,Wt=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,n=Wt,r=n.length,i="value"in Ht?Ht.value:Ht.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Gt=i.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Xt(){return!1}function Jt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Yt:Xt,this.isPropagationStopped=Xt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Zt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Jt(tn),rn=f({},tn,{view:0,detail:0}),sn=Jt(rn),on=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Zt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Zt=0,en=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),an=Jt(on),ln=Jt(f({},on,{dataTransfer:0})),cn=Jt(f({},rn,{relatedTarget:0})),un=Jt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Jt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Jt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Jt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Jt(f({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Jt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),_n=Jt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Jt(f({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Jt(f({},tn,{newState:0,oldState:0})),Cn=[9,13,27,32],xn=zt&&"CompositionEvent"in window,Tn=null;zt&&"documentMode"in document&&(Tn=document.documentMode);var An=zt&&"TextEvent"in window&&!Tn,kn=zt&&(!xn||Tn&&8<Tn&&11>=Tn),In=String.fromCharCode(32),Pn=!1;function Rn(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Ln(e,t,n,r){Mt?Lt?Lt.push(r):Lt=[r]:Mt=r,0<(t=ih(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,jn=null;function Un(e){Xu(e,0)}function Vn(e){if(pt(Ze(e)))return e}function zn(e,t){if("change"===e)return t}var Bn=!1;if(zt){var qn;if(zt){var Hn="oninput"in document;if(!Hn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Hn="function"===typeof Wn.oninput}qn=Hn}else qn=!1;Bn=qn&&(!document.documentMode||9<document.documentMode)}function Gn(){Fn&&(Fn.detachEvent("onpropertychange",Kn),jn=Fn=null)}function Kn(e){if("value"===e.propertyName&&Vn(jn)){var t=[];Ln(t,jn,e,Ot(e)),Ut(Un,t)}}function Qn(e,t,n){"focusin"===e?(Gn(),jn=n,(Fn=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Gn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(jn)}function Xn(e,t){if("click"===e)return Vn(t)}function Jn(e,t){if("input"===e||"change"===e)return Vn(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Zn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=zt&&"documentMode"in document&&11>=document.documentMode,or=null,ar=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==mt(r)||("selectionStart"in(r=or)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&$n(lr,r)||(lr=r,0<(r=ih(ar,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}zt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),br=mr("transitionrun"),wr=mr("transitionstart"),_r=mr("transitioncancel"),Sr=mr("transitionend"),Er=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){Er.set(e,t),rt(t,[e])}Cr.push("scrollEnd");var Tr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ar=[],kr=0,Ir=0;function Pr(){for(var e=kr,t=Ir=kr=0;t<e;){var n=Ar[t];Ar[t++]=null;var r=Ar[t];Ar[t++]=null;var i=Ar[t];Ar[t++]=null;var s=Ar[t];if(Ar[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function Rr(e,t,n,r){Ar[kr++]=e,Ar[kr++]=t,Ar[kr++]=n,Ar[kr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Nr(e,t,n,r){return Rr(e,t,n,r),Mr(e)}function Dr(e,t){return Rr(e,null,null,t),Mr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-we(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Mr(e){if(50<Wc)throw Wc=0,Gc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(e,t,n,r){return new Fr(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vr(e,t){var n=e.alternate;return null===n?((n=jr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Ur(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=jr(31,n,t,i)).elementType=A,e.lanes=s,e;case y:return qr(n.children,i,s,t);case v:a=8,i|=24;break;case b:return(e=jr(12,n,t,2|i)).elementType=b,e.lanes=s,e;case E:return(e=jr(13,n,t,i)).elementType=E,e.lanes=s,e;case C:return(e=jr(19,n,t,i)).elementType=C,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:a=10;break e;case w:a=9;break e;case S:a=11;break e;case x:a=14;break e;case T:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=jr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function qr(e,t,n,r){return(e=jr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=jr(6,e,null,t)).lanes=n,e}function Wr(e){var t=jr(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=jr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Kr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],Xr=0,Jr=null,Zr=0,$r=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Yr[Xr++]=Zr,Yr[Xr++]=Jr,Jr=e,Zr=t}function si(e,t,n){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-we(r)-1;r&=~(1<<i),n+=1;var s=32-we(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ni=1<<32-we(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function oi(e){null!==e.return&&(ii(e,1),si(e,1,0))}function ai(e){for(;e===Jr;)Jr=Yr[--Xr],Yr[Xr]=null,Zr=Yr[--Xr],Yr[Xr]=null;for(;e===ti;)ti=$r[--ei],$r[ei]=null,ri=$r[--ei],$r[ei]=null,ni=$r[--ei],$r[ei]=null}function li(e,t){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,hi=!1,di=null,fi=!1,pi=Error(o(519));function mi(e){throw _i(Qr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Be]=r,n){case"dialog":Ju("cancel",t),Ju("close",t);break;case"iframe":case"object":case"embed":Ju("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)Ju(Qu[n],t);break;case"source":Ju("error",t);break;case"img":case"image":case"link":Ju("error",t),Ju("load",t);break;case"details":Ju("toggle",t);break;case"input":Ju("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ju("invalid",t);break;case"textarea":Ju("invalid",t),Et(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||uh(t.textContent,n)?(null!=r.popover&&(Ju("beforetoggle",t),Ju("toggle",t)),null!=r.onScroll&&Ju("scroll",t),null!=r.onScrollEnd&&Ju("scrollend",t),null!=r.onClick&&(t.onclick=Nt),t=!0):t=!1,t||mi(e,!0)}function yi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function vi(e){if(e!==ci)return!1;if(!hi)return yi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wh(e.type,e.memoizedProps)),t=!t),t&&ui&&mi(e),yi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ui=Lh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ui=Lh(e)}else 27===n?(n=ui,Ah(e.type)?(e=Mh,Mh=null,ui=e):ui=n):ui=ci?Oh(e.stateNode.nextSibling):null;return!0}function bi(){ui=ci=null,hi=!1}function wi(){var e=di;return null!==e&&(null===Rc?Rc=e:Rc.push.apply(Rc,e),di=null),e}function _i(e){null===di?di=[e]:di.push(e)}var Si=U(null),Ei=null,Ci=null;function xi(e,t,n){z(Si,t._currentValue),t._currentValue=n}function Ti(e){e._currentValue=Si.current,V(Si)}function Ai(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ai(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Ai(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ii(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Zn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===K.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(hd):e=[hd])}i=i.return}null!==e&&ki(t,e,n,r),t.flags|=262144}function Pi(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ri(e){Ei=e,Ci=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ni(e){return Oi(Ei,e)}function Di(e,t){return null===Ei&&Ri(e),Oi(e,t)}function Oi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ci){if(null===e)throw Error(o(308));Ci=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ci=Ci.next=t;return n}var Mi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Li=r.unstable_scheduleCallback,Fi=r.unstable_NormalPriority,ji={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ui(){return{controller:new Mi,data:new Map,refCount:0}}function Vi(e){e.refCount--,0===e.refCount&&Li(Fi,function(){e.controller.abort()})}var zi=null,Bi=0,qi=0,Hi=null;function Wi(){if(0===--Bi&&null!==zi){null!==Hi&&(Hi.status="fulfilled");var e=zi;zi=null,qi=0,Hi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gi=O.S;O.S=function(e,t){Oc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zi){var n=zi=[];Bi=0,qi=qu(),Hi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Bi++,t.then(Wi,Wi)}(0,t),null!==Gi&&Gi(e,t)};var Ki=U(null);function Qi(){var e=Ki.current;return null!==e?e:mc.pooledCache}function Yi(e,t){z(Ki,null===t?Ki.current:t.pool)}function Xi(){var e=Qi();return null===e?null:{parent:ji._currentValue,pool:e}}var Ji=Error(o(460)),Zi=Error(o(474)),$i=Error(o(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Nt,Nt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw os(e=t.reason),e;default:if("string"===typeof t.status)t.then(Nt,Nt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw os(e=t.reason),e}throw is=t,Ji}}function rs(e){try{return(0,e._init)(e._payload)}catch(Ya){if(null!==Ya&&"object"===typeof Ya&&"function"===typeof Ya.then)throw is=Ya,Ji;throw Ya}}var is=null;function ss(){if(null===is)throw Error(o(459));var e=is;return is=null,e}function os(e){if(e===Ji||e===$i)throw Error(o(483))}var as=null,ls=0;function cs(e){var t=ls;return ls+=1,null===as&&(as=[]),ns(as,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hs(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ds(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Vr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===y?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&rs(s)===t.type)?(us(t=i(t,n.props),n),t.return=e,t):(us(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=qr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return us(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Gr(t,e.mode,n)).return=e,t;case T:return d(e,t=rs(t),n)}if(D(t)||P(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,cs(t),n);if(t.$$typeof===_)return d(e,Di(e,t),n);hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case T:return f(e,t,n=rs(n),r)}if(D(n)||P(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,cs(n),r);if(n.$$typeof===_)return f(e,t,Di(e,n),r);hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return p(e,t,n,r=rs(r),i)}if(D(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,cs(r),i);if(r.$$typeof===_)return p(e,t,n,Di(t,r),i);hs(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===T&&rs(b)===c.type){n(l,c.sibling),us(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((h=qr(u.props.children,l.mode,h,u.key)).return=l,l=h):(us(h=Br(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Gr(u,l.mode,h)).return=l,l=h}return a(l);case T:return v(l,c,u=rs(u),h)}if(D(u))return function(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),hi&&ii(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return hi&&ii(i,m),c}for(h=r(h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),hi&&ii(i,m),c}(l,c,u,h);if(P(u)){if("function"!==typeof(b=P(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),hi&&ii(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return hi&&ii(i,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),hi&&ii(i,g),u}(l,c,u=b.call(u),h)}if("function"===typeof u.then)return v(l,c,cs(u),h);if(u.$$typeof===_)return v(l,c,Di(l,u),h);hs(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=Hr(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{ls=0;var i=v(e,t,n,r);return as=null,i}catch(Ya){if(Ya===Ji||Ya===$i)throw Ya;var s=jr(29,Ya,null,e.mode);return s.lanes=r,s.return=e,s}}}var fs=ds(!0),ps=ds(!1),ms=!1;function gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ys(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Mr(e),Or(e,null,n),t}return Rr(e,r,t,n),Mr(e)}function ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function _s(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ss=!1;function Es(){if(Ss){if(null!==Hi)throw Hi}}function Cs(e,t,n,r){Ss=!1;var i=e.updateQueue;ms=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=-536870913&a.lane,p=d!==a.lane;if(p?(yc&d)===d:(r&d)===d){0!==d&&d===qi&&(Ss=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;d=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(y,h,d):m)||void 0===d)break e;h=f({},h,d);break e;case 2:ms=!0}}null!==(d=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[d]:p.push(d))}else p={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),xc|=o,e.lanes=o,e.memoizedState=h}}function xs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ts(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)xs(n[e],t)}var As=U(null),ks=U(0);function Is(e,t){z(ks,e=Ec),z(As,t),Ec=e|t.baseLanes}function Ps(){z(ks,Ec),z(As,As.current)}function Rs(){Ec=ks.current,V(As),V(ks)}var Ns=U(null),Ds=null;function Os(e){var t=e.alternate;z(Us,1&Us.current),z(Ns,e),null===Ds&&(null===t||null!==As.current||null!==t.memoizedState)&&(Ds=e)}function Ms(e){z(Us,Us.current),z(Ns,e),null===Ds&&(Ds=e)}function Ls(e){22===e.tag?(z(Us,Us.current),z(Ns,e),null===Ds&&(Ds=e)):Fs()}function Fs(){z(Us,Us.current),z(Ns,Ns.current)}function js(e){V(Ns),Ds===e&&(Ds=null),V(Us)}var Us=U(0);function Vs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Nh(n)||Dh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zs=0,Bs=null,qs=null,Hs=null,Ws=!1,Gs=!1,Ks=!1,Qs=0,Ys=0,Xs=null,Js=0;function Zs(){throw Error(o(321))}function $s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,i,s){return zs=s,Bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?ga:ya,Ks=!1,s=n(r,i),Ks=!1,Gs&&(s=no(t,n,r,i)),to(e),s}function to(e){O.H=ma;var t=null!==qs&&null!==qs.next;if(zs=0,Hs=qs=Bs=null,Ws=!1,Ys=0,Xs=null,t)throw Error(o(300));null===e||Da||null!==(e=e.dependencies)&&Pi(e)&&(Da=!0)}function no(e,t,n,r){Bs=e;var i=0;do{if(Gs&&(Xs=null),Ys=0,Gs=!1,25<=i)throw Error(o(301));if(i+=1,Hs=qs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=va,s=t(n,r)}while(Gs);return s}function ro(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==qs?qs.memoizedState:null)!==e&&(Bs.flags|=1024),t}function io(){var e=0!==Qs;return Qs=0,e}function so(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(Ws){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ws=!1}zs=0,Hs=qs=Bs=null,Gs=!1,Ys=Qs=0,Xs=null}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Hs?Bs.memoizedState=Hs=e:Hs=Hs.next=e,Hs}function lo(){if(null===qs){var e=Bs.alternate;e=null!==e?e.memoizedState:null}else e=qs.next;var t=null===Hs?Bs.memoizedState:Hs.next;if(null!==t)Hs=t,qs=e;else{if(null===e){if(null===Bs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(qs=e).memoizedState,baseState:qs.baseState,baseQueue:qs.baseQueue,queue:qs.queue,next:null},null===Hs?Bs.memoizedState=Hs=e:Hs=Hs.next=e}return Hs}function co(e){var t=Ys;return Ys+=1,null===Xs&&(Xs=[]),e=ns(Xs,e,t),t=Bs,null===(null===Hs?t.memoizedState:Hs.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?ga:ya),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===_)return Ni(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,n=Bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Bs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=k;return t.index++,n}function fo(e,t){return"function"===typeof t?t(e):t}function po(e){return mo(lo(),qs,e)}function mo(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(yc&d)===d:(zs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===qi&&(h=!0);else{if((zs&f)===f){u=u.next,f===qi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,Bs.lanes|=f,xc|=f}d=u.action,Ks&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,Bs.lanes|=d,xc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Zn(s,e.memoizedState)&&(Da=!0,h&&null!==(n=Hi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function go(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Zn(s,t.memoizedState)||(Da=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function yo(e,t,n){var r=Bs,i=lo(),s=hi;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Zn((qs||i).memoizedState,n);if(a&&(i.memoizedState=n,Da=!0),i=i.queue,Bo(wo.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==Hs&&1&Hs.memoizedState.tag){if(r.flags|=2048,Fo(9,{destroy:void 0},bo.bind(null,r,i,n,t),null),null===mc)throw Error(o(349));s||0!==(127&zs)||vo(r,t,n)}return n}function vo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bo(e,t,n,r){t.value=n,t.getSnapshot=r,_o(t)&&So(e)}function wo(e,t,n){return n(function(){_o(t)&&So(e)})}function _o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(mv){return!0}}function So(e){var t=Dr(e,2);null!==t&&Yc(t,e,2)}function Eo(e){var t=ao();if("function"===typeof e){var n=e;if(e=n(),Ks){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},t}function Co(e,t,n,r){return e.baseState=n,mo(e,qs,"function"===typeof r?r:fo)}function xo(e,t,n,r,i){if(da(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,To(t,s)):(s.next=n.next,t.pending=n.next=s)}}function To(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),Ao(e,t,a)}catch(mv){Io(e,t,mv)}finally{null!==s&&null!==o.types&&(s.types=o.types),O.T=s}}else try{Ao(e,t,s=n(i,r))}catch(c){Io(e,t,c)}}function Ao(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ko(e,t,n)},function(n){return Io(e,t,n)}):ko(e,t,n)}function ko(e,t,n){t.status="fulfilled",t.value=n,Po(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,To(e,n)))}function Io(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Po(t),t=t.next}while(t!==r)}e.action=null}function Po(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ro(e,t){return t}function No(e,t){if(hi){var n=mc.formState;if(null!==n){e:{var r=Bs;if(hi){if(ui){t:{for(var i=ui,s=fi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Oh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ui=Oh(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=ao()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:t},n.queue=r,n=ca.bind(null,Bs,r),r.dispatch=n,r=Eo(!1),s=ha.bind(null,Bs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=ao()).queue=i,n=xo.bind(null,Bs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Do(e){return Oo(lo(),qs,e)}function Oo(e,t,n){if(t=mo(e,t,Ro)[0],e=po(fo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=co(t)}catch(Ya){if(Ya===Ji)throw $i;throw Ya}else r=t;var i=(t=lo()).queue,s=i.dispatch;return n!==t.memoizedState&&(Bs.flags|=2048,Fo(9,{destroy:void 0},Mo.bind(null,i,n),null)),[r,s,e]}function Mo(e,t){e.action=t}function Lo(e){var t=lo(),n=qs;if(null!==n)return Oo(t,n,e);lo(),t=t.memoizedState;var r=(n=lo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Fo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return lo().memoizedState}function Uo(e,t,n,r){var i=ao();Bs.flags|=e,i.memoizedState=Fo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Vo(e,t,n,r){var i=lo();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==qs&&null!==r&&$s(r,qs.memoizedState.deps)?i.memoizedState=Fo(t,s,n,r):(Bs.flags|=e,i.memoizedState=Fo(1|t,s,n,r))}function zo(e,t){Uo(8390656,8,e,t)}function Bo(e,t){Vo(2048,8,e,t)}function qo(e){var t=lo().memoizedState;return function(e){Bs.flags|=4;var t=Bs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Bs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Ho(e,t){return Vo(4,2,e,t)}function Wo(e,t){return Vo(4,4,e,t)}function Go(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ko(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,Go.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$s(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$s(t,r[1]))return r[0];if(r=e(),Ks){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Jo(e,t,n){return void 0===n||0!==(1073741824&zs)&&0===(261930&yc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),Bs.lanes|=e,xc|=e,n)}function Zo(e,t,n,r){return Zn(n,t)?n:null!==As.current?(e=Jo(e,n,r),Zn(e,t)||(Da=!0),e):0===(42&zs)||0!==(1073741824&zs)&&0===(261930&yc)?(Da=!0,e.memoizedState=n):(e=Qc(),Bs.lanes|=e,xc|=e,t)}function $o(e,t,n,r,i){var s=M.p;M.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,ha(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);ua(e,t,u,Kc())}else ua(e,t,r,Kc())}catch(mv){ua(e,t,{then:function(){},status:"rejected",reason:mv},Kc())}finally{M.p=s,null!==o&&null!==a.types&&(o.types=a.types),O.T=o}}function ea(){}function ta(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=na(e).queue;$o(e,i,t,L,null===n?ea:function(){return ra(e),n(r)})}function na(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ra(e){var t=na(e);null===t.next&&(t=e.alternate.memoizedState),ua(e,t.next.queue,{},Kc())}function ia(){return Ni(hd)}function sa(){return lo().memoizedState}function oa(){return lo().memoizedState}function aa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),r=bs(t,e=vs(n),n);return null!==r&&(Yc(r,t,n),ws(r,t,n)),t={cache:Ui()},void(e.payload=t)}t=t.return}}function la(e,t,n){var r=Kc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},da(e)?fa(t,n):null!==(n=Nr(e,t,n,r))&&(Yc(n,e,r),pa(n,t,r))}function ca(e,t,n){ua(e,t,n,Kc())}function ua(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(da(e))fa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Zn(a,o))return Rr(e,t,i,0),null===mc&&Pr(),!1}catch(mv){}if(null!==(n=Nr(e,t,i,r)))return Yc(n,e,r),pa(n,t,r),!0}return!1}function ha(e,t,n,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},da(e)){if(t)throw Error(o(479))}else null!==(t=Nr(e,n,r,2))&&Yc(t,e,2)}function da(e){var t=e.alternate;return e===Bs||null!==t&&t===Bs}function fa(e,t){Gs=Ws=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pa(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var ma={readContext:Ni,use:uo,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs};ma.useEffectEvent=Zs;var ga={readContext:Ni,use:uo,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:zo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){Uo(4,2,e,t)},useMemo:function(e,t){var n=ao();t=void 0===t?null:t;var r=e();if(Ks){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ao();if(void 0!==n){var i=n(t);if(Ks){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=la.bind(null,Bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ao().memoizedState=e},useState:function(e){var t=(e=Eo(e)).queue,n=ca.bind(null,Bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qo,useDeferredValue:function(e,t){return Jo(ao(),e,t)},useTransition:function(){var e=Eo(!1);return e=$o.bind(null,Bs,e.queue,!0,!1),ao().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Bs,i=ao();if(hi){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===mc)throw Error(o(349));0!==(127&yc)||vo(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,zo(wo.bind(null,r,s,e),[e]),r.flags|=2048,Fo(9,{destroy:void 0},bo.bind(null,r,s,n,t),null),n},useId:function(){var e=ao(),t=mc.identifierPrefix;if(hi){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-we(ni)-1)).toString(32)+n),0<(n=Qs++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Js++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ia,useFormState:No,useActionState:No,useOptimistic:function(e){var t=ao();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ha.bind(null,Bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return ao().memoizedState=aa.bind(null,Bs)},useEffectEvent:function(e){var t=ao(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},ya={readContext:Ni,use:uo,useCallback:Yo,useContext:Ni,useEffect:Bo,useImperativeHandle:Ko,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Xo,useReducer:po,useRef:jo,useState:function(){return po(fo)},useDebugValue:Qo,useDeferredValue:function(e,t){return Zo(lo(),qs.memoizedState,e,t)},useTransition:function(){var e=po(fo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:sa,useHostTransitionStatus:ia,useFormState:Do,useActionState:Do,useOptimistic:function(e,t){return Co(lo(),0,e,t)},useMemoCache:ho,useCacheRefresh:oa};ya.useEffectEvent=qo;var va={readContext:Ni,use:uo,useCallback:Yo,useContext:Ni,useEffect:Bo,useImperativeHandle:Ko,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Xo,useReducer:go,useRef:jo,useState:function(){return go(fo)},useDebugValue:Qo,useDeferredValue:function(e,t){var n=lo();return null===qs?Jo(n,e,t):Zo(n,qs.memoizedState,e,t)},useTransition:function(){var e=go(fo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:sa,useHostTransitionStatus:ia,useFormState:Lo,useActionState:Lo,useOptimistic:function(e,t){var n=lo();return null!==qs?Co(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ho,useCacheRefresh:oa};function ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}va.useEffectEvent=qo;var wa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kc(),i=vs(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),ws(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kc(),i=vs(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),ws(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kc(),r=vs(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bs(e,r,n))&&(Yc(t,e,n),ws(t,e,n))}};function _a(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,s))}function Sa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function Ea(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Ca(e){Tr(e)}function xa(e){console.error(e)}function Ta(e){Tr(e)}function Aa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ia(e,t,n){return(n=vs(n)).tag=3,n.payload={element:null},n.callback=function(){Aa(e,t)},n}function Pa(e){return(e=vs(e)).tag=3,e}function Ra(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){ka(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,r),"function"!==typeof i&&(null===Fc?Fc=new Set([this]):Fc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Na=Error(o(461)),Da=!1;function Oa(e,t,n,r){t.child=null===e?ps(t,null,n,r):fs(t,e.child,n,r)}function Ma(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ri(t),r=eo(e,t,n,o,s,i),a=io(),null===e||Da?(hi&&a&&oi(t),t.flags|=1,Oa(e,t,r,i),t.child):(so(e,t,i),sl(e,t,i))}function La(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ur(s)||void 0!==s.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fa(e,t,s,r,i))}if(s=e.child,!ol(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(o,r)&&e.ref===t.ref)return sl(e,t,i)}return t.flags|=1,(e=Vr(s,r)).ref=t.ref,e.return=t,t.child=e}function Fa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if($n(s,r)&&e.ref===t.ref){if(Da=!1,t.pendingProps=r=s,!ol(e,i))return t.lanes=e.lanes,sl(e,t,i);0!==(131072&e.flags)&&(Da=!0)}}return Ha(e,t,n,r,i)}function ja(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return Va(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Va(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==s?s.cachePool:null),null!==s?Is(t,s):Ps(),Ls(t)}else null!==s?(Yi(0,s.cachePool),Is(t,s),Fs(),t.memoizedState=null):(null!==e&&Yi(0,null),Ps(),Fs());return Oa(e,t,i,n),t.child}function Ua(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Va(e,t,n,r,i){var s=Qi();return s=null===s?null:{parent:ji._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Yi(0,null),Ps(),Ls(t),null!==e&&Ii(e,t,r,!0),t.childLanes=i,null}function za(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ba(e,t,n){return fs(t,e.child,null,n),(e=za(t,t.pendingProps)).flags|=2,js(t),t.memoizedState=null,e}function qa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ha(e,t,n,r,i){return Ri(t),n=eo(e,t,n,r,void 0,i),r=io(),null===e||Da?(hi&&r&&oi(t),t.flags|=1,Oa(e,t,n,i),t.child):(so(e,t,i),sl(e,t,i))}function Wa(e,t,n,r,i,s){return Ri(t),t.updateQueue=null,n=no(t,r,n,i),to(e),r=io(),null===e||Da?(hi&&r&&oi(t),t.flags|=1,Oa(e,t,n,s),t.child):(so(e,t,s),sl(e,t,s))}function Ga(e,t,n,r,i){if(Ri(t),null===t.stateNode){var s=Lr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ni(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=wa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},gs(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ni(o):Lr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ba(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&wa.enqueueReplaceState(s,s.state,null),Cs(t,r,s,i),Es(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=Ea(n,a);s.props=l;var c=s.context,u=n.contextType;o=Lr,"object"===typeof u&&null!==u&&(o=Ni(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&Sa(t,s,r,o),ms=!1;var d=t.memoizedState;s.state=d,Cs(t,r,s,i),Es(),c=t.memoizedState,a||d!==c||ms?("function"===typeof h&&(ba(t,n,h,r),c=t.memoizedState),(l=ms||_a(t,n,l,r,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ys(e,t),u=Ea(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Ni(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&Sa(t,s,r,l),ms=!1,d=t.memoizedState,s.state=d,Cs(t,r,s,i),Es();var f=t.memoizedState;o!==h||d!==f||ms||null!==e&&null!==e.dependencies&&Pi(e.dependencies)?("function"===typeof a&&(ba(t,n,a,r),f=t.memoizedState),(u=ms||_a(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Pi(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,qa(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=fs(t,e.child,null,i),t.child=fs(t,null,n,i)):Oa(e,t,n,i),t.memoizedState=s.state,e=t.child):e=sl(e,t,i),e}function Ka(e,t,n,r){return bi(),t.flags|=256,Oa(e,t,n,r),t.child}var Qa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xa(e){return{baseLanes:e,cachePool:Xi()}}function Ja(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=kc),e}function Za(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Us.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hi){if(s?Os(t):Fs(),(e=ui)?null!==(e=null!==(e=Rh(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return Dh(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(Fs(),l=el({mode:"hidden",children:l},s=t.mode),i=qr(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Xa(n),i.childLanes=Ja(e,r,n),t.memoizedState=Qa,Ua(null,i)):(Os(t),$a(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(a)256&t.flags?(Os(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Fs(),t.child=e.child,t.flags|=128,t=null):(Fs(),l=i.fallback,s=t.mode,i=el({mode:"visible",children:i.children},s),(l=qr(l,s,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,fs(t,e.child,null,n),(i=t.child).memoizedState=Xa(n),i.childLanes=Ja(e,r,n),t.memoizedState=Qa,t=Ua(null,i));else if(Os(t),Dh(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,_i({value:i,source:null,stack:null}),t=tl(e,t,n)}else if(Da||Ii(e,t,n,!1),r=0!==(n&e.childLanes),Da||r){if(null!==(r=mc)&&(0!==(i=Me(r,n))&&i!==c.retryLane))throw c.retryLane=i,Dr(e,i),Yc(r,e,i),Na;Nh(l)||au(),t=tl(e,t,n)}else Nh(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Oh(l.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=$a(t,i.children)).flags|=4096);return t}return s?(Fs(),l=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=Vr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Vr(u,l):(l=qr(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Ua(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Xa(n):(null!==(s=l.cachePool)?(c=ji._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Xi(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Ja(e,r,n),t.memoizedState=Qa,Ua(e.child,i)):(Os(t),e=(n=e.child).sibling,(n=Vr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $a(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=jr(22,e,null,t)).lanes=0,e}function tl(e,t,n){return fs(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ai(e.return,t,n)}function rl(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=s)}function il(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var o=Us.current,a=0!==(2&o);if(a?(o=1&o|2,t.flags|=128):o&=1,z(Us,o),Oa(e,t,r,n),r=hi?Zr:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Vs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Vs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rl(t,!0,n,null,s,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function sl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ii(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Vr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pi(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Da=!0;else{if(!ol(e,n)&&0===(128&t.flags))return Da=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),xi(0,ji,e.memoizedState.cache),bi();break;case 27:case 5:X(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:xi(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ms(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Za(e,t,n):(Os(t),null!==(e=sl(e,t,n))?e.sibling:null);Os(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ii(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return il(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(Us,Us.current),r)break;return null;case 22:return t.lanes=0,ja(e,t,n,t.pendingProps);case 24:xi(0,ji,e.memoizedState.cache)}return sl(e,t,n)}(e,t,n);Da=0!==(131072&e.flags)}else Da=!1,hi&&0!==(1048576&t.flags)&&si(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===S){t.tag=11,t=Ma(null,t,e,r,n);break e}if(i===x){t.tag=14,t=La(null,t,e,r,n);break e}}throw t=N(e)||e,Error(o(306,t,""))}Ur(e)?(r=Ea(e,r),t.tag=1,t=Ga(null,t,e,r,n)):(t.tag=0,t=Ha(null,t,e,r,n))}return t;case 0:return Ha(e,t,t.type,t.pendingProps,n);case 1:return Ga(e,t,r=t.type,i=Ea(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,ys(e,t),Cs(t,r,null,n);var a=t.memoizedState;if(r=a.cache,xi(0,ji,r),r!==s.cache&&ki(t,[ji],n,!0),Es(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ka(e,t,r,n);break e}if(r!==i){_i(i=Qr(Error(o(424)),t)),t=Ka(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Oh(e.firstChild),ci=t,hi=!0,di=null,fi=!0,n=ps(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bi(),r===i){t=sl(e,t,n);break e}Oa(e,t,r,n)}t=t.child}return t;case 26:return qa(e,t),null===e?(n=Gh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(r=yh(G.current).createElement(n))[ze]=t,r[Be]=e,fh(r,n,e),et(r),t.stateNode=r):t.memoizedState=Gh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&hi&&(r=t.stateNode=jh(t.type,t.pendingProps,G.current),ci=t,fi=!0,i=ui,Ah(t.type)?(Mh=i,ui=Oh(r.firstChild)):ui=i),Oa(e,t,t.pendingProps.children,n),qa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Oh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Oh(r.firstChild),fi=!1,i=!0):i=!1),i||mi(t)),X(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,wh(i,s)?r=null:null!==a&&wh(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=eo(e,t,ro,null,null,n),hd._currentValue=i),qa(e,t),Oa(e,t,r,n),t.child;case 6:return null===e&&hi&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Oh(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||mi(t)),null;case 13:return Za(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fs(t,null,r,n):Oa(e,t,r,n),t.child;case 11:return Ma(e,t,t.type,t.pendingProps,n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,xi(0,t.type,r.value),Oa(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ri(t),r=r(i=Ni(i)),t.flags|=1,Oa(e,t,r,n),t.child;case 14:return La(e,t,t.type,t.pendingProps,n);case 15:return Fa(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===r.mode)return e=za(t,r),t.lanes=536870912,Ua(null,e);if(Ms(t),(e=ui)?null!==(e=null!==(e=Rh(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return za(t,r)}var s=e.memoizedState;if(null!==s){var a=s.dehydrated;if(Ms(t),i)if(256&t.flags)t.flags&=-257,t=Ba(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Da||Ii(e,t,n,!1),i=0!==(n&e.childLanes),Da||i){if(null!==(r=mc)&&0!==(a=Me(r,n))&&a!==s.retryLane)throw s.retryLane=a,Dr(e,a),Yc(r,e,a),Na;au(),t=Ba(e,t,n)}else e=s.treeContext,ui=Oh(a.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=za(t,r)).flags|=4096;return t}return(e=Vr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return ja(e,t,n,t.pendingProps);case 24:return Ri(t),r=Ni(ji),null===e?(null===(i=Qi())&&(i=mc,s=Ui(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},gs(t),xi(0,ji,i)):(0!==(e.lanes&n)&&(ys(e,t),Cs(t,null,null,n),Es()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),xi(0,ji,r)):(r=s.cache,xi(0,ji,r),r!==i.cache&&ki(t,[ji],n,!0))),Oa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!iu())throw is=es,Zi;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!sd(t)){if(!iu())throw is=es,Zi;e.flags|=8192}}function hl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Ic|=t)}function dl(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(ai(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ti(ji),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,wi())),fl(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(ll(t),null!==s?(fl(t),ul(t,s)):(fl(t),cl(t,i,0,0,n))):s?s!==e.memoizedState?(ll(t),fl(t),ul(t,s)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,i,0,0,n)),null;case 27:if(J(t),n=G.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return fl(t),null}e=H.current,vi(t)?gi(t):(e=jh(i,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if(J(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return fl(t),null}if(s=H.current,vi(t))gi(t);else{var a=yh(G.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=a.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?a.createElement(i,{is:r.is}):a.createElement(i)}}s[ze]=t,s[Be]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)s.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=s;e:switch(fh(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=G.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||uh(e.nodeValue,n)))||mi(t,!0)}else(e=yh(e).createTextNode(r))[ze]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[ze]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=wi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(js(t),t):(js(t),null);if(0!==(128&t.flags))throw Error(o(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[ze]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),i=!1}else i=wi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(js(t),t):(js(t),null)}return js(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),hl(t,t.updateQueue),fl(t),null);case 4:return Y(),null===e&&eh(t.stateNode.containerInfo),fl(t),null;case 10:return Ti(t.type),fl(t),null;case 19:if(V(Us),null===(r=t.memoizedState))return fl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)dl(r,!1);else{if(0!==Cc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Vs(e))){for(t.flags|=128,dl(r,!1),e=s.updateQueue,t.updateQueue=e,hl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Us,1&Us.current|2),hi&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Mc&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Vs(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,hl(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!hi)return fl(t),null}else 2*le()-r.renderingStartTime>Mc&&536870912!==n&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Us.current,z(Us,i?1&n|2:1&n),hi&&ii(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return js(t),Rs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&hl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Ki),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ti(ji),fl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function ml(e,t){switch(ai(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ti(ji),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(js(t),null===t.alternate)throw Error(o(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(js(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Us),null;case 4:return Y(),null;case 10:return Ti(t.type),null;case 22:case 23:return js(t),Rs(),null!==e&&V(Ki),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ti(ji),null;default:return null}}function gl(e,t){switch(ai(t),t.tag){case 3:Ti(ji),Y();break;case 26:case 27:case 5:J(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&js(t);break;case 13:js(t);break;case 19:V(Us);break;case 10:Ti(t.type);break;case 22:case 23:js(t),Rs(),null!==e&&V(Ki);break;case 24:Ti(ji)}}function yl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(mv){Cu(t,t.return,mv)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(mv){Cu(i,l,mv)}}}r=r.next}while(r!==s)}}catch(mv){Cu(t,t.return,mv)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ts(t,n)}catch(mv){Cu(e,e.return,mv)}}}function wl(e,t,n){n.props=Ea(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(mv){Cu(e,t,mv)}}function _l(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(mv){Cu(e,t,mv)}}function Sl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(mv){Cu(e,t,mv)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Cu(e,t,i)}else n.current=null}function El(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(mv){Cu(e,e.return,mv)}}function Cl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||hh(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&hh(e,t,f,p,r,d)}}return void vt(e,a,l,c,u,h,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||hh(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&hh(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?_t(e,!!n,f,!1):!!r!==!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:hh(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&hh(e,t,a,i,r,s)}return void St(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else hh(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else hh(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&hh(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:hh(e,t,u,f,r,p)}return;default:if(kt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dh(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||dh(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&hh(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||hh(e,t,d,f,r,p)}(r,e.type,n,t),r[Be]=t}catch(mv){Cu(e,e.return,mv)}}function xl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ah(e.type)||4===e.tag}function Tl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ah(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Nt));else if(4!==r&&(27===r&&Ah(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Al(e,t,n),e=e.sibling;null!==e;)Al(e,t,n),e=e.sibling}function kl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ah(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(kl(e,t,n),e=e.sibling;null!==e;)kl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fh(t,r,n),t[ze]=e,t[Be]=n}catch(mv){Cu(e,e.return,mv)}}var Pl=!1,Rl=!1,Nl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Ol=null;function Ml(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&yl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(mv){Cu(n,n.return,mv)}else{var i=Ea(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Cu(n,n.return,o)}}64&r&&bl(n),512&r&&_l(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ts(e,t)}catch(mv){Cu(n,n.return,mv)}}break;case 27:null===t&&4&r&&Il(n);case 26:case 5:Yl(e,n),null===t&&4&r&&El(n),512&r&&_l(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&zl(e,n);break;case 13:Yl(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=ku.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Pl)){t=null!==t&&null!==t.memoizedState||Rl,i=Pl;var s=Rl;Pl=r,(Rl=t)&&!s?Jl(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Pl=i,Rl=s}break;case 30:break;default:Yl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fl=null,jl=!1;function Ul(e,t,n){for(n=n.child;null!==n;)Vl(e,t,n),n=n.sibling}function Vl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Rl||Sl(n,t),Ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Rl||Sl(n,t);var r=Fl,i=jl;Ah(n.type)&&(Fl=n.stateNode,jl=!1),Ul(e,t,n),Uh(n.stateNode),Fl=r,jl=i;break;case 5:Rl||Sl(n,t);case 6:if(r=Fl,i=jl,Fl=null,Ul(e,t,n),jl=i,null!==(Fl=r))if(jl)try{(9===Fl.nodeType?Fl.body:"HTML"===Fl.nodeName?Fl.ownerDocument.body:Fl).removeChild(n.stateNode)}catch(mv){Cu(n,t,mv)}else try{Fl.removeChild(n.stateNode)}catch(mv){Cu(n,t,mv)}break;case 18:null!==Fl&&(jl?(kh(9===(e=Fl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wd(e)):kh(Fl,n.stateNode));break;case 4:r=Fl,i=jl,Fl=n.stateNode.containerInfo,jl=!0,Ul(e,t,n),Fl=r,jl=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),Rl||vl(4,n,t),Ul(e,t,n);break;case 1:Rl||(Sl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),Ul(e,t,n);break;case 21:Ul(e,t,n);break;case 22:Rl=(r=Rl)||null!==n.memoizedState,Ul(e,t,n),Rl=r;break;default:Ul(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wd(e)}catch(mv){Cu(t,t.return,mv)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wd(e)}catch(mv){Cu(t,t.return,mv)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Iu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(Ah(l.type)){Fl=l.stateNode,jl=!1;break e}break;case 5:Fl=l.stateNode,jl=!1;break e;case 3:case 4:Fl=l.stateNode.containerInfo,jl=!0;break e}l=l.return}if(null===Fl)throw Error(o(160));Vl(s,a,i),Fl=null,jl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Gl(t,e),t=t.sibling}var Wl=null;function Gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Kl(e),4&r&&(vl(3,e,e.return),yl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Kl(e),512&r&&(Rl||null===n||Sl(n,n.return)),64&r&&Pl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Wl;if(Hl(t,e),Kl(e),512&r&&(Rl||null===n||Sl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Qe]||s[ze]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),fh(s,r,n),s[ze]=e,et(s),r=s;break e;case"link":var a=rd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}fh(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=rd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}fh(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[ze]=e,et(s),r=s}e.stateNode=r}else id(i,e.type,e.stateNode);else e.stateNode=Zh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?id(i,e.type,e.stateNode):Zh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Cl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Kl(e),512&r&&(Rl||null===n||Sl(n,n.return)),null!==n&&4&r&&Cl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Kl(e),512&r&&(Rl||null===n||Sl(n,n.return)),32&e.flags){i=e.stateNode;try{Ct(i,"")}catch(mv){Cu(e,e.return,mv)}}4&r&&null!=e.stateNode&&Cl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Nl=!0);break;case 6:if(Hl(t,e),Kl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(mv){Cu(e,e.return,mv)}}break;case 3:if(nd=null,i=Wl,Wl=Bh(t.containerInfo),Hl(t,e),Wl=i,Kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wd(t.containerInfo)}catch(mv){Cu(e,e.return,mv)}Nl&&(Nl=!1,Ql(e));break;case 4:r=Wl,Wl=Bh(e.stateNode.containerInfo),Hl(t,e),Kl(e),Wl=r;break;case 12:default:Hl(t,e),Kl(e);break;case 31:case 19:Hl(t,e),Kl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 13:Hl(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Pl,h=Rl;if(Pl=u||i,Rl=h||c,Hl(t,e),Rl=h,Pl=u,Kl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Pl||Rl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(mv){Cu(c,c.return,mv)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(mv){Cu(c,c.return,mv)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Ih(p,!0):Ih(c.stateNode,!1)}catch(mv){Cu(c,c.return,mv)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,ql(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(xl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;kl(e,Tl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Ct(s,""),n.flags&=-33),kl(e,Tl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;Al(e,Tl(e),a);break;default:throw Error(o(161))}}catch(mv){Cu(e,e.return,mv)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ml(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Xl(t);break;case 1:Sl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),Xl(t);break;case 27:Uh(t.stateNode);case 26:case 5:Sl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Jl(i,s,n),yl(4,s);break;case 1:if(Jl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(mv){Cu(r,r.return,mv)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)xs(l[i],a)}catch(mv){Cu(r,r.return,mv)}}n&&64&o&&bl(s),_l(s,s.return);break;case 27:Il(s);case 26:case 5:Jl(i,s,n),n&&null===r&&4&o&&El(s),_l(s,s.return);break;case 12:Jl(i,s,n);break;case 31:Jl(i,s,n),n&&4&o&&zl(i,s);break;case 13:Jl(i,s,n),n&&4&o&&Bl(i,s);break;case 22:null===s.memoizedState&&Jl(i,s,n),_l(s,s.return);break;case 30:break;default:Jl(i,s,n)}t=t.sibling}}function Zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Vi(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vi(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&i&&yl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vi(e)));break;case 12:if(2048&i){ec(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(mv){Cu(t,t.return,mv)}}else ec(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ec(e,t,n,r):rc(e,t):2&s._visibility?ec(e,t,n,r):(s._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Zl(o,t);break;case 24:ec(e,t,n,r),2048&i&&$l(t.alternate,t)}}function nc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:nc(s,o,a,l,i),yl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?nc(s,o,a,l,i):rc(s,o):(u._visibility|=2,nc(s,o,a,l,i)),i&&2048&c&&Zl(o.alternate,o);break;case 24:nc(s,o,a,l,i),i&&2048&c&&$l(o.alternate,o);break;default:nc(s,o,a,l,i)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:rc(n,r),2048&i&&Zl(r.alternate,r);break;case 24:rc(n,r),2048&i&&$l(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var ic=8192;function sc(e,t,n){if(e.subtreeFlags&ic)for(e=e.child;null!==e;)oc(e,t,n),e=e.sibling}function oc(e,t,n){switch(e.tag){case 26:sc(e,t,n),e.flags&ic&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Kh(r.href),s=t.querySelector(Qh(i));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ad.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Yh(r),(i=Vh.get(i))&&ed(r,i),et(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fh(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ad.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:sc(e,t,n);break;case 3:case 4:var r=Wl;Wl=Bh(e.stateNode.containerInfo),sc(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=ic,ic=16777216,sc(e,t,n),ic=r):sc(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,hc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,hc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function hc(e,t){for(;null!==Ol;){var n=Ol;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Vi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ol=r;else e:for(n=e;null!==Ol;){var i=(r=Ol).sibling,s=r.return;if(Ll(r),r===n){Ol=null;break e}if(null!==i){i.return=s,Ol=i;break e}Ol=s}}}var dc={getCacheForType:function(e){var t=Ni(ji),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ni(ji).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,pc=0,mc=null,gc=null,yc=0,vc=0,bc=null,wc=!1,_c=!1,Sc=!1,Ec=0,Cc=0,xc=0,Tc=0,Ac=0,kc=0,Ic=0,Pc=null,Rc=null,Nc=!1,Dc=0,Oc=0,Mc=1/0,Lc=null,Fc=null,jc=0,Uc=null,Vc=null,zc=0,Bc=0,qc=null,Hc=null,Wc=0,Gc=null;function Kc(){return 0!==(2&pc)&&0!==yc?yc&-yc:null!==O.T?qu():je()}function Qc(){if(0===kc)if(0===(536870912&yc)||hi){var e=Ce;0===(3932160&(Ce<<=1))&&(Ce=262144),kc=e}else kc=536870912;return null!==(e=Ns.current)&&(e.flags|=32),kc}function Yc(e,t,n){(e!==mc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(nu(e,0),$c(e,yc,kc,!1)),Ne(e,n),0!==(2&pc)&&e===mc||(e===mc&&(0===(2&pc)&&(Tc|=n),4===Cc&&$c(e,yc,kc,!1)),Lu(e))}function Xc(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||ke(e,t),i=r?function(e,t){var n=pc;pc|=2;var r=su(),i=ou();mc!==e||yc!==t?(Lc=null,Mc=le()+500,nu(e,t)):_c=ke(e,t);e:for(;;)try{if(0!==vc&&null!==gc){t=gc;var s=bc;t:switch(vc){case 1:vc=0,bc=null,fu(e,t,s,1);break;case 2:case 9:if(ts(s)){vc=0,bc=null,du(t);break}t=function(){2!==vc&&9!==vc||mc!==e||(vc=7),Lu(e)},s.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ts(s)?(vc=0,bc=null,du(t)):(vc=0,bc=null,fu(e,t,s,7));break;case 5:var a=null;switch(gc.tag){case 26:a=gc.memoizedState;case 5:case 27:var l=gc;if(a?sd(a):l.stateNode.complete){vc=0,bc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,pu(u)):gc=null}break t}}vc=0,bc=null,fu(e,t,s,5);break;case 6:vc=0,bc=null,fu(e,t,s,6);break;case 8:tu(),Cc=6;break e;default:throw Error(o(462))}}uu();break}catch(h){ru(e,h)}return Ci=Ei=null,O.H=r,O.A=i,pc=n,null!==gc?0:(mc=null,yc=0,Pr(),Cc)}(e,t):lu(e,t,!0),s=r;;){if(0===i){_c&&!r&&$c(e,t,0,!1);break}if(n=e.current.alternate,!s||Zc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=Pc;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,a).flags|=256),2!==(a=lu(l,a,!1))){if(Sc&&!c){l.errorRecoveryDisabledLanes|=s,Tc|=s,i=4;break e}s=Rc,Rc=i,null!==s&&(null===Rc?Rc=s:Rc.push.apply(Rc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){nu(e,0),$c(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:$c(r,t,kc,!wc);break e;case 2:Rc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Dc+300-le())){if($c(r,t,kc,!wc),0!==Ae(r,0,!0))break e;zc=t,r.timeoutHandle=Sh(Jc.bind(null,r,n,Rc,Lc,Nc,t,kc,Tc,Ic,wc,s,"Throttled",-0,0),i)}else Jc(r,n,Rc,Lc,Nc,t,kc,Tc,Ic,wc,s,null,-0,0)}break}i=lu(e,t,!1),s=!1}Lu(e)}function Jc(e,t,n,r,i,s,o,a,l,c,u,h,d,f){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){oc(t,s,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nt});var p=(62914560&s)===s?Dc-le():(4194048&s)===s?Oc-le():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&cd(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===od&&(od=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,o=i.initiatorType,a=i.duration;if(s&&a&&ph(o)){for(o=0,a=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>a)break;var u=l.transferSize,h=l.initiatorType;u&&ph(h)&&(o+=u*((l=l.responseEnd)<a?1:(a-c)/(l-c)))}if(--r,t+=8*(s+o)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>od?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(h,p),null!==p)return zc=s,e.cancelPendingCommit=p(gu.bind(null,e,t,s,n,r,i,o,a,l,u,h,null,d,f)),void $c(e,s,o,!c)}gu(e,t,s,n,r,i,o,a,l)}function Zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch(mv){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,n,r){t&=~Ac,t&=~Tc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-we(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&De(e,n,t)}function eu(){return 0!==(6&pc)||(Fu(0,!1),!1)}function tu(){if(null!==gc){if(0===vc)var e=gc.return;else Ci=Ei=null,oo(e=gc),as=null,ls=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Eh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc=0,tu(),mc=e,gc=n=Vr(e.current,null),yc=t,vc=0,bc=null,wc=!1,_c=ke(e,t),Sc=!1,Ic=kc=Ac=Tc=xc=Cc=0,Rc=Pc=null,Nc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-we(r),s=1<<i;t|=e[i],r&=~s}return Ec=t,Pr(),n}function ru(e,t){Bs=null,O.H=ma,t===Ji||t===$i?(t=ss(),vc=3):t===Zi?(t=ss(),vc=4):vc=t===Na?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===gc&&(Cc=1,Aa(e,Qr(t,e.current)))}function iu(){var e=Ns.current;return null===e||((4194048&yc)===yc?null===Ds:((62914560&yc)===yc||0!==(536870912&yc))&&e===Ds)}function su(){var e=O.H;return O.H=ma,null===e?ma:e}function ou(){var e=O.A;return O.A=dc,e}function au(){Cc=4,wc||(4194048&yc)!==yc&&null!==Ns.current||(_c=!0),0===(134217727&xc)&&0===(134217727&Tc)||null===mc||$c(mc,yc,kc,!1)}function lu(e,t,n){var r=pc;pc|=2;var i=su(),s=ou();mc===e&&yc===t||(Lc=null,nu(e,t)),t=!1;var o=Cc;e:for(;;)try{if(0!==vc&&null!==gc){var a=gc,l=bc;switch(vc){case 8:tu(),o=6;break e;case 3:case 2:case 9:case 6:null===Ns.current&&(t=!0);var c=vc;if(vc=0,bc=null,fu(e,a,l,c),n&&_c){o=0;break e}break;default:c=vc,vc=0,bc=null,fu(e,a,l,c)}}cu(),o=Cc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Ci=Ei=null,pc=r,O.H=i,O.A=s,null===gc&&(mc=null,yc=0,Pr()),o}function cu(){for(;null!==gc;)hu(gc)}function uu(){for(;null!==gc&&!oe();)hu(gc)}function hu(e){var t=al(e.alternate,e,Ec);e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wa(n,t,t.pendingProps,t.type,void 0,yc);break;case 11:t=Wa(n,t,t.pendingProps,t.type.render,t.ref,yc);break;case 5:oo(t);default:gl(n,t),t=al(n,t=gc=zr(t,Ec),Ec)}e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function fu(e,t,n,r){Ci=Ei=null,oo(t),as=null,ls=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ii(t,n,i,!0),null!==(n=Ns.current)){switch(n.tag){case 31:case 13:return null===Ds?au():null===n.alternate&&0===Cc&&(Cc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),xu(e,r,i)),!1;case 22:return n.flags|=65536,r===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),xu(e,r,i)),!1}throw Error(o(435,n.tag))}return xu(e,r,i),au(),!1}if(hi)return null!==(t=Ns.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&_i(Qr(e=Error(o(422),{cause:r}),n))):(r!==pi&&_i(Qr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Qr(r,n),_s(e,i=Ia(e.stateNode,r,i)),4!==Cc&&(Cc=2)),!1;var s=Error(o(520),{cause:r});if(s=Qr(s,n),null===Pc?Pc=[s]:Pc.push(s),4!==Cc&&(Cc=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,_s(n,e=Ia(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Fc||!Fc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ra(i=Pa(i),e,n,r),_s(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,yc))return Cc=1,Aa(e,Qr(n,e.current)),void(gc=null)}catch(mv){if(null!==i)throw gc=i,mv;return Cc=1,Aa(e,Qr(n,e.current)),void(gc=null)}32768&t.flags?(hi||1===r?e=!0:_c||0!==(536870912&yc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ns.current)&&13===r.tag&&(r.flags|=16384))),mu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void mu(t,wc);e=t.return;var n=pl(t.alternate,t,Ec);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===Cc&&(Cc=5)}function mu(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);Cc=6,gc=null}function gu(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{_u()}while(0!==jc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-we(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&De(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Ir,a,l,c),e===mc&&(gc=mc=null,yc=0),Vc=t,Uc=e,zc=n,Bc=s,qc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(de,function(){return Su(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=M.p,M.p=2,a=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,mh=wd,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:e,selectionRange:n},wd=!1,Ol=t;null!==Ol;)if(e=(t=Ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ol=e;else for(;null!==Ol;){switch(s=(t=Ol).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Ea(n.type,i);e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(mv){Cu(n,n.return,mv)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ph(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ph(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Ol=e;break}Ol=t.return}}(e,t)}finally{pc=a,M.p=i,O.T=r}}jc=1,yu(),vu(),bu()}}function yu(){if(1===jc){jc=0;var e=Uc,t=Vc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=M.p;M.p=2;var i=pc;pc|=4;try{Gl(t,e);var s=gh,o=rr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&nr(a.ownerDocument.documentElement,a)){if(null!==l&&ir(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var y=tr(a,m),v=tr(a,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=h.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var w=h[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}wd=!!mh,gh=mh=null}finally{pc=i,M.p=r,O.T=n}}e.current=t,jc=2}}function vu(){if(2===jc){jc=0;var e=Uc,t=Vc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=M.p;M.p=2;var i=pc;pc|=4;try{Ml(e,t.alternate,t)}finally{pc=i,M.p=r,O.T=n}}jc=3}}function bu(){if(4===jc||3===jc){jc=0,ae();var e=Uc,t=Vc,n=zc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,Vc=Uc=null,wu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Fc=null),Fe(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=M.p,M.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,M.p=i}}0!==(3&zc)&&_u(),Lu(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Gc?Wc++:(Wc=0,Gc=e):Wc=0,Fu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Vi(t)))}function _u(){return yu(),vu(),bu(),Su()}function Su(){if(5!==jc)return!1;var e=Uc,t=Bc;Bc=0;var n=Fe(zc),r=O.T,i=M.p;try{M.p=32>n?32:n,O.T=null,n=qc,qc=null;var s=Uc,a=zc;if(jc=0,Vc=Uc=null,zc=0,0!==(6&pc))throw Error(o(331));var l=pc;if(pc|=4,cc(s.current),tc(s,s.current,a,n),pc=l,Fu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(c){}return!0}finally{M.p=i,O.T=r,wu(e,t)}}function Eu(e,t,n){t=Qr(n,t),null!==(e=bs(e,t=Ia(e.stateNode,t,2),2))&&(Ne(e,2),Lu(e))}function Cu(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Fc||!Fc.has(r))){e=Qr(n,e),null!==(r=bs(t,n=Pa(2),2))&&(Ra(n,r,t,e),Ne(r,2),Lu(r));break}}t=t.return}}function xu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Sc=!0,i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(yc&n)===n&&(4===Cc||3===Cc&&(62914560&yc)===yc&&300>le()-Dc?0===(2&pc)&&nu(e,0):Ac|=n,Ic===yc&&(Ic=0)),Lu(e)}function Au(e,t){0===t&&(t=Pe()),null!==(e=Dr(e,t))&&(Ne(e,t),Lu(e))}function ku(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),Au(e,n)}var Pu=null,Ru=null,Nu=!1,Du=!1,Ou=!1,Mu=0;function Lu(e){e!==Ru&&null===e.next&&(null===Ru?Pu=Ru=e:Ru=Ru.next=e),Du=!0,Nu||(Nu=!0,xh(function(){0!==(6&pc)?ie(ue,ju):Uu()}))}function Fu(e,t){if(!Ou&&Du){Ou=!0;do{for(var n=!1,r=Pu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-we(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Bu(r,s))}else s=yc,0===(3&(s=Ae(r,r===mc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ke(r,s)||(n=!0,Bu(r,s));r=r.next}}while(n);Ou=!1}}function ju(){Uu()}function Uu(){Du=Nu=!1;var e=0;0!==Mu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==_h&&(_h=e,!0);return _h=null,!1}()&&(e=Mu);for(var t=le(),n=null,r=Pu;null!==r;){var i=r.next,s=Vu(r,t);0===s?(r.next=null,null===n?Pu=i:n.next=i,null===i&&(Ru=n)):(n=r,(0!==e||0!==(3&s))&&(Du=!0)),r=i}0!==jc&&5!==jc||Fu(e,!1),0!==Mu&&(Mu=0)}function Vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-we(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=Ie(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=yc,n=Ae(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ke(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Fe(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return r=zu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(_u()&&e.callbackNode!==n)return null;var r=yc;return 0===(r=Ae(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,r,t),Vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Bu(e,t){if(_u())return null;Xc(e,t,!0)}function qu(){if(0===Mu){var e=qi;0===e&&(e=Ee,0===(261888&(Ee<<=1))&&(Ee=256)),Mu=e}return Mu}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Rt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Gu=0;Gu<Cr.length;Gu++){var Ku=Cr[Gu];xr(Ku.toLowerCase(),"on"+(Ku[0].toUpperCase()+Ku.slice(1)))}xr(gr,"onAnimationEnd"),xr(yr,"onAnimationIteration"),xr(vr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(br,"onTransitionRun"),xr(wr,"onTransitionStart"),xr(_r,"onTransitionCancel"),xr(Sr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function Xu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(mv){Tr(mv)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(mv){Tr(mv)}i.currentTarget=null,s=l}}}}function Ju(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(th(t,e,2,!1),n.add(r))}function Zu(e,t,n){var r=0;t&&(r|=4),th(n,e,r,t)}var $u="_reactListening"+Math.random().toString(36).slice(2);function eh(e){if(!e[$u]){e[$u]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Zu(t,!1,e),Zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$u]||(t[$u]=!0,Zu("selectionchange",!1,t))}}function th(e,t,n,r){switch(Ad(t)){case 2:var i=_d;break;case 8:i=Sd;break;default:i=Ed}n=i.bind(null,t,n,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nh(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=Xe(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Ut(function(){var r=s,i=Ot(n),o=[];e:{var a=Er.get(e);if(void 0!==a){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case gr:case yr:case vr:c=un;break;case Sr:c=_n;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=En}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Vt(m,f))&&h.push(rh(m,g,p)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[qe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=an,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=bn,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?a:Ze(c),p=null==u?a:Ze(u),(a=new h(g,m+"leave",c,n,i)).target=d,a.relatedTarget=p,g=null,Xe(i)===r&&((h=new h(f,m+"enter",u,n,i)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=sh,m=u,p=0,g=f=c;g;g=h(g))p++;g=0;for(var y=m;y;y=h(y))g++;for(;0<p-g;)f=h(f),p--;for(;0<g-p;)m=h(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){h=f;break e}f=h(f),m=h(m)}h=null}else h=null;null!==c&&oh(o,a,c,h,!1),null!==u&&null!==d&&oh(o,d,u,h,!0)}if("select"===(c=(a=r?Ze(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=zn;else if(Mn(a))if(Bn)v=Jn;else{v=Yn;var b=Qn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&kt(r.elementType)&&(v=zn):v=Xn;switch(v&&(v=v(e,r))?Ln(o,v,n,i):(b&&b(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&wt(a,"number",a.value)),b=r?Ze(r):window,e){case"focusin":(Mn(b)||"true"===b.contentEditable)&&(or=b,ar=r,lr=null);break;case"focusout":lr=ar=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(o,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(o,n,i)}var w;if(xn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Dn?Rn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(kn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Dn&&(w=Kt()):(Wt="value"in(Ht=i)?Ht.value:Ht.textContent,Dn=!0)),0<(b=ih(r,_)).length&&(_=new dn(_,e,null,n,i),o.push({event:_,listeners:b}),w?_.data=w:null!==(w=Nn(n))&&(_.data=w))),(w=An?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Pn=!0,In);case"textInput":return(e=t.data)===In&&Pn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!xn&&Rn(e,t)?(e=Kt(),Gt=Wt=Ht=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(_=ih(r,"onBeforeInput")).length&&(b=new dn("onBeforeInput","beforeinput",null,n,i),o.push({event:b,listeners:_}),b.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Hu((i[Be]||null).action),o=r.submitter;o&&null!==(t=(t=o[Be]||null)?Hu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new nn("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Mu){var e=o?Wu(i,o):new FormData(i);ta(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Wu(i,o):new FormData(i),ta(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Xu(o,t)})}function rh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ih(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Vt(e,n))&&r.unshift(rh(e,i,s)),null!=(i=Vt(e,t))&&r.push(rh(e,i,s))),3===e.tag)return r;e=e.return}return[]}function sh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function oh(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Vt(n,s))&&o.unshift(rh(n,c,l)):i||null!=(c=Vt(n,s))&&o.push(rh(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ah=/\r\n?/g,lh=/\u0000|\uFFFD/g;function ch(e){return("string"===typeof e?e:""+e).replace(ah,"\n").replace(lh,"")}function uh(e,t){return t=ch(t),ch(e)===t}function hh(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Ct(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":At(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&hh(e,t,"name",i.name,i,null),hh(e,t,"formEncType",i.formEncType,i,null),hh(e,t,"formMethod",i.formMethod,i,null),hh(e,t,"formTarget",i.formTarget,i,null)):(hh(e,t,"encType",i.encType,i,null),hh(e,t,"method",i.method,i,null),hh(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Nt);break;case"onScroll":null!=r&&Ju("scroll",e);break;case"onScrollEnd":null!=r&&Ju("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Rt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ju("beforetoggle",e),Ju("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function dh(e,t,n,r,i,s){switch(n){case"style":At(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&Ct(e,""+r);break;case"onScroll":null!=r&&Ju("scroll",e);break;case"onScrollEnd":null!=r&&Ju("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Nt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Be]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function fh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ju("error",e),Ju("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:hh(e,t,r,a,n,null)}}return s&&hh(e,t,"srcSet",n.srcSet,n,null),void(i&&hh(e,t,"src",n.src,n,null));case"input":Ju("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:hh(e,t,i,h,n,null)}}return void bt(e,r,l,c,u,a,s,!1);case"select":for(s in Ju("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:hh(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?_t(e,!!i,t,!1):null!=n&&_t(e,!!i,n,!0));case"textarea":for(a in Ju("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:hh(e,t,a,l,n,null)}return void Et(e,i,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else hh(e,t,c,i,n,null);return;case"dialog":Ju("beforetoggle",e),Ju("toggle",e),Ju("cancel",e),Ju("close",e);break;case"iframe":case"object":Ju("load",e);break;case"video":case"audio":for(i=0;i<Qu.length;i++)Ju(Qu[i],e);break;case"image":Ju("error",e),Ju("load",e);break;case"details":Ju("toggle",e);break;case"embed":case"source":case"link":Ju("error",e),Ju("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:hh(e,t,u,i,n,null)}return;default:if(kt(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&dh(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&hh(e,t,l,i,n,null))}function ph(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var mh=null,gh=null;function yh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _h=null;var Sh="function"===typeof setTimeout?setTimeout:void 0,Eh="function"===typeof clearTimeout?clearTimeout:void 0,Ch="function"===typeof Promise?Promise:void 0,xh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ch?function(e){return Ch.resolve(null).then(e).catch(Th)}:Sh;function Th(e){setTimeout(function(){throw e})}function Ah(e){return"head"===e}function kh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Wd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Uh(e.ownerDocument.documentElement);else if("head"===n){Uh(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var o=s.nextSibling,a=s.nodeName;s[Qe]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}else"body"===n&&Uh(e.ownerDocument.body);n=i}while(n);Wd(t)}function Ih(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ph(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ph(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Rh(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Oh(e.nextSibling)))return null}return e}function Nh(e){return"$?"===e.data||"$~"===e.data}function Dh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Oh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Mh=null;function Lh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Oh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Fh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function jh(e,t,n){switch(t=yh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Uh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Vh=new Map,zh=new Set;function Bh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qh=M.d;M.d={f:function(){var e=qh.f(),t=eu();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?ra(t):qh.r(e)},D:function(e){qh.D(e),Wh("dns-prefetch",e,null)},C:function(e,t){qh.C(e,t),Wh("preconnect",e,t)},L:function(e,t,n){qh.L(e,t,n);var r=Hh;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var s=i;switch(t){case"style":s=Kh(e);break;case"script":s=Xh(e)}Vh.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Vh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Qh(s))||"script"===t&&r.querySelector(Jh(s))||(fh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){qh.m(e,t);var n=Hh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xh(e)}if(!Vh.has(s)&&(e=f({rel:"modulepreload",href:e},t),Vh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jh(s)))return}fh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){qh.X(e,t);var n=Hh;if(n&&e){var r=$e(n).hoistableScripts,i=Xh(e),s=r.get(i);s||((s=n.querySelector(Jh(i)))||(e=f({src:e,async:!0},t),(t=Vh.get(i))&&td(e,t),et(s=n.createElement("script")),fh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){qh.S(e,t,n);var r=Hh;if(r&&e){var i=$e(r).hoistableStyles,s=Kh(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Qh(s)))a.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Vh.get(s))&&ed(e,n);var l=o=r.createElement("link");et(l),fh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,$h(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){qh.M(e,t);var n=Hh;if(n&&e){var r=$e(n).hoistableScripts,i=Xh(e),s=r.get(i);s||((s=n.querySelector(Jh(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Vh.get(i))&&td(e,t),et(s=n.createElement("script")),fh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Hh="undefined"===typeof document?null:document;function Wh(e,t,n){var r=Hh;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),zh.has(i)||(zh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(fh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Gh(e,t,n,r){var i,s,a,l,c=(c=G.current)?Bh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kh(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kh(n.href);var u=$e(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Qh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Vh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Vh.set(e,n),u||(i=c,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),fh(s,"link",a),et(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xh(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Kh(e){return'href="'+yt(e)+'"'}function Qh(e){return'link[rel="stylesheet"]['+e+"]"}function Yh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Xh(e){return'[src="'+yt(e)+'"]'}function Jh(e){return"script[async]"+e}function Zh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fh(r,"style",i),$h(r,n.precedence,e),t.instance=r;case"stylesheet":i=Kh(n.href);var s=e.querySelector(Qh(i));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=Yh(n),(i=Vh.get(i))&&ed(r,i),et(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fh(s,"link",r),t.state.loading|=4,$h(s,n.precedence,e),t.instance=s;case"script":return s=Xh(n.src),(i=e.querySelector(Jh(s)))?(t.instance=i,et(i),i):(r=n,(i=Vh.get(s))&&td(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),fh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,$h(r,n.precedence,e));return t.instance}function $h(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function td(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nd=null;function rd(e,t,n){if(null===nd){var r=new Map,i=nd=new Map;i.set(n,r)}else(r=(i=nd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Qe]||s[ze]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function id(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var od=0;function ad(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ld=null;function cd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ld=new Map,t.forEach(ud,e),ld=null,ad.call(e))}function ud(e,t){if(!(4&t.state.loading)){var n=ld.get(e);if(n)var r=n.get(null);else{n=new Map,ld.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=ad.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var hd={$$typeof:_,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function dd(e,t,n,r,i,s,o,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fd(e,t,n,r,i,s,o,a,l,c,u,h){return e=new dd(e,t,n,o,l,c,u,h,a),t=1,!0===s&&(t|=24),s=jr(3,null,null,t),e.current=s,s.stateNode=e,(t=Ui()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},gs(s),e}function pd(e){return e?e=Lr:Lr}function md(e,t,n,r,i,s){i=pd(i),null===r.context?r.context=i:r.pendingContext=i,(r=vs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=bs(e,r,t))&&(Yc(n,0,t),ws(n,e,t))}function gd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yd(e,t){gd(e,t),(e=e.alternate)&&gd(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=Dr(e,67108864);null!==t&&Yc(t,0,67108864),yd(e,67108864)}}function bd(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Dr(e,t=Le(t));null!==n&&Yc(n,0,t),yd(e,t)}}var wd=!0;function _d(e,t,n,r){var i=O.T;O.T=null;var s=M.p;try{M.p=2,Ed(e,t,n,r)}finally{M.p=s,O.T=i}}function Sd(e,t,n,r){var i=O.T;O.T=null;var s=M.p;try{M.p=8,Ed(e,t,n,r)}finally{M.p=s,O.T=i}}function Ed(e,t,n,r){if(wd){var i=Cd(r);if(null===i)nh(e,t,r,xd,n),Ld(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Id=Fd(Id,e,t,n,r,i),!0;case"dragenter":return Pd=Fd(Pd,e,t,n,r,i),!0;case"mouseover":return Rd=Fd(Rd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nd.set(s,Fd(Nd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dd.set(s,Fd(Dd.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ld(e,r),4&t&&-1<Md.indexOf(e)){for(;null!==i;){var s=Je(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=Te(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-we(o);a.entanglements[1]|=l,o&=~l}Lu(s),0===(6&pc)&&(Mc=le()+500,Fu(0,!1))}}break;case 31:case 13:null!==(a=Dr(s,2))&&Yc(a,0,2),eu(),yd(s,2)}if(null===(s=Cd(r))&&nh(e,t,r,xd,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else nh(e,t,r,null,n)}}function Cd(e){return Td(e=Ot(e))}var xd=null;function Td(e){if(xd=null,null!==(e=Xe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xd=e,null}function Ad(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var kd=!1,Id=null,Pd=null,Rd=null,Nd=new Map,Dd=new Map,Od=[],Md="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ld(e,t){switch(e){case"focusin":case"focusout":Id=null;break;case"dragenter":case"dragleave":Pd=null;break;case"mouseover":case"mouseout":Rd=null;break;case"pointerover":case"pointerout":Nd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(t.pointerId)}}function Fd(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Je(t))&&vd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jd(e){var t=Xe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ue(e.priority,function(){bd(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ue(e.priority,function(){bd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ud(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cd(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&vd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Vd(e,t,n){Ud(e)&&n.delete(t)}function zd(){kd=!1,null!==Id&&Ud(Id)&&(Id=null),null!==Pd&&Ud(Pd)&&(Pd=null),null!==Rd&&Ud(Rd)&&(Rd=null),Nd.forEach(Vd),Dd.forEach(Vd)}function Bd(e,t){e.blockedOn===t&&(e.blockedOn=null,kd||(kd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zd)))}var qd=null;function Hd(e){qd!==e&&(qd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qd===e&&(qd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Td(r||n))continue;break}var s=Je(n);null!==s&&(e.splice(t,3),t-=3,ta(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Wd(e){function t(t){return Bd(t,e)}null!==Id&&Bd(Id,e),null!==Pd&&Bd(Pd,e),null!==Rd&&Bd(Rd,e),Nd.forEach(t),Dd.forEach(t);for(var n=0;n<Od.length;n++){var r=Od[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Od.length&&null===(n=Od[0]).blockedOn;)jd(n),null===n.blockedOn&&Od.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Be]||null;if("function"===typeof s)o||Hd(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Be]||null)a=o.formAction;else if(null!==Td(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Hd(n)}}}function Gd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Kd(e){this._internalRoot=e}function Qd(e){this._internalRoot=e}Qd.prototype.render=Kd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));md(t.current,Kc(),e,t,null,null)},Qd.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;md(e.current,2,null,e,null,null),eu(),t[qe]=null}},Qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=je();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Od.length&&0!==t&&t<Od[n].priority;n++);Od.splice(n,0,e),0===n&&jd(e)}};var Yd=i.version;if("19.2.0"!==Yd)throw Error(o(527,Yd,"19.2.0"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return h(i),e;if(s===r)return h(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Xd={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{ye=Jd.inject(Xd),ve=Jd}catch(Zd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=Ca,s=xa,l=Ta;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fd(e,1,!1,null,0,n,r,null,i,s,l,Gd),e[qe]=t.current,eh(e),new Kd(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=Ca,l=xa,c=Ta,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fd(e,1,!0,t,0,r,i,u,s,l,c,Gd)).context=pd(null),n=t.current,(i=vs(r=Le(r=Kc()))).callback=null,bs(n,i,r),n=r,t.current.lanes=n,Ne(t,n),Lu(t),e[qe]=t.current,eh(e),new Qd(t)},t.version="19.2.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var _=w.prototype=new b;_.constructor=w,g(_,v.prototype),_.isPureReactComponent=!0;var S=Array.isArray;function E(){}var C={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function T(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return P((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+I(e,0):s,S(o)?(i="",null!=u&&(i=u.replace(k,"$&/")+"/"),P(o,t,i,"",function(e){return e})):null!=o&&(A(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+u,o=T(l.type,c,l.props)),t.push(o)),1;u=0;var h,f=""===s?".":s+":";if(S(e))for(var m=0;m<e.length;m++)u+=P(s=e[m],t,i,a=f+I(s,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=P(s=s.value,t,i,a=f+I(s,m++),o);else if("object"===a){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!x.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return T(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)x.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return T(e,s,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),i=C.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(E,D)}catch(mv){D(mv)}finally{null!==t&&null!==n.types&&(t.types=n.types),C.T=t}},t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},t.use=function(e){return C.H.use(e)},t.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},t.useCallback=function(e,t){return C.H.useCallback(e,t)},t.useContext=function(e){return C.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return C.H.useEffect(e,t)},t.useEffectEvent=function(e){return C.H.useEffectEvent(e)},t.useId=function(){return C.H.useId()},t.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.H.useMemo(e,t)},t.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},t.useRef=function(e){return C.H.useRef(e)},t.useState=function(e){return C.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element");function r(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},824:e=>{const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map(e=>e.trim())},t.splitSections=function(e){return e.split("\nm=").map((e,t)=>(t>0?"m="+e:e).trim()+"\r\n")},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter(e=>0===e.indexOf(n))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach(t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(e=>parseInt(e,10))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let s=3;s<r.length;s++){const i=r[s],o=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){const r=t.parseRtpMap(o),s=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=s.length?t.parseFmtp(s[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach(e=>{n.headerExtensions.push(t.parseExtmap(e))});const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(e=>{i.forEach(t=>{e.rtcpFeedback.find(e=>e.type===t.type&&e.parameter===t.parameter)||e.rtcpFeedback.push(t)})}),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map(e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach(e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)});let i=0;return n.codecs.forEach(e=>{e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach(e=>{r+=t.writeExtmap(e)}),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute),a=o.length>0&&o[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map(e=>e.substring(17).split(" ").map(e=>parseInt(e,10)));c.length>0&&c[0].length>1&&c[0][0]===a&&(l=c[0][1]),r.codecs.forEach(e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&l&&(t.rtx={ssrc:l}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},n.push(t))}}),0===n.length&&a&&n.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach(e=>{e.maxBitrate=u})),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute)[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const s=t.matchPrefix(e,"a=rtcp-mux");return n.mux=s.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"msid"===e.attribute);return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const s=t.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){const e=o[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const s=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,C||(C=!0,E());else{var t=r(u);null!==t&&N(S,t.startTime-e)}}var E,C=!1,x=-1,T=5,A=-1;function k(){return!!y||!(t.unstable_now()-A<T)}function I(){if(y=!1,C){var e=t.unstable_now();A=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(x),x=-1),p=!0;var s=f;try{t:{for(_(e),d=r(c);null!==d&&!(d.expirationTime>e&&k());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,_(e),n=!0;break t}d===r(c)&&i(c),_(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&N(S,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?E():C=!1}}}if("function"===typeof w)E=function(){w(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=I,E=function(){R.postMessage(null)}}else E=function(){v(I,0)};function N(e,n){x=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(x),x=-1):g=!0,N(S,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,C||(C=!0,E()))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(ND){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/CodeCollab/";var r={};n.r(r),n.d(r,{fixNegotiationNeeded:()=>TL,shimAddTrackRemoveTrack:()=>CL,shimAddTrackRemoveTrackWithNative:()=>EL,shimGetSendersWithDtmf:()=>_L,shimGetUserMedia:()=>vL,shimMediaStream:()=>bL,shimOnTrack:()=>wL,shimPeerConnection:()=>xL,shimSenderReceiverGetStats:()=>SL});var i={};n.r(i),n.d(i,{shimAddTransceiver:()=>ML,shimCreateAnswer:()=>jL,shimCreateOffer:()=>FL,shimGetDisplayMedia:()=>kL,shimGetParameters:()=>LL,shimGetUserMedia:()=>AL,shimOnTrack:()=>IL,shimPeerConnection:()=>PL,shimRTCDataChannel:()=>OL,shimReceiverGetStats:()=>NL,shimRemoveStream:()=>DL,shimSenderGetStats:()=>RL});var s={};n.r(s),n.d(s,{shimAudioContext:()=>KL,shimCallbacksAPI:()=>zL,shimConstraints:()=>qL,shimCreateOfferLegacy:()=>GL,shimGetUserMedia:()=>BL,shimLocalStreamsAPI:()=>UL,shimRTCIceServerUrls:()=>HL,shimRemoteStreamsAPI:()=>VL,shimTrackEventTransceiver:()=>WL});var o={};n.r(o),n.d(o,{removeExtmapAllowMixed:()=>tF,shimAddIceCandidateNullOrEmpty:()=>nF,shimConnectionState:()=>eF,shimMaxMessageSize:()=>ZL,shimParameterlessSetLocalDescription:()=>rF,shimRTCIceCandidate:()=>XL,shimRTCIceCandidateRelayProtocol:()=>JL,shimSendThrowTypeError:()=>$L});var a=n(43),l=n.t(a,2),c=n(391);function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}function f(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const g=["sri"],y=["page"],v=["page","matches"],b=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],w=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var S="popstate";function E(){return P(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=I(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),A("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:k(t))},function(e,t){x("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function C(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(ND){}}}function T(e,t){return{usr:e.state,key:e.key,idx:t}}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return m(m({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?I(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function I(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function P(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e){return R(e)}null==c&&(c=0,o.replaceState(m(m({},o.state),{},{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(S,h),l=e,()=>{i.removeEventListener(S,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=A(f.location,e,t);n&&n(r,e),c=u()+1;let h=T(r,c),d=f.createHref(r);try{o.pushState(h,"",d)}catch(mv){if(mv instanceof DOMException&&"DataCloneError"===mv.name)throw mv;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a="REPLACE";let r=A(f.location,e,t);n&&n(r,e),c=u();let i=T(r,c),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}function R(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),C(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function N(e,t){return D(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function D(e,t,n,r){let i=Q(("string"===typeof t?I(t):t).pathname||"/",n);if(null==i)return null;let s=O(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=K(i);o=H(s[a],e,r)}return o}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;C(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=$([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(C(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),O(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:q(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of M(e.path))s(e,t,!0,r);else s(e,t)}),t}function M(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=M(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var L=/^:[\w-]+$/,F=3,j=2,U=1,V=10,z=-2,B=e=>"*"===e;function q(e,t){let n=e.split("/"),r=n.length;return n.some(B)&&(r+=z),t&&(r+=j),n.filter(e=>!B(e)).reduce((e,t)=>e+(L.test(t)?F:""===t?U:V),r)}function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=W({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=W({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:$([s,u.pathname]),pathnameBase:ee($([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=$([s,u.pathnameBase]))}return o}function W(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=G(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function K(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(mv){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(mv,").")),e}}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Y(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function X(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function J(e){let t=X(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Z(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=I(e):(r=m({},e),C(!r.pathname||!r.pathname.includes("?"),Y("?","pathname","search",r)),C(!r.pathname||!r.pathname.includes("#"),Y("#","pathname","hash",r)),C(!r.search||!r.search.includes("#"),Y("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?I(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:te(r),hash:ne(i)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var $=e=>e.join("/").replace(/\/\/+/g,"/"),ee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),te=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ne=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function re(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ie=["POST","PUT","PATCH","DELETE"],se=(new Set(ie),["GET",...ie]);new Set(se),Symbol("ResetLoaderData");var oe=a.createContext(null);oe.displayName="DataRouter";var ae=a.createContext(null);ae.displayName="DataRouterState";var le=a.createContext(!1);var ce=a.createContext({isTransitioning:!1});ce.displayName="ViewTransition";var ue=a.createContext(new Map);ue.displayName="Fetchers";var he=a.createContext(null);he.displayName="Await";var de=a.createContext(null);de.displayName="Navigation";var fe=a.createContext(null);fe.displayName="Location";var pe=a.createContext({outlet:null,matches:[],isDataRoute:!1});pe.displayName="Route";var me=a.createContext(null);me.displayName="RouteError";function ge(){return null!=a.useContext(fe)}function ye(){return C(ge(),"useLocation() may be used only in the context of a <Router> component."),a.useContext(fe).location}var ve="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function be(e){a.useContext(de).static||a.useLayoutEffect(e)}function we(){let{isDataRoute:e}=a.useContext(pe);return e?function(){let{router:e}=Pe("useNavigate"),t=Ne("useNavigate"),n=a.useRef(!1);be(()=>{n.current=!0});let r=a.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,ve),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,m({fromRouteId:t},i)))},[e,t]);return r}():function(){C(ge(),"useNavigate() may be used only in the context of a <Router> component.");let e=a.useContext(oe),{basename:t,navigator:n}=a.useContext(de),{matches:r}=a.useContext(pe),{pathname:i}=ye(),s=JSON.stringify(J(r)),o=a.useRef(!1);be(()=>{o.current=!0});let l=a.useCallback(function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(o.current,ve),!o.current)return;if("number"===typeof r)return void n.go(r);let l=Z(r,JSON.parse(s),i,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:$([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)},[t,n,s,i,e]);return l}()}a.createContext(null);function _e(){let{matches:e}=a.useContext(pe),t=e[e.length-1];return t?t.params:{}}function Se(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=a.useContext(pe),{pathname:r}=ye(),i=JSON.stringify(J(n));return a.useMemo(()=>Z(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function Ee(e,t,n,r,i){C(ge(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=a.useContext(de),{matches:o}=a.useContext(pe),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",d=l&&l.route;{let e=d&&d.path||"";Me(u,!d||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,p=ye();if(t){var g;let e="string"===typeof t?I(t):t;C("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=p;let y=f.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=N(e,{pathname:v});x(d||null!=b,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),x(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=ke(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:$([h,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:$([h,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,r,i);return t&&w?a.createElement(fe.Provider,{value:{location:m({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},w):w}function Ce(){let e=De(),t=re(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=a.createElement(a.Fragment,null,a.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),a.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",a.createElement("code",{style:s},"ErrorBoundary")," or"," ",a.createElement("code",{style:s},"errorElement")," prop on your route.")),a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:i},n):null,o)}var xe=a.createElement(Ce,null),Te=class extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?a.createElement(pe.Provider,{value:this.props.routeContext},a.createElement(me.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ae(e){let{routeContext:t,match:n,children:r}=e,i=a.useContext(oe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(pe.Provider,{value:t},r)}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));C(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,l=-1;if(n)for(let a=0;a<i.length;a++){let e=i[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=a),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){o=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}return i.reduceRight((e,c,u)=>{let h,d=!1,f=null,p=null;n&&(h=s&&c.route.id?s[c.route.id]:void 0,f=c.route.errorElement||xe,o&&(l<0&&0===u?(Me("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===u&&(d=!0,p=c.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,u+1)),g=()=>{let t;return t=h?f:d?p:c.route.Component?a.createElement(c.route.Component,null):c.route.element?c.route.element:e,a.createElement(Ae,{match:c,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?a.createElement(Te,{location:n.location,revalidation:n.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:r}):g()},null)}function Ie(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Pe(e){let t=a.useContext(oe);return C(t,Ie(e)),t}function Re(e){let t=a.useContext(ae);return C(t,Ie(e)),t}function Ne(e){let t=function(e){let t=a.useContext(pe);return C(t,Ie(e)),t}(e),n=t.matches[t.matches.length-1];return C(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function De(){var e;let t=a.useContext(me),n=Re("useRouteError"),r=Ne("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var Oe={};function Me(e,t,n){t||Oe[e]||(Oe[e]=!0,x(!1,n))}var Le={};function Fe(e,t){e||Le[t]||(Le[t]=!0,console.warn(t))}a.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return Ee(t,void 0,r,i,n)});function je(e){let{to:t,replace:n,state:r,relative:i}=e;C(ge(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=a.useContext(de);x(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=a.useContext(pe),{pathname:l}=ye(),c=we(),u=Z(t,J(o),l,"path"===i),h=JSON.stringify(u);return a.useEffect(()=>{c(JSON.parse(h),{replace:n,state:r,relative:i})},[c,h,i,n,r]),null}function Ue(e){C(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ve(e){let{basename:t="/",children:n=null,location:r,navigationType:i="POP",navigator:s,static:o=!1}=e;C(!ge(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=a.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);"string"===typeof r&&(r=I(r));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,m=a.useMemo(()=>{let e=Q(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:i}},[l,u,h,d,f,p,i]);return x(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:a.createElement(de.Provider,{value:c},a.createElement(fe.Provider,{children:n,value:m}))}function ze(e){let{children:t,location:n}=e;return Ee(Be(t),n)}a.Component;function Be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return a.Children.forEach(e,(e,r)=>{if(!a.isValidElement(e))return;let i=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,Be(e.props.children,i));C(e.type===Ue,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),C(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Be(e.props.children,i)),n.push(s)}),n}var qe="get",He="application/x-www-form-urlencoded";function We(e){return null!=e&&"string"===typeof e.tagName}var Ge=null;var Ke=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qe(e){return null==e||Ke.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(He,'"')),null)}function Ye(e,t){let n,r,i,s,o;if(We(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?Q(o,t):null,n=e.getAttribute("method")||qe,i=Qe(e.getAttribute("enctype"))||He,s=new FormData(e)}else if(function(e){return We(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return We(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?Q(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||qe,i=Qe(e.getAttribute("formenctype"))||Qe(o.getAttribute("enctype"))||He,s=new FormData(o,e),!function(){if(null===Ge)try{new FormData(document.createElement("form"),0),Ge=!1}catch(ND){Ge=!0}return Ge}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(We(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qe,r=null,i=He,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Xe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Je(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===Q(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(mv){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(mv),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $e(e){return null!=e&&"string"===typeof e.page}function et(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function tt(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>o(e,t)||a(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function nt(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function rt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!$e(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function it(e,t){return"lazy"===e.mode&&!0===t}function st(){let e=a.useContext(oe);return Xe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ot(){let e=a.useContext(ae);return Xe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var at=a.createContext(void 0);function lt(){let e=a.useContext(at);return Xe(e,"You must render this element inside a <HydratedRouter> element"),e}function ct(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ut(e,t,n){if(n&&!pt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}at.displayName="FrameworkContext";function ht(e){let{page:t}=e,n=u(e,y),{router:r}=st(),i=a.useMemo(()=>N(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?a.createElement(ft,m({page:t,matches:i},n)):null}function dt(e){let{manifest:t,routeModules:n}=lt(),[r,i]=a.useState([]);return a.useEffect(()=>{let r=!1;return async function(e,t,n){return rt((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ze(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(et).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?m(m({},e),{},{rel:"prefetch",as:"style"}):m(m({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function ft(e){let{page:t,matches:n}=e,r=u(e,v),i=ye(),{manifest:s,routeModules:o}=lt(),{basename:l}=st(),{loaderData:c,matches:h}=ot(),d=a.useMemo(()=>tt(t,n,h,s,i,"data"),[t,n,h,s,i]),f=a.useMemo(()=>tt(t,n,h,s,i,"assets"),[t,n,h,s,i]),p=a.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=s.routes[t.route.id];i&&i.hasLoader&&(!d.some(e=>e.route.id===t.route.id)&&t.route.id in c&&null!==(n=o[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let a=Je(t,l,"data");return r&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[l,c,i,s,d,n,t,o]),g=a.useMemo(()=>nt(f,s),[f,s]),y=dt(f);return a.createElement(a.Fragment,null,p.map(e=>a.createElement("link",m({key:e,rel:"prefetch",as:"fetch",href:e},r))),g.map(e=>a.createElement("link",m({key:e,rel:"modulepreload",href:e},r))),y.map(e=>{let{key:t,link:n}=e;return a.createElement("link",m({key:t,nonce:r.nonce},n))}))}var pt=!1;function mt(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:i,routeDiscovery:s,ssr:o}=lt(),{router:l,static:c,staticContext:h}=st(),{matches:d}=ot(),f=a.useContext(le),p=it(s,o);i&&(i.didRenderScripts=!0);let y=ut(d,null,r);a.useEffect(()=>{pt=!0},[]);let v=a.useMemo(()=>{var r;if(f)return null;let i=h?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=c?"".concat(null!==(r=t.hmr)&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(p?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];Xe(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(p?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=u(e,g),i=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(s.pop();s.length>0;)o.push("/".concat(s.join("/"))),s.pop();o.forEach(e=>{let n=N(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let a=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return m(m({},r),{},{routes:a,sri:!!n||void 0})}(t,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return a.createElement(a.Fragment,null,a.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:void 0})),a.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),b=pt||f?[]:(w=t.entry.imports.concat(nt(y,t,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let _="object"===typeof t.sri?t.sri:{};return Fe(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),pt||f?null:a.createElement(a.Fragment,null,"object"===typeof t.sri?a.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:_})}}):null,p?null:a.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:_[t.url],suppressHydrationWarning:!0}),a.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:_[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>a.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:_[t],suppressHydrationWarning:!0})),v)}function gt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}a.Component;function yt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,i=a.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(re(t))return a.createElement(vt,{title:"Unhandled Thrown Response!"},a.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return a.createElement(vt,{title:"Application Error!",isOutsideRemixApp:n},a.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),a.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),i)}function vt(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:i,children:s}=e,{routeModules:o}=lt();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!i?s:a.createElement("html",{lang:"en"},a.createElement("head",null,a.createElement("meta",{charSet:"utf-8"}),a.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),a.createElement("title",null,n)),a.createElement("body",null,a.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,r?a.createElement(mt,null):null)))}var bt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{bt&&(window.__reactRouterVersion="7.9.5")}catch(ND){}function wt(e){let{basename:t,children:n,window:r}=e,i=a.useRef();null==i.current&&(i.current=E({window:r,v5Compat:!0}));let s=i.current,[o,l]=a.useState({action:s.action,location:s.location}),c=a.useCallback(e=>{a.startTransition(()=>l(e))},[l]);return a.useLayoutEffect(()=>s.listen(c),[s,c]),a.createElement(Ve,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var _t=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=a.forwardRef(function(e,t){let n,{onClick:r,discover:i="render",prefetch:s="none",relative:o,reloadDocument:l,replace:c,state:h,target:d,to:f,preventScrollReset:p,viewTransition:g}=e,y=u(e,b),{basename:v}=a.useContext(de),w="string"===typeof f&&_t.test(f),_=!1;if("string"===typeof f&&w&&(n=f,bt))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=Q(t.pathname,v);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:_=!0}catch(ND){x(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};C(ge(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=a.useContext(de),{hash:i,pathname:s,search:o}=Se(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:$([n,s])),r.createHref({pathname:l,search:o,hash:i})}(f,{relative:o}),[E,T,A]=function(e,t){let n=a.useContext(at),[r,i]=a.useState(!1),[s,o]=a.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=a.useRef(null);a.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),a.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?"intent"!==e?[s,f,{}]:[s,f,{onFocus:ct(l,p),onBlur:ct(c,m),onMouseEnter:ct(u,p),onMouseLeave:ct(h,m),onTouchStart:ct(d,p)}]:[!1,f,{}]}(s,y),I=function(e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=we(),c=ye(),u=Se(e,{relative:s});return a.useCallback(a=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(a,t)){a.preventDefault();let t=void 0!==n?n:k(c)===k(u);l(e,{replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,u,n,r,t,e,i,s,o])}(f,{replace:c,state:h,target:d,preventScrollReset:p,relative:o,viewTransition:g});let P=a.createElement("a",m(m(m({},y),A),{},{href:n||S,onClick:_||l?r:function(e){r&&r(e),e.defaultPrevented||I(e)},ref:gt(t,T),target:d,"data-discover":w||"render"!==i?void 0:"true"}));return E&&!w?a.createElement(a.Fragment,null,P,a.createElement(ht,{page:S})):P});St.displayName="Link";var Et=a.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:c,children:h}=e,d=u(e,w),f=Se(l,{relative:d.relative}),p=ye(),g=a.useContext(ae),{navigator:y,basename:v}=a.useContext(de),b=null!=g&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.useContext(ce);C(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Tt("useViewTransitionState"),i=Se(e,{relative:t});if(!n.isTransitioning)return!1;let s=Q(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Q(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=W(i.pathname,o)||null!=W(i.pathname,s)}(f)&&!0===c,_=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=p.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(S=S.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&v&&(E=Q(E,v)||E);const x="/"!==_&&_.endsWith("/")?_.length-1:_.length;let T,A=S===_||!s&&S.startsWith(_)&&"/"===S.charAt(x),k=null!=E&&(E===_||!s&&E.startsWith(_)&&"/"===E.charAt(_.length)),I={isActive:A,isPending:k,isTransitioning:b},P=A?n:void 0;T="function"===typeof i?i(I):[i,A?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof o?o(I):o;return a.createElement(St,m(m({},d),{},{"aria-current":P,className:T,ref:t,style:R,to:l,viewTransition:c}),"function"===typeof h?h(I):h)});Et.displayName="NavLink";var Ct=a.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:i,reloadDocument:s,replace:o,state:l,method:c=qe,action:h,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:g}=e,y=u(e,_),v=It(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=a.useContext(de),r=a.useContext(pe);C(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s=m({},Se(e||".",{relative:t})),o=ye();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:$([n,s.pathname]));return k(s)}(h,{relative:f}),w="get"===c.toLowerCase()?"get":"post",S="string"===typeof h&&_t.test(h);return a.createElement("form",m(m({ref:t,method:w,action:b,onSubmit:s?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||c;v(t||e.currentTarget,{fetcherKey:r,method:n,navigate:i,replace:o,state:l,relative:f,preventScrollReset:p,viewTransition:g})}},y),{},{"data-discover":S||"render"!==n?void 0:"true"}))});function xt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Tt(e){let t=a.useContext(oe);return C(t,xt(e)),t}Ct.displayName="Form";var At=0,kt=()=>"__".concat(String(++At),"__");function It(){let{router:e}=Tt("useSubmit"),{basename:t}=a.useContext(de),n=Ne("useRouteId");return a.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=Ye(r,t);if(!1===i.navigate){let t=i.fetcherKey||kt();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}const Pt=!1,Rt=!1,Nt="${JSCORE_VERSION}",Dt=function(e,t){if(!e)throw Ot(t)},Ot=function(e){return new Error("Firebase Database ("+Nt+") INTERNAL ASSERT FAILED: "+e)},Mt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Lt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Mt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ft;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ft extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jt=function(e){const t=Mt(e);return Lt.encodeByteArray(t,!0)},Ut=function(e){return jt(e).replace(/\./g,"")},Vt=function(e){try{return Lt.decodeString(e,!0)}catch(ND){console.error("base64Decode failed: ",ND)}return null};function zt(e){return Bt(void 0,e)}function Bt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&qt(n)&&(e[n]=Bt(e[n],t[n]));return e}function qt(e){return"__proto__"!==e}function Ht(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Wt=()=>{try{return Ht().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/CodeCollab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STORAGE_BUCKET:"codecollab-51e34.firebasestorage.app",REACT_APP_AUTH_DOMAIN:"codecollab-51e34.firebaseapp.com",REACT_APP_PROJECT_ID:"codecollab-51e34",REACT_APP_APP_ID:"1:843472885618:web:39e387dd0fdc16c5ff6feb",REACT_APP_API_KEY:"AIzaSyBsa4EXmMMdQjMccbG17wBPMd9iQsb4KJY",REACT_APP_MESSAGING_SENDER_ID:"843472885618"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ND){return}const t=e&&Vt(e[1]);return t&&JSON.parse(t)})()}catch(ND){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(ND))}},Gt=e=>{var t;return null===(t=Wt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Kt=e=>{const t=Gt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Qt=()=>{var e;return null===(e=Wt())||void 0===e?void 0:e.config},Yt=e=>{var t;return null===(t=Wt())||void 0===t?void 0:t["_".concat(e)]};class Xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Jt(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Zt(e){return(await fetch(e,{credentials:"include"})).ok}function $t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=m({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ut(JSON.stringify({alg:"none",type:"JWT"})),Ut(JSON.stringify(s)),""].join(".")}const en={};let tn=!1;function nn(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Jt(window.location.host)||en[e]===t||en[e]||tn)return;function n(e){return"__firebase__banner__".concat(e)}en[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(en))en[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{tn=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function rn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function sn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function on(){var e;const t=null===(e=Wt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(ND){return!1}}function an(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ln(){return!0===Pt||!0===Rt}function cn(){return!on()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function un(){try{return"object"===typeof indexedDB}catch(ND){return!1}}class hn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}}class dn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(fn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new hn(n,s,t)}}const fn=/\{\$([^}]+)}/g;function pn(e){return JSON.parse(e)}function mn(e){return JSON.stringify(e)}const gn=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=pn(Vt(s[0])||""),n=pn(Vt(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(ND){}return{header:t,claims:n,data:r,signature:i}};function yn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function vn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function bn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function wn(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function _n(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Sn(n)&&Sn(s)){if(!_n(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Sn(e){return null!==e&&"object"===typeof e}function En(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Cn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function xn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Tn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class An{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=kn),void 0===r.error&&(r.error=kn),void 0===r.complete&&(r.complete=kn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(ND){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(ND){"undefined"!==typeof console&&console.error&&console.error(ND)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}function In(e,t){return"".concat(e," failed: ").concat(t," argument ")}const Pn=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Rn(e){return e&&e._delegate?e._delegate:e}class Nn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Dn="[DEFAULT]";class On{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Xt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(ND){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(ND){if(r)return null;throw ND}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Dn})}catch(ND){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(ND){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Dn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;return this.component?this.component.multipleInstances?e:Dn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Mn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new On(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ln=[];var Fn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Fn||(Fn={}));const jn={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},Un=Fn.INFO,Vn={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},zn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Vn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Bn{constructor(e){this.name=e,this._logLevel=Un,this._logHandler=zn,this._userLogHandler=null,Ln.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?jn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}}let qn,Hn;const Wn=new WeakMap,Gn=new WeakMap,Kn=new WeakMap,Qn=new WeakMap,Yn=new WeakMap;let Xn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Gn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Kn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $n(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Jn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Hn||(Hn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(er(this),n),$n(Wn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $n(e.apply(er(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(er(this),t,...r);return Kn.set(s,t.sort?t.sort():[t]),$n(s)}}function Zn(e){return"function"===typeof e?Jn(e):(e instanceof IDBTransaction&&function(e){if(Gn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Gn.set(e,t)}(e),t=e,(qn||(qn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Xn):e);var t}function $n(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t($n(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Wn.set(t,e)}).catch(()=>{}),Yn.set(t,e),t}(e);if(Qn.has(e))return Qn.get(e);const t=Zn(e);return t!==e&&(Qn.set(e,t),Yn.set(t,e)),t}const er=e=>Yn.get(e);const tr=["get","getKey","getAll","getAllKeys","count"],nr=["put","add","delete","clear"],rr=new Map;function ir(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(rr.get(t))return rr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=nr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tr.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return rr.set(t,s),s}Xn=(e=>m(m({},e),{},{get:(t,n,r)=>ir(t,n)||e.get(t,n,r),has:(t,n)=>!!ir(t,n)||e.has(t,n)}))(Xn);class sr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const or="@firebase/app",ar="0.14.5",lr=new Bn("@firebase/app"),cr="@firebase/app-compat",ur="@firebase/analytics-compat",hr="@firebase/analytics",dr="@firebase/app-check-compat",fr="@firebase/app-check",pr="@firebase/auth",mr="@firebase/auth-compat",gr="@firebase/database",yr="@firebase/data-connect",vr="@firebase/database-compat",br="@firebase/functions",wr="@firebase/functions-compat",_r="@firebase/installations",Sr="@firebase/installations-compat",Er="@firebase/messaging",Cr="@firebase/messaging-compat",xr="@firebase/performance",Tr="@firebase/performance-compat",Ar="@firebase/remote-config",kr="@firebase/remote-config-compat",Ir="@firebase/storage",Pr="@firebase/storage-compat",Rr="@firebase/firestore",Nr="@firebase/ai",Dr="@firebase/firestore-compat",Or="firebase",Mr="[DEFAULT]",Lr={[or]:"fire-core",[cr]:"fire-core-compat",[hr]:"fire-analytics",[ur]:"fire-analytics-compat",[fr]:"fire-app-check",[dr]:"fire-app-check-compat",[pr]:"fire-auth",[mr]:"fire-auth-compat",[gr]:"fire-rtdb",[yr]:"fire-data-connect",[vr]:"fire-rtdb-compat",[br]:"fire-fn",[wr]:"fire-fn-compat",[_r]:"fire-iid",[Sr]:"fire-iid-compat",[Er]:"fire-fcm",[Cr]:"fire-fcm-compat",[xr]:"fire-perf",[Tr]:"fire-perf-compat",[Ar]:"fire-rc",[kr]:"fire-rc-compat",[Ir]:"fire-gcs",[Pr]:"fire-gcs-compat",[Rr]:"fire-fst",[Dr]:"fire-fst-compat",[Nr]:"fire-vertex","fire-js":"fire-js",[Or]:"fire-js-all"},Fr=new Map,jr=new Map,Ur=new Map;function Vr(e,t){try{e.container.addComponent(t)}catch(ND){lr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),ND)}}function zr(e){const t=e.name;if(Ur.has(t))return lr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ur.set(t,e);for(const n of Fr.values())Vr(n,e);for(const n of jr.values())Vr(n,e);return!0}function Br(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Hr=new dn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Wr{constructor(e,t,n){this._isDeleted=!1,this._options=m({},e),this._config=m({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}const Gr="12.5.0";function Kr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=m({name:Mr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Hr.create("bad-app-name",{appName:String(i)});if(n||(n=Qt()),!n)throw Hr.create("no-options");const s=Fr.get(i);if(s){if(_n(n,s.options)&&_n(r,s.config))return s;throw Hr.create("duplicate-app",{appName:i})}const o=new Mn(i);for(const l of Ur.values())o.addComponent(l);const a=new Wr(n,r,o);return Fr.set(i,a),a}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr;const t=Fr.get(e);if(!t&&e===Mr&&Qt())return Kr();if(!t)throw Hr.create("no-app",{appName:e});return t}function Yr(e,t,n){var r;let i=null!==(r=Lr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void lr.warn(e.join(" "))}zr(new Nn("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Xr="firebase-heartbeat-store";let Jr=null;function Zr(){return Jr||(Jr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=$n(o);return r&&o.addEventListener("upgradeneeded",e=>{r($n(o.result),e.oldVersion,e.newVersion,$n(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Xr)}catch(ND){console.warn(ND)}}}).catch(e=>{throw Hr.create("idb-open",{originalErrorMessage:e.message})})),Jr}async function $r(e,t){try{const n=(await Zr()).transaction(Xr,"readwrite"),r=n.objectStore(Xr);await r.put(t,ei(e)),await n.done}catch(ND){if(ND instanceof hn)lr.warn(ND.message);else{const t=Hr.create("idb-set",{originalErrorMessage:null===ND||void 0===ND?void 0:ND.message});lr.warn(t.message)}}}function ei(e){return"".concat(e.name,"!").concat(e.options.appId)}class ti{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ri(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ni();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(ND){lr.warn(ND)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ni(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ii(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ii(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ut(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(ND){return lr.warn(ND),""}}}function ni(){return(new Date).toISOString().substring(0,10)}class ri{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!un()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(mv){t(mv)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Zr()).transaction(Xr),n=await t.objectStore(Xr).get(ei(e));return await t.done,n}catch(ND){if(ND instanceof hn)lr.warn(ND.message);else{const t=Hr.create("idb-get",{originalErrorMessage:null===ND||void 0===ND?void 0:ND.message});lr.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return $r(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ii(e){return Ut(JSON.stringify({version:2,heartbeats:e})).length}var si;si="",zr(new Nn("platform-logger",e=>new sr(e),"PRIVATE")),zr(new Nn("heartbeat",e=>new ti(e),"PRIVATE")),Yr(or,ar,si),Yr(or,ar,"esm2020"),Yr("fire-js","");const oi=["providerId"],ai=["uid","auth","stsTokenManager"],li=["providerId","signInMethod"];function ci(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ui=ci,hi=new dn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),di=new Bn("@firebase/auth");function fi(e){if(di.logLevel<=Fn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];di.error("Auth (".concat(Gr,"): ").concat(e),...n)}}function pi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw bi(e,...n)}function mi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bi(e,...n)}function gi(e,t,n){const r=m(m({},ui()),{},{[t]:n});return new dn("auth","Firebase",r).create(t,{appName:e.name})}function yi(e){return gi(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&pi(e,"argument-error"),gi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function bi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return hi.create(e,...n)}function wi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw bi(t,...r)}}function _i(e){const t="INTERNAL ASSERTION FAILED: "+e;throw fi(t),new Error(t)}function Si(e,t){e||_i(t)}function Ei(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ci(){return"http:"===xi()||"https:"===xi()}function xi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ti(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ci()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ai{constructor(e,t){this.shortDelay=e,this.longDelay=t,Si(t>e,"Short delay should be less than long delay!"),this.isMobile=sn()||an()}get(){return Ti()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ki(e,t){Si(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ii{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ri=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ni=new Ai(3e4,6e4);function Di(e,t){return e.tenantId&&!t.tenantId?m(m({},t),{},{tenantId:e.tenantId}):t}async function Oi(e,t,n,r){return Mi(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=En(m({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=m({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Jt(e.emulatorConfig.host)&&(l.credentials="include"),Ii.fetch()(await Fi(e,e.config.apiHost,n,o),l)})}async function Mi(e,t,n){e._canInitEmulator=!1;const r=m(m({},Pi),t);try{const t=new Ui(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Vi(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Vi(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Vi(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Vi(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw gi(e,a,o);pi(e,a)}}catch(ND){if(ND instanceof hn)throw ND;pi(e,"network-request-failed",{message:String(ND)})}}async function Li(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Oi(e,t,n,r,i);return"mfaPendingCredential"in s&&pi(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Fi(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?ki(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Ri.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function ji(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ui{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(mi(this.auth,"network-request-failed")),Ni.get())})}}function Vi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mi(e,t,r);return i.customData._tokenResponse=n,i}function zi(e){return void 0!==e&&void 0!==e.enterprise}class Bi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ji(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qi(e,t){return Oi(e,"GET","/v2/recaptchaConfig",Di(e,t))}async function Hi(e,t){return Oi(e,"POST","/v1/accounts:lookup",t)}function Wi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(ND){}}function Gi(e){return 1e3*Number(e)}function Ki(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return fi("JWT malformed, contained fewer than 3 sections"),null;try{const e=Vt(n);return e?JSON.parse(e):(fi("Failed to decode base64 JWT payload"),null)}catch(ND){return fi("Caught error parsing JWT payload as JSON",null===ND||void 0===ND?void 0:ND.toString()),null}}function Qi(e){const t=Ki(e);return wi(t,"internal-error"),wi("undefined"!==typeof t.exp,"internal-error"),wi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Yi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(ND){throw ND instanceof hn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(ND)&&e.auth.currentUser===e&&await e.auth.signOut(),ND}}class Xi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(ND){return void((null===ND||void 0===ND?void 0:ND.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ji{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wi(this.lastLoginAt),this.creationTime=Wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Yi(e,Hi(n,{idToken:r}));wi(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?$i(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ji(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function $i(e){return e.map(e=>{let{providerId:t}=e,n=u(e,oi);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class es{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wi(e.idToken,"internal-error"),wi("undefined"!==typeof e.idToken,"internal-error"),wi("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Qi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){wi(0!==e.length,"internal-error");const t=Qi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(wi(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Mi(e,{},async()=>{const n=En({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Fi(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&Jt(e.emulatorConfig.host)&&(a.credentials="include"),Ii.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new es;return n&&(wi("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(wi("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(wi("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new es,this.toJSON())}_performRefresh(){return _i("not implemented")}}function ts(e,t){wi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ns{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=u(e,ai);this.providerId="firebase",this.proactiveRefresh=new Xi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ji(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Yi(this,this.stsTokenManager.getToken(this.auth,e));return wi(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Rn(e),r=await n.getIdToken(t),i=Ki(r);wi(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wi(Gi(i.auth_time)),issuedAtTime:Wi(Gi(i.iat)),expirationTime:Wi(Gi(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Rn(e);await Zi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(wi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>m({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ns(m(m({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){wi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Zi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Yi(this,async function(e,t){return Oi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return m(m({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>m({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:_,providerData:S,stsTokenManager:E}=t;wi(b&&E,e,"internal-error");const C=es.fromJSON(this.name,E);wi("string"===typeof b,e,"internal-error"),ts(u,e.name),ts(h,e.name),wi("boolean"===typeof w,e,"internal-error"),wi("boolean"===typeof _,e,"internal-error"),ts(d,e.name),ts(f,e.name),ts(p,e.name),ts(g,e.name),ts(y,e.name),ts(v,e.name);const x=new ns({uid:b,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:C,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(x.providerData=S.map(e=>m({},e))),g&&(x._redirectEventId=g),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new es;r.updateFromServerResponse(t);const i=new ns({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Zi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];wi(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?$i(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new es;o.updateFromIdToken(n);const a=new ns({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ji(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const rs=new Map;function is(e){Si(e instanceof Function,"Expected a class definition");let t=rs.get(e);return t?(Si(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rs.set(e,t),t)}class ss{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ss.type="NONE";const os=ss;function as(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ls{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=as(this.userKey,r.apiKey,i),this.fullPersistenceKey=as("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Hi(this.auth,{idToken:e}).catch(()=>{});return t?ns._fromGetAccountInfoResponse(this.auth,t,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ls(is(os),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||is(os);const s=as(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Hi(e,{idToken:t}).catch(()=>{});if(!r)break;n=await ns._fromGetAccountInfoResponse(e,r,t)}else n=ns._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new ls(i,e,n)):new ls(i,e,n)}}function cs(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(us(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ms(t))return"Blackberry";if(gs(t))return"Webos";if(hs(t))return"Safari";if((t.includes("chrome/")||ds(t))&&!t.includes("edge/"))return"Chrome";if(ps(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return/firefox\//i.test(e)}function hs(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return/crios\//i.test(e)}function fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return/iemobile/i.test(e)}function ps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return/android/i.test(e)}function ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return/blackberry/i.test(e)}function gs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return/webos/i.test(e)}function ys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vs(){return function(){const e=rn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn();return ys(e)||ps(e)||gs(e)||ms(e)||/windows phone/i.test(e)||fs(e)}function ws(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=cs(rn());break;case"Worker":t="".concat(cs(rn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Gr,"/").concat(r)}class _s{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(ND){r(ND)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(ND){t.reverse();for(const n of t)try{n()}catch(rO){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===ND||void 0===ND?void 0:ND.message})}}}class Ss{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Es{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xs(this),this.idTokenSubscription=new xs(this),this.beforeStateQueue=new _s(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=is(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ls.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(ND){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Hi(this,{idToken:e}),n=await ns._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(ND){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(ND))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return wi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(ND){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zi(e)}catch(ND){if((null===ND||void 0===ND?void 0:ND.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(yi(this));const t=e?Rn(e):null;return t&&wi(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&wi(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Oi(e,"GET","/v2/passwordPolicy",Di(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ss(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Oi(e,"POST","/v2/accounts:revokeToken",Di(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&is(e)||this._popupRedirectResolver;wi(t,this,"argument-error"),this.redirectPersistenceManager=await ls.create(this,[is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(wi(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(di.logLevel<=Fn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];di.warn("Auth (".concat(Gr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Cs(e){return Rn(e)}class xs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new An(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return wi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ts={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function As(e){return Ts.loadJS(e)}function ks(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Is{constructor(){this.enterprise=new Ps}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ps{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Rs="NO_RECAPTCHA";class Ns{constructor(e){this.type="recaptcha-enterprise",this.auth=Cs(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;zi(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Rs)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Is).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{qi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Bi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&zi(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ts.recaptchaEnterpriseScript;0!==t.length&&(t+=i),As(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ds(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Ns(e);let o;if(i)o=Rs;else try{o=await s.verify(n)}catch(mv){o=await s.verify(n,!0)}const a=m({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Os(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ds(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ds(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await Ds(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Ds(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ds(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ms(e){const t=Cs(e),n=await qi(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Bi(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ns(t).verify()}}function Ls(e,t,n){const r=Cs(e);wi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Fs(t),{host:o,port:a}=function(e){const t=Fs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:js(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:js(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return wi(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void wi(_n(c,r.config.emulator)&&_n(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Jt(o)?(Zt("".concat(s,"//").concat(o).concat(l)),nn("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fs(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function js(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Us{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function Vs(e,t){return Oi(e,"POST","/v1/accounts:signUp",t)}async function zs(e,t){return Li(e,"POST","/v1/accounts:signInWithPassword",Di(e,t))}class Bs extends Us{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Bs(e,t,"password")}static _fromEmailAndCode(e,t){return new Bs(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Os(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",zs,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Li(e,"POST","/v1/accounts:signInWithEmailLink",Di(e,t))}(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Os(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vs,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Li(e,"POST","/v1/accounts:signInWithEmailLink",Di(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qs(e,t){return Li(e,"POST","/v1/accounts:signInWithIdp",Di(e,t))}class Hs extends Us{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=u(t,li);if(!n||!r)return null;const s=new Hs(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return qs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=En(t)}return e}}async function Ws(e,t){return Oi(e,"POST","/v1/accounts:sendVerificationCode",Di(e,t))}const Gs={USER_NOT_FOUND:"user-not-found"};class Ks extends Us{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ks({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ks({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Li(e,"POST","/v1/accounts:signInWithPhoneNumber",Di(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Li(e,"POST","/v1/accounts:signInWithPhoneNumber",Di(e,t));if(n.temporaryProof)throw Vi(e,"account-exists-with-different-credential",n);return n}(e,m({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Li(e,"POST","/v1/accounts:signInWithPhoneNumber",Di(e,m(m({},t),{},{operation:"REAUTH"})),Gs)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ks({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Qs{constructor(e){var t,n,r,i,s,o;const a=Cn(xn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);wi(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Cn(xn(e)).link,n=t?Cn(xn(t)).deep_link_id:null,r=Cn(xn(e)).deep_link_id;return(r?Cn(xn(r)).link:null)||r||n||t||e}(e);try{return new Qs(t)}catch(n){return null}}}class Ys{constructor(){this.providerId=Ys.PROVIDER_ID}static credential(e,t){return Bs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Qs.parseLink(t);return wi(n,"argument-error"),Bs._fromEmailAndCode(e,n.code,n.tenantId)}}Ys.PROVIDER_ID="password",Ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Xs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Js extends Xs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zs extends Js{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Zs.credential(t.oauthAccessToken)}catch(n){return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com",Zs.PROVIDER_ID="facebook.com";class $s extends Js{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hs._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $s.credential(n,r)}catch(i){return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com",$s.PROVIDER_ID="google.com";class eo extends Js{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return eo.credential(t.oauthAccessToken)}catch(n){return null}}}eo.GITHUB_SIGN_IN_METHOD="github.com",eo.PROVIDER_ID="github.com";class to extends Js{constructor(){super("twitter.com")}static credential(e,t){return Hs._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return to.credential(n,r)}catch(i){return null}}}to.TWITTER_SIGN_IN_METHOD="twitter.com",to.PROVIDER_ID="twitter.com";class no{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ns._fromIdTokenResponse(e,n,r),s=ro(n);return new no({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ro(n);return new no({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ro(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class io extends hn{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,io.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new io(e,t,n,r)}}function so(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw io._fromErrorAndOperation(e,n,t,r);throw n})}async function oo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Yi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return no._forOperation(e,"link",r)}async function ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(qr(r.app))return Promise.reject(yi(r));const i="reauthenticate";try{const s=await Yi(e,so(r,i,t,e),n);wi(s.idToken,r,"internal-error");const o=Ki(s.idToken);wi(o,r,"internal-error");const{sub:a}=o;return wi(e.uid===a,r,"user-mismatch"),no._forOperation(e,i,s)}catch(ND){throw(null===ND||void 0===ND?void 0:ND.code)==="auth/".concat("user-not-found")&&pi(r,"user-mismatch"),ND}}async function lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qr(e.app))return Promise.reject(yi(e));const r="signIn",i=await so(e,r,t),s=await no._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function co(e,t){return Oi(e,"POST","/v2/accounts/mfaEnrollment:start",Di(e,t))}new WeakMap;const uo="__sak";class ho{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class fo extends ho{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);vs()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fo.type="LOCAL";const po=fo;function mo(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function go(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class yo{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=go(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return mo(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=go(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=go(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=mo(n);const i=setInterval(()=>{const e=mo(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}yo.type="COOKIE";class vo extends ho{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vo.type="SESSION";const bo=vo;class wo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new wo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function _o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wo.receivers=[];class So{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=_o("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Eo(){return window}function Co(){return"undefined"!==typeof Eo().WorkerGlobalScope&&"function"===typeof Eo().importScripts}const xo="firebaseLocalStorageDb",To="firebaseLocalStorage",Ao="fbase_key";class ko{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Io(e,t){return e.transaction([To],t?"readwrite":"readonly").objectStore(To)}function Po(){const e=indexedDB.open(xo,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(To,{keyPath:Ao})}catch(ND){n(ND)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(To)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(xo);return new ko(e).toPromise()}(),t(await Po()))})})}async function Ro(e,t,n){const r=Io(e,!0).put({[Ao]:t,value:n});return new ko(r).toPromise()}function No(e,t){const n=Io(e,!0).delete(t);return new ko(n).toPromise()}class Do{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Po()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(ND){if(t++>3)throw ND;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Co()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wo._getInstance(Co()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new So(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Po();return await Ro(e,uo,"1"),await No(e,uo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ro(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Io(e,!1).get(t),r=await new ko(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>No(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Io(e,!1).getAll();return new ko(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Do.type="LOCAL";const Oo=Do;function Mo(e,t){return Oi(e,"POST","/v2/accounts/mfaSignIn:start",Di(e,t))}ks("rcb"),new Ai(3e4,6e4);const Lo="recaptcha";async function Fo(e,t,n){if(!e._getRecaptchaConfig())try{await Ms(e)}catch(mv){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){wi("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Os(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Rs){wi((null===n||void 0===n?void 0:n.type)===Lo,e,"argument-error");return co(e,await jo(e,t,n))}return co(e,t)},"PHONE_PROVIDER"),o=await s.catch(e=>Promise.reject(e));return o.phoneSessionInfo.sessionInfo}{var r;wi("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;wi(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Os(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Rs){wi((null===n||void 0===n?void 0:n.type)===Lo,e,"argument-error");return Mo(e,await jo(e,t,n))}return Mo(e,t)},"PHONE_PROVIDER"),l=await a.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Os(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Rs){wi((null===n||void 0===n?void 0:n.type)===Lo,e,"argument-error");return Ws(e,await jo(e,t,n))}return Ws(e,t)},"PHONE_PROVIDER"),s=await r.catch(e=>Promise.reject(e));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function jo(e,t,n){wi(n.type===Lo,e,"argument-error");const r=await n.verify();wi("string"===typeof r,e,"argument-error");const i=m({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Uo{constructor(e){this.providerId=Uo.PROVIDER_ID,this.auth=Cs(e)}verifyPhoneNumber(e,t){return Fo(this.auth,e,Rn(t))}static credential(e,t){return Ks._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Uo.credentialFromTaggedObject(t)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ks._fromTokenResponse(n,r):null}}function Vo(e,t){return t?is(t):(wi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Uo.PROVIDER_ID="phone",Uo.PHONE_SIGN_IN_METHOD="phone";class zo extends Us{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bo(e){return lo(e.auth,new zo(e),e.bypassAuthState)}function qo(e){const{auth:t,user:n}=e;return wi(n,t,"internal-error"),ao(n,new zo(e),e.bypassAuthState)}async function Ho(e){const{auth:t,user:n}=e;return wi(n,t,"internal-error"),oo(n,new zo(e),e.bypassAuthState)}class Wo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(ND){this.reject(ND)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(ND){this.reject(ND)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bo;case"linkViaPopup":case"linkViaRedirect":return Ho;case"reauthViaPopup":case"reauthViaRedirect":return qo;default:pi(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Go=new Ai(2e3,1e4);class Ko extends Wo{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wi(e,this.auth,"internal-error"),e}async onExecution(){Si(1===this.filter.length,"Popup operations only handle one event");const e=_o();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Go.get())};e()}}Ko.currentPopupAction=null;const Qo=new Map;class Yo extends Wo{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Qo.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Zo(t),r=Jo(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(ND){e=()=>Promise.reject(ND)}Qo.set(this.auth._key(),e)}return this.bypassAuthState||Qo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Xo(e,t){Qo.set(e._key(),t)}function Jo(e){return is(e._redirectPersistence)}function Zo(e){return as("pendingRedirect",e.config.apiKey,e.name)}async function $o(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qr(e.app))return Promise.reject(yi(e));const r=Cs(e),i=Vo(r,t),s=new Yo(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class ea{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return na(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!na(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ta(e))}saveEventToCache(e){this.cachedEventUids.add(ta(e)),this.lastProcessedEventTime=Date.now()}}function ta(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function na(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ia=/^https?/;async function sa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Oi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(oa(r))return}catch(n){}pi(e,"unauthorized-domain")}function oa(e){const t=Ei(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ia.test(n))return!1;if(ra.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const aa=new Ai(3e4,6e4);function la(){const e=Eo().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ca(e){return new Promise((t,n)=>{var r,i;function s(){la(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{la(),n(mi(e,"network-request-failed"))},timeout:aa.get()})}if(null!==(r=Eo().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Eo().gapi)||void 0===i||!i.load){const t=ks("iframefcb");return Eo()[t]=()=>{gapi.load?s():n(mi(e,"network-request-failed"))},As("".concat(Ts.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw ua=null,e})}let ua=null;const ha=new Ai(5e3,15e3),da={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pa(e){const t=e.config;wi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ki(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Gr},i=fa.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(En(r).slice(1))}async function ma(e){const t=await function(e){return ua=ua||ca(e),ua}(e),n=Eo().gapi;return wi(n,e,"internal-error"),t.open({where:document.body,url:pa(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:da,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=mi(e,"network-request-failed"),s=Eo().setTimeout(()=>{r(i)},ha.get());function o(){Eo().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const ga={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ya{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(ND){}}}function va(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=m(m({},ga),{},{width:r.toString(),height:i.toString(),top:s,left:o}),c=rn().toLowerCase();n&&(a=ds(c)?"_blank":n),us(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ys(arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ya(null);const h=window.open(t||"",a,u);wi(h,e,"popup-blocked");try{h.focus()}catch(ND){}return new ya(h)}const ba="__/auth/handler",wa="emulator/auth/handler",_a=encodeURIComponent("fac");async function Sa(e,t,n,r,i,s){wi(e.config.authDomain,e,"auth-domain-config-required"),wi(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Gr,eventId:i};if(t instanceof Xs){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",bn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Js){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(_a,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ba);return ki(t,wa)}(e),"?").concat(En(a).slice(1)).concat(c)}const Ea="webStorageSupport";const Ca=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=$o,this._overrideRedirectResult=Xo}async _openPopup(e,t,n,r){var i;Si(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return va(e,await Sa(e,t,n,Ei(),r),_o())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Eo().location.href=e}(await Sa(e,t,n,Ei(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Si(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ma(e),n=new ea(e);return t.register("authEvent",t=>{wi(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ea,{type:Ea},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Ea];void 0!==i&&t(!!i),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bs()||hs()||ys()}};var xa="@firebase/auth",Ta="1.11.1";class Aa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){wi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ka=Yt("authIdTokenMaxAge")||300;let Ia=null;var Pa,Ra;Pa={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=mi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ts=Pa,Ra="Browser",zr(new Nn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;wi(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ra,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(Ra)},c=new Es(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(is);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),zr(new Nn("auth-internal",e=>(e=>new Aa(e))(Cs(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(xa,Ta,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ra)),Yr(xa,Ta,"esm2020");Yr("firebase","12.5.0","app");var Na,Da,Oa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ma={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Da=Ma.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},Na=Ma.Integer=r}).apply("undefined"!==typeof Oa?Oa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var La,Fa,ja,Ua,Va,za,Ba,qa,Ha="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Wa={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ha&&Ha];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},_=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function E(){this.u=this.u,this.C=this.C}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},C.prototype.h=function(){this.defaultPrevented=!0};var x=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function A(e,t){C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(A,C),A.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var k="closure_listenable_"+(1e6*Math.random()|0),I=0;function P(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function R(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function N(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function F(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(R(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function j(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=j(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new P(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=X(n),e&&e[k]?e.J(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[U]=l=new L(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)x||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=X(n),e&&e[k]?e.K(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=X(n),e&&e[k]?(e=e.i,(s=String(t).toString())in e.g&&((n=j(t=e.g[s],n,r,i))>-1&&(R(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=j(t,n,r,i)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[k])F(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(F(n,e),0==n.h&&(n.src=null,t[U]=null)):R(e)}}}function G(e){return e in V?V[e]:V[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new A(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){E.call(this),this.i=new L(this),this.M=this,this.G=null}function Z(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var i=t;M(t=new C(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=$(s,r,!0,t)&&i;if(s=t.g=e,i=$(s,r,!0,t)&&i,i=$(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=$(s,r,!1,t)&&i}function $(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&F(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,E),J.prototype[k]=!0,J.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)R(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}u(ne,E);var re=[];function ie(e){N(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){C.call(this,"d")}function de(){C.call(this,"c")}u(he,C),u(de,C);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){C.call(this,fe.Ia,e)}function ye(e){const t=me();Z(t,new ge(t))}function ve(e,t){C.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();Z(t,new ve(t,e))}function we(e,t){C.call(this,fe.Ja,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Se(){this.g=!0}function Ee(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,C),fe.STAT_EVENT="statevent",u(ve,C),fe.Ja="timingevent",u(we,C),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ce,xe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ae(){}function ke(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}u(Ae,le),Ae.prototype.g=function(){return new XMLHttpRequest},Ce=new Ae;var Ne={},De={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),je(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Re,e.g=on(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Fe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Ne:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function je(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=_e(l(e.aa,e),t)}function Ve(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;$t(n),qt(n)}Xt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=_e(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&$t(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),o.L){Xe(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(Ve(a),je(a)),r.g=o}else Yt(r);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Pe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==jt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const l=jt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,i=4==jt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}Ee(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Fe(this,n),t==De){4==l&&(this.m=4,be(14),e=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}if(t==Ne){this.m=4,be(15),Ee(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ee(this.i,this.l,t,null),qe(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(a),a.P=!0,be(11))}}else Ee(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else Ee(this.i,this.l,n,null),qe(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&jt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(xl){}},Pe.prototype.cancel=function(){this.K=!0,Be(this)},Pe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}We.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $e(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof $e?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Ze))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new $e(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,dt)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$e.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(ke(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},$e.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=_t(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(_t(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(_t(e,t),d(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Et(){this.g=new ae}function Ct(e){this.i=e.Sb||null,this.h=e.ab||!1}function xt(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.B=null,kt(e)}function kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return N(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&ke(n):it(e,t,n))}function Rt(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=_t(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=ke(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+ke(n[t])),e.push(r)}}return this.i=e.join("&")},u(Ct,le),Ct.prototype.g=function(){return new xt(this.i,this.h)},u(xt,J),(e=xt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kt(this)),this.g&&(this.readyState=3,kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):kt(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Na=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Rt,J);var Nt=/^https?$/i,Dt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Mt(e),Ft(e)}function Mt(e){e.A||(e.A=!0,Z(e,"complete"),Z(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==jt(e))setTimeout(e.Ca.bind(e),0);else if(Z(e,"readystatechange"),4==jt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Ze)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Nt.test(t?t.toLowerCase():"")}n=r}if(n)Z(e,"complete"),Z(e,"success");else{e.o=6;try{var o=jt(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",Mt(e)}}finally{Ft(e)}}}function Ft(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||Z(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function jt(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new Et,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Kt(e,n),(t=new Pe(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=on(t.j,null),t.g.ea(t.A)),t.F=Date.now(),je(t)}rn(e)}function qt(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function Ht(e){qt(e),e.v&&(s.clearTimeout(e.v),e.v=null),$t(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ge(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||_(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Gt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Kt(e,r),e.u&&e.o&&Pt(r,e.u,e.o),n=new Pe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,r,t)}function Kt(e,t){e.H&&N(e.H,function(e,n){it(t,n,e)}),e.l&&N({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Ka){throw e.push(s+"type="+encodeURIComponent("_badmap")),Ka}}catch(Ka){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||_(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=_e(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Zt(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Kt(e,t),e.u&&e.o&&Pt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Me(n,e)}function $t(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){$t(e),Jt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;Z(r=me(),new we(r,n)),Wt(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=_e(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new $e(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new Se;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof $e?et(n):new $e(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new $e(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Kt(e,r),r}function on(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Rt(new Ct({ab:n})):new Rt(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){J.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dn(this)}function un(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hn(){de.call(this),this.status=1}function dn(e){this.g=e}(e=Rt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ce.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ot(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ot(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Z(this,"complete"),Z(this,"abort"),Ft(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ft(this,!0)),Rt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return jt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Pe(this,this.j,e);let s=this.o;if(this.U&&(s?(s=D(s),M(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Kt(this,n),s&&(this.R?t="headers="+ke(It(s))+"&"+t:this.u&&Pt(n,this.u,s)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?Gt(this,e):0==this.i.length||Ge(this.h)||Gt(this))},e.Da=function(){if(this.v=null,Zt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=_e(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),qt(this),Zt(this))},e.Va=function(){null!=this.C&&(this.C=null,qt(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,J),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,he),u(hn,de),u(dn,an),dn.prototype.ra=function(){Z(this.g,"a")},dn.prototype.qa=function(e){Z(this.g,new un(e))},dn.prototype.pa=function(e){Z(this.g,new hn)},dn.prototype.oa=function(){Z(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,qa=Wa.createWebChannelTransport=function(){return new ln},Ba=Wa.getStatEventTarget=function(){return me()},za=Wa.Event=fe,Va=Wa.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,Ua=Wa.ErrorCode=xe,Te.COMPLETE="complete",ja=Wa.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Fa=Wa.WebChannel=ce,Wa.FetchXmlHttpFactory=Ct,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,La=Wa.XhrIo=Rt}).apply("undefined"!==typeof Ha?Ha:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ga="@firebase/firestore",Ka="4.9.2";class Qa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qa.UNAUTHENTICATED=new Qa(null),Qa.GOOGLE_CREDENTIALS=new Qa("google-credentials-uid"),Qa.FIRST_PARTY=new Qa("first-party-uid"),Qa.MOCK_USER=new Qa("mock-user");let Ya="12.3.0";const Xa=new Bn("@firebase/firestore");function Ja(){return Xa.logLevel}function Za(e){if(Xa.logLevel<=Fn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(tl);Xa.debug("Firestore (".concat(Ya,"): ").concat(e),...i)}}function $a(e){if(Xa.logLevel<=Fn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(tl);Xa.error("Firestore (".concat(Ya,"): ").concat(e),...i)}}function el(e){if(Xa.logLevel<=Fn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(tl);Xa.warn("Firestore (".concat(Ya,"): ").concat(e),...i)}}function tl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function nl(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,rl(e,r,n)}function rl(e,t,n){let r="FIRESTORE (".concat(Ya,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw $a(r),new Error(r)}function il(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||rl(t,i,r)}function sl(e,t){return e}const ol={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class al extends hn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ll{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ul{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qa.UNAUTHENTICATED))}shutdown(){}}class hl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dl{constructor(e){this.t=e,this.currentUser=Qa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){il(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ll;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ll,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Za("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Za("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ll)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Za("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(il("string"==typeof t.accessToken,31837,{l:t}),new cl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return il(null===e||"string"==typeof e,2055,{h:e}),new Qa(e)}}class fl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Qa.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pl{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new fl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Qa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ml{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){il(void 0===this.o,3512);const n=e=>{null!=e.error&&Za("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Za("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Za("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Za("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ml(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(il("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new ml(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function yl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class vl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=yl(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function bl(e,t){return e<t?-1:e>t?1:0}function wl(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return El(n)===El(i)?bl(n,i):El(n)?1:-1}return bl(e.length,t.length)}const _l=55296,Sl=57343;function El(e){const t=e.charCodeAt(0);return t>=_l&&t<=Sl}function Cl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const xl="__name__";class Tl{constructor(e,t,n){void 0===t?t=0:t>e.length&&nl(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&nl(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Tl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Tl.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return bl(e.length,t.length)}static compareSegments(e,t){const n=Tl.isNumericId(e),r=Tl.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Tl.extractNumericId(e).compare(Tl.extractNumericId(t)):wl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Na.fromString(e.substring(4,e.length-2))}}class Al extends Tl{construct(e,t,n){return new Al(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new al(ol.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Al(e)}static emptyPath(){return new Al([])}}const kl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Il extends Tl{construct(e,t,n){return new Il(e,t,n)}static isValidIdentifier(e){return kl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Il.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===xl}static keyField(){return new Il([xl])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new al(ol.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new al(ol.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new al(ol.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new al(ol.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Il(t)}static emptyPath(){return new Il([])}}class Pl{constructor(e){this.path=e}static fromPath(e){return new Pl(Al.fromString(e))}static fromName(e){return new Pl(Al.fromString(e).popFirst(5))}static empty(){return new Pl(Al.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Al.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Al.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pl(new Al(e.slice()))}}function Rl(e,t,n){if(!n)throw new al(ol.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Nl(e){if(!Pl.isDocumentKey(e))throw new al(ol.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Dl(e){if(Pl.isDocumentKey(e))throw new al(ol.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ol(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ml(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":nl(12329,{type:typeof e})}function Ll(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new al(ol.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ml(e);throw new al(ol.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Fl(e,t){if(t<=0)throw new al(ol.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function jl(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ul(e,t){if(!Ol(e))throw new al(ol.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new al(ol.INVALID_ARGUMENT,n);return!0}const Vl=-62135596800,zl=1e6;class Bl{static now(){return Bl.fromMillis(Date.now())}static fromDate(e){return Bl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*zl);return new Bl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new al(ol.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new al(ol.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vl)throw new al(ol.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new al(ol.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zl}_compareTo(e){return this.seconds===e.seconds?bl(this.nanoseconds,e.nanoseconds):bl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ul(e,Bl._jsonSchema))return new Bl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bl._jsonSchemaVersion="firestore/timestamp/1.0",Bl._jsonSchema={type:jl("string",Bl._jsonSchemaVersion),seconds:jl("number"),nanoseconds:jl("number")};class ql{static fromTimestamp(e){return new ql(e)}static min(){return new ql(new Bl(0,0))}static max(){return new ql(new Bl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hl=-1;class Wl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Wl.UNKNOWN_ID=-1;function Gl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ql.fromTimestamp(1e9===r?new Bl(n+1,0):new Bl(n,r));return new Ql(i,Pl.empty(),t)}function Kl(e){return new Ql(e.readTime,e.key,Hl)}class Ql{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ql(ql.min(),Pl.empty(),Hl)}static max(){return new Ql(ql.max(),Pl.empty(),Hl)}}function Yl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Pl.comparator(e.documentKey,t.documentKey),0!==n?n:bl(e.largestBatchId,t.largestBatchId))}const Xl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Zl(e){if(e.code!==ol.FAILED_PRECONDITION||e.message!==Xl)throw e;Za("LocalStore","Unexpectedly lost primary lease")}class $l{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nl(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $l((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $l?t:$l.resolve(t)}catch(e){return $l.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$l.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$l.reject(t)}static resolve(e){return new $l((t,n)=>{t(e)})}static reject(e){return new $l((t,n)=>{n(e)})}static waitFor(e){return new $l((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=$l.resolve(!1);for(const n of e)t=t.next(e=>e?$l.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new $l((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new $l((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ec(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tc(e){return"IndexedDbTransactionError"===e.name}class nc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nc.ce=-1;const rc=-1;function ic(e){return null==e}function sc(e){return 0===e&&1/e==-1/0}function oc(e){return"number"==typeof e&&Number.isInteger(e)&&!sc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ac="\x01";function lc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=uc(t)),t=cc(e.get(n),t);return uc(t)}function cc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ac:n+="\x01\x11";break;default:n+=t}}return n}function uc(e){return e+ac+"\x01"}const hc="remoteDocuments",dc="owner",fc="mutationQueues",pc="mutations";const mc="documentMutations",gc="remoteDocumentsV14",yc="remoteDocumentGlobal",vc="targets",bc="targetDocuments",wc="targetGlobal",_c="collectionParents",Sc="clientMetadata",Ec="bundles",Cc="namedQueries",xc="indexConfiguration",Tc="indexState",Ac="indexEntries",kc="documentOverlays",Ic="globals",Pc=[fc,pc,mc,hc,vc,dc,wc,bc,Sc,yc,_c,Ec,Cc],Rc=[fc,pc,mc,gc,vc,dc,wc,bc,Sc,yc,_c,Ec,Cc,kc],Nc=Rc,Dc=[...Nc,xc,Tc,Ac];function Oc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Lc(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function Fc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class jc{constructor(e,t){this.comparator=e,this.root=t||Vc.EMPTY}insert(e,t){return new jc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vc.BLACK,null,null))}remove(e){return new jc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Vc.RED,this.left=null!=r?r:Vc.EMPTY,this.right=null!=i?i:Vc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Vc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nl(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nl(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw nl(27949);return e+(this.isRed()?0:1)}}Vc.EMPTY=null,Vc.RED=!0,Vc.BLACK=!1,Vc.EMPTY=new class{constructor(){this.size=0}get key(){throw nl(57766)}get value(){throw nl(16141)}get color(){throw nl(16727)}get left(){throw nl(29726)}get right(){throw nl(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Vc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zc{constructor(e){this.comparator=e,this.data=new jc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bc(this.data.getIterator())}getIteratorFrom(e){return new Bc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof zc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zc(this.comparator);return t.data=e,t}}class Bc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qc{constructor(e){this.fields=e,e.sort(Il.comparator)}static empty(){return new qc([])}unionWith(e){let t=new zc(Il.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new qc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Hc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Hc("Invalid base64 string: "+e):e}}(e);return new Wc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Wc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wc.EMPTY_BYTE_STRING=new Wc("");const Gc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kc(e){if(il(!!e,39018),"string"==typeof e){let t=0;const n=Gc.exec(e);if(il(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Qc(e.seconds),nanos:Qc(e.nanos)}}function Qc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yc(e){return"string"==typeof e?Wc.fromBase64String(e):Wc.fromUint8Array(e)}const Xc="server_timestamp",Jc="__type__",Zc="__previous_value__",$c="__local_write_time__";function eu(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Jc])||void 0===t?void 0:t.stringValue)===Xc}function tu(e){const t=e.mapValue.fields[Zc];return eu(t)?tu(t):t}function nu(e){const t=Kc(e.mapValue.fields[$c].timestampValue);return new Bl(t.seconds,t.nanos)}class ru{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const iu="(default)";class su{constructor(e,t){this.projectId=e,this.database=t||iu}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===iu}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}const ou="__type__",au="__max__",lu={mapValue:{fields:{__type__:{stringValue:au}}}},cu="__vector__",uu="value";function hu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?eu(e)?4:ku(e)?9007199254740991:Tu(e)?10:11:nl(28295,{value:e})}function du(e,t){if(e===t)return!0;const n=hu(e);if(n!==hu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nu(e).isEqual(nu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Kc(e.timestampValue),r=Kc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Yc(e.bytesValue).isEqual(Yc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Qc(e.geoPointValue.latitude)===Qc(t.geoPointValue.latitude)&&Qc(e.geoPointValue.longitude)===Qc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Qc(e.integerValue)===Qc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Qc(e.doubleValue),r=Qc(t.doubleValue);return n===r?sc(n)===sc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Cl(e.arrayValue.values||[],t.arrayValue.values||[],du);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Oc(n)!==Oc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!du(n[i],r[i])))return!1;return!0}(e,t);default:return nl(52216,{left:e})}}function fu(e,t){return void 0!==(e.values||[]).find(e=>du(e,t))}function pu(e,t){if(e===t)return 0;const n=hu(e),r=hu(t);if(n!==r)return bl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Qc(e.integerValue||e.doubleValue),r=Qc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return mu(e.timestampValue,t.timestampValue);case 4:return mu(nu(e),nu(t));case 5:return wl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Yc(e),r=Yc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=bl(n[i],r[i]);if(0!==e)return e}return bl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=bl(Qc(e.latitude),Qc(t.latitude));return 0!==n?n:bl(Qc(e.longitude),Qc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return gu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[uu])||void 0===n?void 0:n.arrayValue,c=null===(r=a[uu])||void 0===r?void 0:r.arrayValue,u=bl((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:gu(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===lu.mapValue&&t===lu.mapValue)return 0;if(e===lu.mapValue)return 1;if(t===lu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=wl(r[o],s[o]);if(0!==e)return e;const t=pu(n[r[o]],i[s[o]]);if(0!==t)return t}return bl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw nl(23264,{he:n})}}function mu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bl(e,t);const n=Kc(e),r=Kc(t),i=bl(n.seconds,r.seconds);return 0!==i?i:bl(n.nanos,r.nanos)}function gu(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=pu(n[i],r[i]);if(e)return e}return bl(n.length,r.length)}function yu(e){return vu(e)}function vu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Kc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Yc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Pl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=vu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(vu(e.fields[i]));return n+"}"}(e.mapValue):nl(61005,{value:e})}function bu(e){switch(hu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=tu(e);return t?16+bu(t):16;case 5:return 2*e.stringValue.length;case 6:return Yc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+bu(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Mc(e.fields,(e,n)=>{t+=e.length+bu(n)}),t}(e.mapValue);default:throw nl(13486,{value:e})}}function wu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function _u(e){return!!e&&"integerValue"in e}function Su(e){return!!e&&"arrayValue"in e}function Eu(e){return!!e&&"nullValue"in e}function Cu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xu(e){return!!e&&"mapValue"in e}function Tu(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ou])||void 0===t?void 0:t.stringValue)===cu}function Au(e){if(e.geoPointValue)return{geoPointValue:m({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:m({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Mc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Au(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Au(e.arrayValue.values[n]);return t}return m({},e)}function ku(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===au}class Iu{constructor(e){this.value=e}static empty(){return new Iu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!xu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=Il.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Au(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());xu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];xu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Mc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Iu(Au(this.value))}}function Pu(e){const t=[];return Mc(e.fields,(e,n)=>{const r=new Il([e]);if(xu(n)){const e=Pu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new qc(t)}class Ru{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ru(e,0,ql.min(),ql.min(),ql.min(),Iu.empty(),0)}static newFoundDocument(e,t,n,r){return new Ru(e,1,t,ql.min(),n,r,0)}static newNoDocument(e,t){return new Ru(e,2,t,ql.min(),ql.min(),Iu.empty(),0)}static newUnknownDocument(e,t){return new Ru(e,3,t,ql.min(),ql.min(),Iu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ql.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Iu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Iu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ql.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ru&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ru(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Nu{constructor(e,t){this.position=e,this.inclusive=t}}function Du(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Pl.comparator(Pl.fromName(o.referenceValue),n.key):pu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ou(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!du(e.position[n],t.position[n]))return!1;return!0}class Mu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Lu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Fu{}class ju extends Fu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Gu(e,t,n):"array-contains"===t?new Xu(e,n):"in"===t?new Ju(e,n):"not-in"===t?new Zu(e,n):"array-contains-any"===t?new $u(e,n):new ju(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ku(e,n):new Qu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(pu(t,this.value)):null!==t&&hu(this.value)===hu(t)&&this.matchesComparison(pu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nl(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Uu extends Fu{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Uu(e,t)}matches(e){return Vu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vu(e){return"and"===e.op}function zu(e){return Bu(e)&&Vu(e)}function Bu(e){for(const t of e.filters)if(t instanceof Uu)return!1;return!0}function qu(e){if(e instanceof ju)return e.field.canonicalString()+e.op.toString()+yu(e.value);if(zu(e))return e.filters.map(e=>qu(e)).join(",");{const t=e.filters.map(e=>qu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Hu(e,t){return e instanceof ju?function(e,t){return t instanceof ju&&e.op===t.op&&e.field.isEqual(t.field)&&du(e.value,t.value)}(e,t):e instanceof Uu?function(e,t){return t instanceof Uu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Hu(n,t.filters[r]),!0)}(e,t):void nl(19439)}function Wu(e){return e instanceof ju?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(yu(e.value))}(e):e instanceof Uu?function(e){return e.op.toString()+" {"+e.getFilters().map(Wu).join(" ,")+"}"}(e):"Filter"}class Gu extends ju{constructor(e,t,n){super(e,t,n),this.key=Pl.fromName(n.referenceValue)}matches(e){const t=Pl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ku extends ju{constructor(e,t){super(e,"in",t),this.keys=Yu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qu extends ju{constructor(e,t){super(e,"not-in",t),this.keys=Yu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Pl.fromName(e.referenceValue))}class Xu extends ju{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Su(t)&&fu(t.arrayValue,this.value)}}class Ju extends ju{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fu(this.value.arrayValue,t)}}class Zu extends ju{constructor(e,t){super(e,"not-in",t)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!fu(this.value.arrayValue,t)}}class $u extends ju{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Su(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>fu(this.value.arrayValue,e))}}class eh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function th(e){return new eh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function nh(e){const t=sl(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>qu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ic(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>yu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>yu(e)).join(",")),t.Te=e}return t.Te}function rh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Lu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Hu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ou(e.startAt,t.startAt)&&Ou(e.endAt,t.endAt)}function ih(e){return Pl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class sh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oh(e,t,n,r,i,s,o,a){return new sh(e,t,n,r,i,s,o,a)}function ah(e){return new sh(e)}function lh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ch(e){return null!==e.collectionGroup}function uh(e){const t=sl(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new zc(Il.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Mu(r,n))}),e.has(Il.keyField().canonicalString())||t.Ie.push(new Mu(Il.keyField(),n))}return t.Ie}function hh(e){const t=sl(e);return t.Ee||(t.Ee=fh(t,uh(e))),t.Ee}function dh(e){const t=sl(e);return t.de||(t.de=fh(t,e.explicitOrderBy)),t.de}function fh(e,t){if("F"===e.limitType)return th(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Mu(e.field,t)});const n=e.endAt?new Nu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nu(e.startAt.position,e.startAt.inclusive):null;return th(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ph(e,t){const n=e.filters.concat([t]);return new sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function mh(e,t,n){return new sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gh(e,t){return rh(hh(e),hh(t))&&e.limitType===t.limitType}function yh(e){return"".concat(nh(hh(e)),"|lt:").concat(e.limitType)}function vh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Wu(e)).join(", "),"]")),ic(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>yu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>yu(e)).join(",")),"Target(".concat(t,")")}(hh(e)),"; limitType=").concat(e.limitType,")")}function bh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Pl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of uh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Du(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,uh(e),t))&&!(e.endAt&&!function(e,t,n){const r=Du(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,uh(e),t))}(e,t)}function wh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _h(e){return(t,n)=>{let r=!1;for(const i of uh(e)){const e=Sh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Sh(e,t,n){const r=e.field.isKeyField()?Pl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?pu(r,i):nl(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return nl(19790,{direction:e.dir})}}class Eh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Mc(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Fc(this.inner)}size(){return this.innerSize}}const Ch=new jc(Pl.comparator);function xh(){return Ch}const Th=new jc(Pl.comparator);function Ah(){let e=Th;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function kh(e){let t=Th;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ih(){return Rh()}function Ph(){return Rh()}function Rh(){return new Eh(e=>e.toString(),(e,t)=>e.isEqual(t))}const Nh=new jc(Pl.comparator),Dh=new zc(Pl.comparator);function Oh(){let e=Dh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Mh=new zc(bl);function Lh(){return Mh}function Fh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sc(t)?"-0":t}}function jh(e){return{integerValue:""+e}}function Uh(e,t){return oc(t)?jh(t):Fh(e,t)}class Vh{constructor(){this._=void 0}}function zh(e,t,n){return e instanceof Hh?function(e,t){const n={fields:{[Jc]:{stringValue:Xc},[$c]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&eu(t)&&(t=tu(t)),t&&(n.fields[Zc]=t),{mapValue:n}}(n,t):e instanceof Wh?Gh(e,t):e instanceof Kh?Qh(e,t):function(e,t){const n=qh(e,t),r=Xh(n)+Xh(e.Ae);return _u(n)&&_u(e.Ae)?jh(r):Fh(e.serializer,r)}(e,t)}function Bh(e,t,n){return e instanceof Wh?Gh(e,t):e instanceof Kh?Qh(e,t):n}function qh(e,t){return e instanceof Yh?function(e){return _u(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Hh extends Vh{}class Wh extends Vh{constructor(e){super(),this.elements=e}}function Gh(e,t){const n=Jh(t);for(const r of e.elements)n.some(e=>du(e,r))||n.push(r);return{arrayValue:{values:n}}}class Kh extends Vh{constructor(e){super(),this.elements=e}}function Qh(e,t){let n=Jh(t);for(const r of e.elements)n=n.filter(e=>!du(e,r));return{arrayValue:{values:n}}}class Yh extends Vh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Xh(e){return Qc(e.integerValue||e.doubleValue)}function Jh(e){return Su(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Zh{constructor(e,t){this.field=e,this.transform=t}}class $h{constructor(e,t){this.version=e,this.transformResults=t}}class ed{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ed}static exists(e){return new ed(void 0,e)}static updateTime(e){return new ed(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class nd{}function rd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new fd(e.key,ed.none()):new ld(e.key,e.data,ed.none());{const n=e.data,r=Iu.empty();let i=new zc(Il.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new cd(e.key,r,new qc(i.toArray()),ed.none())}}function id(e,t,n){e instanceof ld?function(e,t,n){const r=e.value.clone(),i=hd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cd?function(e,t,n){if(!td(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=hd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ud(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sd(e,t,n,r){return e instanceof ld?function(e,t,n,r){if(!td(e.precondition,t))return n;const i=e.value.clone(),s=dd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cd?function(e,t,n,r){if(!td(e.precondition,t))return n;const i=dd(e.fieldTransforms,r,t),s=t.data;return s.setAll(ud(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return td(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function od(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=qh(r.transform,e||null);null!=i&&(null===n&&(n=Iu.empty()),n.set(r.field,i))}return n||null}function ad(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Cl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wh&&t instanceof Wh||e instanceof Kh&&t instanceof Kh?Cl(e.elements,t.elements,du):e instanceof Yh&&t instanceof Yh?du(e.Ae,t.Ae):e instanceof Hh&&t instanceof Hh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ld extends nd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cd extends nd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ud(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function hd(e,t,n){const r=new Map;il(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Bh(o,a,n[i]))}return r}function dd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,zh(e,s,t))}return r}class fd extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pd extends nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class md{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&id(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=sd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=sd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ph();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=rd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ql.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oh())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,(e,t)=>ad(e,t))&&Cl(this.baseMutations,e.baseMutations,(e,t)=>ad(e,t))}}class gd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){il(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Nh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new gd(e,t,n,r)}}class yd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class vd{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class bd{constructor(e,t){this.count=e,this.unchangedNames=t}}var wd,_d;function Sd(e){switch(e){case ol.OK:return nl(64938);case ol.CANCELLED:case ol.UNKNOWN:case ol.DEADLINE_EXCEEDED:case ol.RESOURCE_EXHAUSTED:case ol.INTERNAL:case ol.UNAVAILABLE:case ol.UNAUTHENTICATED:return!1;case ol.INVALID_ARGUMENT:case ol.NOT_FOUND:case ol.ALREADY_EXISTS:case ol.PERMISSION_DENIED:case ol.FAILED_PRECONDITION:case ol.ABORTED:case ol.OUT_OF_RANGE:case ol.UNIMPLEMENTED:case ol.DATA_LOSS:return!0;default:return nl(15467,{code:e})}}function Ed(e){if(void 0===e)return $a("GRPC error has no .code"),ol.UNKNOWN;switch(e){case wd.OK:return ol.OK;case wd.CANCELLED:return ol.CANCELLED;case wd.UNKNOWN:return ol.UNKNOWN;case wd.DEADLINE_EXCEEDED:return ol.DEADLINE_EXCEEDED;case wd.RESOURCE_EXHAUSTED:return ol.RESOURCE_EXHAUSTED;case wd.INTERNAL:return ol.INTERNAL;case wd.UNAVAILABLE:return ol.UNAVAILABLE;case wd.UNAUTHENTICATED:return ol.UNAUTHENTICATED;case wd.INVALID_ARGUMENT:return ol.INVALID_ARGUMENT;case wd.NOT_FOUND:return ol.NOT_FOUND;case wd.ALREADY_EXISTS:return ol.ALREADY_EXISTS;case wd.PERMISSION_DENIED:return ol.PERMISSION_DENIED;case wd.FAILED_PRECONDITION:return ol.FAILED_PRECONDITION;case wd.ABORTED:return ol.ABORTED;case wd.OUT_OF_RANGE:return ol.OUT_OF_RANGE;case wd.UNIMPLEMENTED:return ol.UNIMPLEMENTED;case wd.DATA_LOSS:return ol.DATA_LOSS;default:return nl(39323,{code:e})}}(_d=wd||(wd={}))[_d.OK=0]="OK",_d[_d.CANCELLED=1]="CANCELLED",_d[_d.UNKNOWN=2]="UNKNOWN",_d[_d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_d[_d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_d[_d.NOT_FOUND=5]="NOT_FOUND",_d[_d.ALREADY_EXISTS=6]="ALREADY_EXISTS",_d[_d.PERMISSION_DENIED=7]="PERMISSION_DENIED",_d[_d.UNAUTHENTICATED=16]="UNAUTHENTICATED",_d[_d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_d[_d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_d[_d.ABORTED=10]="ABORTED",_d[_d.OUT_OF_RANGE=11]="OUT_OF_RANGE",_d[_d.UNIMPLEMENTED=12]="UNIMPLEMENTED",_d[_d.INTERNAL=13]="INTERNAL",_d[_d.UNAVAILABLE=14]="UNAVAILABLE",_d[_d.DATA_LOSS=15]="DATA_LOSS";let Cd=null;function xd(){return new TextEncoder}const Td=new Na([4294967295,4294967295],0);function Ad(e){const t=xd().encode(e),n=new Da;return n.update(t),new Uint8Array(n.digest())}function kd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Na([n,r],0),new Na([i,s],0)]}class Id{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Pd("Invalid padding: ".concat(t));if(n<0)throw new Pd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Pd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Pd("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Na.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Na.fromNumber(n)));return 1===r.compare(Td)&&(r=new Na([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Ad(e),[n,r]=kd(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Id(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Ad(e),[n,r]=kd(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Pd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Nd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Rd(ql.min(),r,new jc(bl),xh(),Oh())}}class Nd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Nd(n,t,Oh(),Oh(),Oh())}}class Dd{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Od{constructor(e,t){this.targetId=e,this.Ce=t}}class Md{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ld{constructor(){this.ve=0,this.Fe=Ud(),this.Me=Wc.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oh(),t=Oh(),n=Oh();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:nl(38017,{changeType:i})}}),new Nd(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Ud()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,il(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Fd{constructor(e){this.Ge=e,this.ze=new Map,this.je=xh(),this.Je=jd(),this.He=jd(),this.Ye=new jc(bl)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:nl(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(ih(s))if(0===n){const e=new Pl(s.path);this.et(t,e,Ru.newNoDocument(e,ql.min()))}else il(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Cd)||void 0===i||i.lt(function(e,t,n,r,i){var s,o,a,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Yc(n).toUint8Array()}catch(e){if(e instanceof Hc)return el("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Id(s,r,i)}catch(e){return el(e instanceof Pd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&ih(i.target)){const t=new Pl(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ru.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Oh();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Rd(e,t,this.Ye,this.je,n);return this.je=xh(),this.Je=jd(),this.He=jd(),this.Ye=new jc(bl),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ld,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new zc(bl),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new zc(bl),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Za("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ld),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function jd(){return new jc(Pl.comparator)}function Ud(){return new jc(Pl.comparator)}const Vd={asc:"ASCENDING",desc:"DESCENDING"},zd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bd={and:"AND",or:"OR"};class qd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hd(e,t){return e.useProto3Json||ic(t)?t:{value:t}}function Wd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Kd(e,t){return Wd(e,t.toTimestamp())}function Qd(e){return il(!!e,49232),ql.fromTimestamp(function(e){const t=Kc(e);return new Bl(t.seconds,t.nanos)}(e))}function Yd(e,t){return Xd(e,t).canonicalString()}function Xd(e,t){const n=function(e){return new Al(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Jd(e){const t=Al.fromString(e);return il(bf(t),10190,{key:t.toString()}),t}function Zd(e,t){return Yd(e.databaseId,t.path)}function $d(e,t){const n=Jd(t);if(n.get(1)!==e.databaseId.projectId)throw new al(ol.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new al(ol.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Pl(rf(n))}function ef(e,t){return Yd(e.databaseId,t)}function tf(e){const t=Jd(e);return 4===t.length?Al.emptyPath():rf(t)}function nf(e){return new Al(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rf(e){return il(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function sf(e,t,n){return{name:Zd(e,t),fields:n.value.mapValue.fields}}function of(e,t){let n;if(t instanceof ld)n={update:sf(e,t.key,t.value)};else if(t instanceof fd)n={delete:Zd(e,t.key)};else if(t instanceof cd)n={update:sf(e,t.key,t.data),updateMask:vf(t.fieldMask)};else{if(!(t instanceof pd))return nl(16599,{Vt:t.type});n={verify:Zd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Hh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yh)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw nl(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Kd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:nl(27497)}(e,t.precondition)),n}function af(e,t){return{documents:[ef(e,t.path)]}}function lf(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ef(e,i);const s=function(e){if(0!==e.length)return yf(Uu.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:mf(e.field),direction:df(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function cf(e,t,n,r){const{ft:i,parent:s}=lf(e,t),o={},a=[];let l=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+l++;o[t]=e.alias,"count"===e.aggregateType?a.push({alias:t,count:{}}):"avg"===e.aggregateType?a.push({alias:t,avg:{field:mf(e.fieldPath)}}):"sum"===e.aggregateType&&a.push({alias:t,sum:{field:mf(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function uf(e){let t=tf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){il(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=hf(e);return t instanceof Uu&&zu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Mu(gf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ic(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Nu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Nu(n,t)}(n.endAt)),oh(t,i,o,s,a,"F",l,c)}function hf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=gf(e.unaryFilter.field);return ju.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=gf(e.unaryFilter.field);return ju.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gf(e.unaryFilter.field);return ju.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=gf(e.unaryFilter.field);return ju.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nl(61313);default:return nl(60726)}}(e):void 0!==e.fieldFilter?function(e){return ju.create(gf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nl(58110);default:return nl(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Uu.create(e.compositeFilter.filters.map(e=>hf(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nl(1026)}}(e.compositeFilter.op))}(e):nl(30097,{filter:e})}function df(e){return Vd[e]}function ff(e){return zd[e]}function pf(e){return Bd[e]}function mf(e){return{fieldPath:e.canonicalString()}}function gf(e){return Il.fromServerFormat(e.fieldPath)}function yf(e){return e instanceof ju?function(e){if("=="===e.op){if(Cu(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NAN"}};if(Eu(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cu(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NOT_NAN"}};if(Eu(e.value))return{unaryFilter:{field:mf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mf(e.field),op:ff(e.op),value:e.value}}}(e):e instanceof Uu?function(e){const t=e.getFilters().map(e=>yf(e));return 1===t.length?t[0]:{compositeFilter:{op:pf(e.op),filters:t}}}(e):nl(54877,{filter:e})}function vf(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function bf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class wf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ql.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ql.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wc.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new wf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _f{constructor(e){this.yt=e}}function Sf(e){const t=uf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?mh(t,t.limit,"L"):t}class Ef{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Qc(e.integerValue));else if("doubleValue"in e){const n=Qc(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),sc(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Kc(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Yc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?ku(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Tu(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):nl(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=uu,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Qc(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Pl.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ef.Kt=new Ef;class Cf{constructor(){this.Cn=new xf}addToCollectionParentIndex(e,t){return this.Cn.add(t),$l.resolve()}getCollectionParents(e,t){return $l.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $l.resolve()}deleteFieldIndex(e,t){return $l.resolve()}deleteAllFieldIndexes(e){return $l.resolve()}createTargetIndexes(e,t){return $l.resolve()}getDocumentsMatchingTarget(e,t){return $l.resolve(null)}getIndexType(e,t){return $l.resolve(0)}getFieldIndexes(e,t){return $l.resolve([])}getNextCollectionGroupToUpdate(e){return $l.resolve(null)}getMinOffset(e,t){return $l.resolve(Ql.min())}getMinOffsetFromCollectionGroup(e,t){return $l.resolve(Ql.min())}updateCollectionGroup(e,t,n){return $l.resolve()}updateIndexEntries(e,t){return $l.resolve()}}class xf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zc(Al.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new zc(Al.comparator)).toArray()}}new Uint8Array(0);const Tf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Af=41943040;class kf{static withCacheSize(e){return new kf(e,kf.DEFAULT_COLLECTION_PERCENTILE,kf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}kf.DEFAULT_COLLECTION_PERCENTILE=10,kf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kf.DEFAULT=new kf(Af,kf.DEFAULT_COLLECTION_PERCENTILE,kf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kf.DISABLED=new kf(-1,0,0);class If{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new If(0)}static cr(){return new If(-1)}}const Pf="LruGarbageCollector",Rf=1048576;function Nf(e,t){let[n,r]=e,[i,s]=t;const o=bl(n,i);return 0===o?bl(r,s):o}class Df{constructor(e){this.Ir=e,this.buffer=new zc(Nf),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Nf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Of{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Za(Pf,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){tc(e)?Za(Pf,"Ignoring IndexedDB error during garbage collection: ",e):await Zl(e)}await this.Vr(3e5)})}}class Mf{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return $l.resolve(nc.ce);const n=new Df(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Za("LruGarbageCollector","Garbage collection skipped; disabled"),$l.resolve(Tf)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Za("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Tf):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Za("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ja()<=Fn.DEBUG&&Za("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),$l.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Lf(e,t){return new Mf(e,t)}class Ff{constructor(){this.changes=new Eh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ru.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?$l.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Uf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&sd(n.mutation,e,qc.empty(),Bl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Oh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oh();const r=Ih();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ah();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ih();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Oh()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=xh();const s=Rh(),o=Rh();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof cd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),sd(o.mutation,t,o.mutation.getFieldMask(),Bl.now())):s.set(t.key,qc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new jf(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Rh();let r=new jc((e,t)=>e-t),i=Oh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||qc.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Oh()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Ph();l.forEach(e=>{if(!i.has(e)){const r=rd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return $l.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Pl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ch(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):$l.resolve(Ih());let o=Hl,a=i;return s.next(t=>$l.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?$l.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Oh())).next(e=>({batchId:o,changes:kh(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pl(t)).next(e=>{let t=Ah();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ah();return this.indexManager.getCollectionParents(e,i).next(o=>$l.forEach(o,o=>{const a=function(e,t){return new sh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ru.newInvalidDocument(r)))});let n=Ah();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&sd(s.mutation,r,qc.empty(),Bl.now()),bh(t,r)&&(n=n.insert(e,r))}),n})}}class Vf{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $l.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Qd(e.createTime)}}(t)),$l.resolve()}getNamedQuery(e,t){return $l.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Sf(e.bundledQuery),readTime:Qd(e.readTime)}}(t)),$l.resolve()}}class zf{constructor(){this.overlays=new jc(Pl.comparator),this.qr=new Map}getOverlay(e,t){return $l.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ih();return $l.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),$l.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),$l.resolve()}getOverlaysForCollection(e,t,n){const r=Ih(),i=t.length+1,s=new Pl(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return $l.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new jc((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ih(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ih(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return $l.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new yd(t,n));let i=this.qr.get(t);void 0===i&&(i=Oh(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Bf{constructor(){this.sessionToken=Wc.EMPTY_BYTE_STRING}getSessionToken(e){return $l.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$l.resolve()}}class qf{constructor(){this.Qr=new zc(Hf.$r),this.Ur=new zc(Hf.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Hf(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Hf(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Pl(new Al([])),n=new Hf(t,e),r=new Hf(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Pl(new Al([])),n=new Hf(t,e),r=new Hf(t,e+1);let i=Oh();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Hf(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Hf{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Pl.comparator(e.key,t.key)||bl(e.Yr,t.Yr)}static Kr(e,t){return bl(e.Yr,t.Yr)||Pl.comparator(e.key,t.key)}}class Wf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new zc(Hf.$r)}checkEmpty(e){return $l.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new md(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Hf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return $l.resolve(s)}lookupMutationBatch(e,t){return $l.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return $l.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $l.resolve(0===this.mutationQueue.length?rc:this.tr-1)}getAllMutationBatches(e){return $l.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Hf(t,0),r=new Hf(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),$l.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new zc(bl);return t.forEach(e=>{const t=new Hf(e,0),r=new Hf(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),$l.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Pl.isDocumentKey(i)||(i=i.child(""));const s=new Hf(new Pl(i),0);let o=new zc(bl);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),$l.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){il(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return $l.forEach(t.mutations,r=>{const i=new Hf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Hf(t,0),r=this.Zr.firstAfterOrEqual(n);return $l.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,$l.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Gf{constructor(e){this.ri=e,this.docs=new jc(Pl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return $l.resolve(n?n.document.mutableCopy():Ru.newInvalidDocument(t))}getEntries(e,t){let n=xh();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ru.newInvalidDocument(e))}),$l.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=xh();const s=t.path,o=new Pl(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Yl(Kl(o),n)<=0||(r.has(o.key)||bh(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return $l.resolve(i)}getAllFromCollectionGroup(e,t,n,r){nl(9500)}ii(e,t){return $l.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Kf(this)}getSize(e){return $l.resolve(this.size)}}class Kf extends Ff{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),$l.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Qf{constructor(e){this.persistence=e,this.si=new Eh(e=>nh(e),rh),this.lastRemoteSnapshotVersion=ql.min(),this.highestTargetId=0,this.oi=0,this._i=new qf,this.targetCount=0,this.ai=If.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),$l.resolve()}getLastRemoteSnapshotVersion(e){return $l.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $l.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$l.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),$l.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new If(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$l.resolve()}updateTargetData(e,t){return this.Pr(t),$l.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$l.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),$l.waitFor(i).next(()=>r)}getTargetCount(e){return $l.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return $l.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),$l.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),$l.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$l.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return $l.resolve(n)}containsKey(e,t){return $l.resolve(this._i.containsKey(t))}}class Yf{constructor(e,t){this.ui={},this.overlays={},this.ci=new nc(0),this.li=!1,this.li=!0,this.hi=new Bf,this.referenceDelegate=e(this),this.Pi=new Qf(this),this.indexManager=new Cf,this.remoteDocumentCache=function(e){return new Gf(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new _f(t),this.Ii=new Vf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Wf(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Za("MemoryPersistence","Starting transaction:",e);const r=new Xf(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return $l.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Xf extends Jl{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.Ri=new qf,this.Vi=null}static mi(e){return new Jf(e)}get fi(){if(this.Vi)return this.Vi;throw nl(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),$l.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),$l.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$l.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $l.forEach(this.fi,n=>{const r=Pl.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ql.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return $l.or([()=>$l.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Zf{constructor(e,t){this.persistence=e,this.pi=new Eh(e=>lc(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Lf(this,t)}static mi(e,t){return new Zf(e,t)}Ei(){}di(e){return $l.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return $l.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?$l.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ql.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$l.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),$l.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),$l.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$l.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bu(e.data.value)),t}br(e,t,n){return $l.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return $l.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class $f{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Oh(),r=Oh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $f(e,t.fromCache,n,r)}}class ep{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tp{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=cn()?8:ec(rn())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new ep;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ja()<=Fn.DEBUG&&Za("QueryEngine","SDK will not create cache indexes for query:",vh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$l.resolve()):(Ja()<=Fn.DEBUG&&Za("QueryEngine","Query:",vh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ja()<=Fn.DEBUG&&Za("QueryEngine","The SDK decides to create cache indexes for query:",vh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hh(t))):$l.resolve())}ys(e,t){if(lh(t))return $l.resolve(null);let n=hh(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=mh(t,null,"F"),n=hh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Oh(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,mh(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return lh(t)||r.isEqual(ql.min())?$l.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?$l.resolve(null):(Ja()<=Fn.DEBUG&&Za("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vh(t)),this.vs(e,s,t,Gl(r,Hl)).next(e=>e))})}Ds(e,t){let n=new zc(_h(e));return t.forEach((t,r)=>{bh(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Ja()<=Fn.DEBUG&&Za("QueryEngine","Using full collection scan to execute query:",vh(t)),this.ps.getDocumentsMatchingQuery(e,t,Ql.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const np="LocalStore";class rp{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new jc(bl),this.xs=new Eh(e=>nh(e),rh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uf(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function ip(e,t,n,r){return new rp(e,t,n,r)}async function sp(e,t){const n=sl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Oh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function op(e){const t=sl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function ap(e,t,n){let r=Oh(),i=Oh();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=xh();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ql.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Za(np,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function lp(e,t){const n=sl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=rc),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function cp(e,t){const n=sl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,$l.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new wf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function up(e,t,n){const r=sl(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!tc(e))throw e;Za(np,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function hp(e,t,n){const r=sl(e);let i=ql.min(),s=Oh();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=sl(e),i=r.xs.get(n);return void 0!==i?$l.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,hh(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ql.min(),n?s:Oh())).next(e=>(dp(r,wh(t),e),{documents:e,Qs:s})))}function dp(e,t,n){let r=e.Os.get(t)||ql.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class fp{constructor(){this.activeTargetIds=Lh()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pp{constructor(){this.Mo=new fp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mp{Oo(e){}shutdown(){}}const gp="ConnectivityMonitor";class yp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Za(gp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Za(gp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vp=null;function bp(){return null===vp?vp=268435456+Math.round(2147483648*Math.random()):vp++,"0x"+vp.toString(16)}const wp="RestConnection",_p={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sp{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===iu?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=bp(),o=this.zo(e,t.toUriEncodedString());Za(wp,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=Jt(l);return this.Jo(e,o,a,n,c).then(t=>(Za(wp,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw el(wp,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ya,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=_p[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Ep{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Cp="WebChannelConnection";class xp extends Sp{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=bp();return new Promise((i,o)=>{const a=new La;a.setWithCredentials(!0),a.listenOnce(ja.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ua.NO_ERROR:const n=a.getResponseJson();Za(Cp,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Ua.TIMEOUT:Za(Cp,"RPC '".concat(e,"' ").concat(s," timed out")),o(new al(ol.DEADLINE_EXCEEDED,"Request time out"));break;case Ua.HTTP_ERROR:const r=a.getStatus();if(Za(Cp,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ol).indexOf(t)>=0?t:ol.UNKNOWN}(n.status);o(new al(e,n.message))}else o(new al(ol.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new al(ol.UNAVAILABLE,"Connection failed."));break;default:nl(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Za(Cp,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Za(Cp,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=bp(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qa(),o=Ba(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Za(Cp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new Ep({Yo:t=>{d?Za(Cp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Za(Cp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Za(Cp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Fa.EventType.OPEN,()=>{d||(Za(Cp,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Fa.EventType.CLOSE,()=>{d||(d=!0,Za(Cp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Fa.EventType.ERROR,t=>{d||(d=!0,el(Cp,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new al(ol.UNAVAILABLE,"The operation could not be completed")))}),p(u,Fa.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];il(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Za(Cp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=wd[e];if(void 0!==t)return Ed(t)}(t),i=o.message;void 0===n&&(n=ol.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.a_(new al(n,i)),u.close()}else Za(Cp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,za.STAT_EVENT,t=>{t.stat===Va.PROXY?Za(Cp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Va.NOPROXY&&Za(Cp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Tp(){return"undefined"!=typeof document?document:null}function Ap(e){return new qd(e,!0)}class kp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Za("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ip="PersistentStream";class Pp{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kp(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===ol.RESOURCE_EXHAUSTED?($a(t.toString()),$a("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ol.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new al(ol.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Za(Ip,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Za(Ip,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rp extends Pp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:nl(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(il(void 0===t||"string"==typeof t,58123),Wc.fromBase64String(t||"")):(il(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Wc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ol.UNKNOWN:Ed(e.code);return new al(t,e.message||"")}(o);n=new Md(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=$d(e,r.document.name),s=Qd(r.document.updateTime),o=r.document.createTime?Qd(r.document.createTime):ql.min(),a=new Iu({mapValue:{fields:r.document.fields}}),l=Ru.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Dd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=$d(e,r.document),s=r.readTime?Qd(r.readTime):ql.min(),o=Ru.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Dd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=$d(e,r.document),s=r.removedTargetIds||[];n=new Dd([],s,i,null)}else{if(!("filter"in t))return nl(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new bd(r,i),o=e.targetId;n=new Od(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ql.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ql.min():t.readTime?Qd(t.readTime):ql.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=nf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ih(r)?{documents:af(e,r)}:{query:lf(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Gd(e,t.resumeToken);const r=Hd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ql.min())>0){n.readTime=Wd(e,t.snapshotVersion.toTimestamp());const r=Hd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nl(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=nf(this.serializer),t.removeTarget=e,this.q_(t)}}class Np extends Pp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return il(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,il(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){il(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(il(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Qd(e.updateTime):Qd(t);return n.isEqual(ql.min())&&(n=Qd(t)),new $h(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Qd(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=nf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>of(this.serializer,e))};this.q_(t)}}class Dp{}class Op extends Dp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new al(ol.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,Xd(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ol.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new al(ol.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,Xd(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ol.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new al(ol.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Mp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?($a(t),this.aa=!1):Za("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Lp="RemoteStore";class Fp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Gp(this)&&(Za(Lp,"Restarting streams for network reachability change."),await async function(e){const t=sl(e);t.Ea.add(4),await Up(t),t.Ra.set("Unknown"),t.Ea.delete(4),await jp(t)}(this))})}),this.Ra=new Mp(n,r)}}async function jp(e){if(Gp(e))for(const t of e.da)await t(!0)}async function Up(e){for(const t of e.da)await t(!1)}function Vp(e,t){const n=sl(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Wp(n)?Hp(n):hm(n).O_()&&Bp(n,t))}function zp(e,t){const n=sl(e),r=hm(n);n.Ia.delete(t),r.O_()&&qp(n,t),0===n.Ia.size&&(r.O_()?r.L_():Gp(n)&&n.Ra.set("Unknown"))}function Bp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ql.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}hm(e).Y_(t)}function qp(e,t){e.Va.Ue(t),hm(e).Z_(t)}function Hp(e){e.Va=new Fd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),hm(e).start(),e.Ra.ua()}function Wp(e){return Gp(e)&&!hm(e).x_()&&e.Ia.size>0}function Gp(e){return 0===sl(e).Ea.size}function Kp(e){e.Va=void 0}async function Qp(e){e.Ra.set("Online")}async function Yp(e){e.Ia.forEach((t,n)=>{Bp(e,t)})}async function Xp(e,t){Kp(e),Wp(e)?(e.Ra.ha(t),Hp(e)):e.Ra.set("Unknown")}async function Jp(e,t,n){if(e.Ra.set("Online"),t instanceof Md&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Za(Lp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Zp(e,n)}else if(t instanceof Dd?e.Va.Ze(t):t instanceof Od?e.Va.st(t):e.Va.tt(t),!n.isEqual(ql.min()))try{const t=await op(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Wc.EMPTY_BYTE_STRING,r.snapshotVersion)),qp(e,t);const i=new wf(r.target,t,n,r.sequenceNumber);Bp(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Za(Lp,"Failed to raise snapshot:",t),await Zp(e,t)}}async function Zp(e,t,n){if(!tc(t))throw t;e.Ea.add(1),await Up(e),e.Ra.set("Offline"),n||(n=()=>op(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Za(Lp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await jp(e)})}function $p(e,t){return t().catch(n=>Zp(e,n,t))}async function em(e){const t=sl(e),n=dm(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:rc;for(;tm(t);)try{const e=await lp(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,nm(t,e)}catch(e){await Zp(t,e)}rm(t)&&im(t)}function tm(e){return Gp(e)&&e.Ta.length<10}function nm(e,t){e.Ta.push(t);const n=dm(e);n.O_()&&n.X_&&n.ea(t.mutations)}function rm(e){return Gp(e)&&!dm(e).x_()&&e.Ta.length>0}function im(e){dm(e).start()}async function sm(e){dm(e).ra()}async function om(e){const t=dm(e);for(const n of e.Ta)t.ea(n.mutations)}async function am(e,t,n){const r=e.Ta.shift(),i=gd.from(r,t,n);await $p(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await em(e)}async function lm(e,t){t&&dm(e).X_&&await async function(e,t){if(function(e){return Sd(e)&&e!==ol.ABORTED}(t.code)){const n=e.Ta.shift();dm(e).B_(),await $p(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await em(e)}}(e,t),rm(e)&&im(e)}async function cm(e,t){const n=sl(e);n.asyncQueue.verifyOperationInProgress(),Za(Lp,"RemoteStore received new credentials");const r=Gp(n);n.Ea.add(3),await Up(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await jp(n)}async function um(e,t){const n=sl(e);t?(n.Ea.delete(2),await jp(n)):t||(n.Ea.add(2),await Up(n),n.Ra.set("Unknown"))}function hm(e){return e.ma||(e.ma=function(e,t,n){const r=sl(e);return r.sa(),new Rp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Qp.bind(null,e),t_:Yp.bind(null,e),r_:Xp.bind(null,e),H_:Jp.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Wp(e)?Hp(e):e.Ra.set("Unknown")):(await e.ma.stop(),Kp(e))})),e.ma}function dm(e){return e.fa||(e.fa=function(e,t,n){const r=sl(e);return r.sa(),new Np(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:sm.bind(null,e),r_:lm.bind(null,e),ta:om.bind(null,e),na:am.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await em(e)):(await e.fa.stop(),e.Ta.length>0&&(Za(Lp,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class fm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ll,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new fm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new al(ol.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(e,t){if($a("AsyncQueue","".concat(t,": ").concat(e)),tc(e))return new al(ol.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class mm{static emptySet(e){return new mm(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Pl.comparator(t.key,n.key):(e,t)=>Pl.comparator(e.key,t.key),this.keyedMap=Ah(),this.sortedSet=new jc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new mm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class gm{constructor(){this.ga=new jc(Pl.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):nl(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class ym{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new ym(e,t,mm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class vm{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class bm{constructor(){this.queries=wm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=sl(e),r=n.queries;n.queries=wm(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new al(ol.ABORTED,"Firestore shutting down"))}}function wm(){return new Eh(e=>yh(e),gh)}async function _m(e,t){const n=sl(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new vm,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=pm(e,"Initialization of query '".concat(vh(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&xm(n)}async function Sm(e,t){const n=sl(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Em(e,t){const n=sl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&xm(n)}function Cm(e,t,n){const r=sl(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function xm(e){e.Ca.forEach(e=>{e.next()})}var Tm,Am;(Am=Tm||(Tm={})).Ma="default",Am.Cache="cache";class km{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ym(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=ym.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tm.Cache}}class Im{constructor(e){this.key=e}}class Pm{constructor(e){this.key=e}}class Rm{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oh(),this.mutatedKeys=Oh(),this.eu=_h(e),this.tu=new mm(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new gm,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=bh(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nl(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new ym(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oh(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Pm(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Im(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Oh();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ym.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Nm="SyncEngine";class Dm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Om{constructor(e){this.key=e,this.hu=!1}}class Mm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Eh(e=>yh(e),gh),this.Iu=new Map,this.Eu=new Set,this.du=new jc(Pl.comparator),this.Au=new Map,this.Ru=new qf,this.Vu={},this.mu=new Map,this.fu=If.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Lm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=rg(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await jm(r,t,n,!0),i}async function Fm(e,t){const n=rg(e);await jm(n,t,!0,!1)}async function jm(e,t,n,r){const i=await cp(e.localStore,hh(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Um(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Vp(e.remoteStore,i),a}async function Um(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await hp(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Jm(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await hp(e.localStore,t,!0),o=new Rm(t,s.Qs),a=o.ru(s.documents),l=Nd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Jm(e,n,c.au);const u=new Dm(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Vm(e,t,n){const r=sl(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!gh(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await up(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zp(r.remoteStore,i.targetId),Ym(r,i.targetId)}).catch(Zl)):(Ym(r,i.targetId),await up(r.localStore,i.targetId,!0))}async function zm(e,t){const n=sl(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zp(n.remoteStore,r.targetId))}async function Bm(e,t){const n=sl(e);try{const e=await function(e,t){const n=sl(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Wc.EMPTY_BYTE_STRING,ql.min()).withLastLimboFreeSnapshotVersion(ql.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=xh(),l=Oh();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(ap(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(ql.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return $l.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(il(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?il(r.hu,14607):e.removedDocuments.size>0&&(il(r.hu,42227),r.hu=!1))}),await eg(n,e,t)}catch(e){await Zl(e)}}function qm(e,t,n){const r=sl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=sl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&xm(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Hm(e,t,n){const r=sl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new jc(Pl.comparator);e=e.insert(s,Ru.newNoDocument(s,ql.min()));const n=Oh().add(s),i=new Rd(ql.min(),new Map,new jc(bl),e,n);await Bm(r,i),r.du=r.du.remove(s),r.Au.delete(t),$m(r)}else await up(r.localStore,t,!1).then(()=>Ym(r,t,n)).catch(Zl)}async function Wm(e,t){const n=sl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=sl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=$l.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);il(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Oh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Qm(n,r,null),Km(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eg(n,e)}catch(e){await Zl(e)}}async function Gm(e,t,n){const r=sl(e);try{const e=await function(e,t){const n=sl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(il(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Qm(r,t,n),Km(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await eg(r,e)}catch(n){await Zl(n)}}function Km(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Qm(e,t,n){const r=sl(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Ym(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Xm(e,t)})}function Xm(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(zp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),$m(e))}function Jm(e,t,n){for(const r of n)r instanceof Im?(e.Ru.addReference(r.key,t),Zm(e,r)):r instanceof Pm?(Za(Nm,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Xm(e,r.key)):nl(19791,{wu:r})}function Zm(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Za(Nm,"New document in limbo: "+n),e.Eu.add(r),$m(e))}function $m(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Pl(Al.fromString(t)),r=e.fu.next();e.Au.set(r,new Om(n)),e.du=e.du.insert(n,r),Vp(e.remoteStore,new wf(hh(ah(n.path)),r,"TargetPurposeLimboResolution",nc.ce))}}async function eg(e,t,n){const r=sl(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=$f.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=sl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>$l.forEach(t,t=>$l.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>$l.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!tc(e))throw e;Za(np,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function tg(e,t){const n=sl(e);if(!n.currentUser.isEqual(t)){Za(Nm,"User change. New user:",t.toKey());const e=await sp(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new al(ol.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await eg(n,e.Ls)}}function ng(e,t){const n=sl(e),r=n.Au.get(t);if(r&&r.hu)return Oh().add(r.key);{let e=Oh();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function rg(e){const t=sl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ng.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hm.bind(null,t),t.Pu.H_=Em.bind(null,t.eventManager),t.Pu.yu=Cm.bind(null,t.eventManager),t}function ig(e){const t=sl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gm.bind(null,t),t}class sg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ap(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ip(this.persistence,new tp,e.initialUser,this.serializer)}Cu(e){return new Yf(Jf.mi,this.serializer)}Du(e){return new pp}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sg.provider={build:()=>new sg};class og extends sg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){il(this.persistence.referenceDelegate instanceof Zf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Of(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?kf.withCacheSize(this.cacheSizeBytes):kf.DEFAULT;return new Yf(e=>Zf.mi(e,t),this.serializer)}}class ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>qm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=tg.bind(null,this.syncEngine),await um(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new bm}createDatastore(e){const t=Ap(e.databaseInfo.databaseId),n=function(e){return new xp(e)}(e.databaseInfo);return function(e,t,n,r){return new Op(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Fp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>qm(this.syncEngine,e,0),yp.v()?new yp:new mp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Mm(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=sl(e);Za(Lp,"RemoteStore shutting down."),t.Ea.add(5),await Up(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}ag.provider={build:()=>new ag};class lg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$a("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const cg="FirestoreClient";class ug{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Qa.UNAUTHENTICATED,this.clientId=vl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Za(cg,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Za(cg,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ll;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=pm(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hg(e,t){e.asyncQueue.verifyOperationInProgress(),Za(cg,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await sp(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function dg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await fg(e);Za(cg,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>cm(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>cm(t.remoteStore,n)),e._onlineComponents=t}async function fg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Za(cg,"Using user provided OfflineComponentProvider");try{await hg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ol.FAILED_PRECONDITION||e.code===ol.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;el("Error using user provided cache. Falling back to memory cache: "+n),await hg(e,new sg)}}else Za(cg,"Using default OfflineComponentProvider"),await hg(e,new og(void 0));return e._offlineComponents}async function pg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Za(cg,"Using user provided OnlineComponentProvider"),await dg(e,e._uninitializedComponentsProvider._online)):(Za(cg,"Using default OnlineComponentProvider"),await dg(e,new ag))),e._onlineComponents}function mg(e){return pg(e).then(e=>e.syncEngine)}function gg(e){return pg(e).then(e=>e.datastore)}async function yg(e){const t=await pg(e),n=t.eventManager;return n.onListen=Lm.bind(null,t.syncEngine),n.onUnlisten=Vm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Fm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=zm.bind(null,t.syncEngine),n}function vg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ll;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new lg({next:a=>{s.Nu(),t.enqueueAndForget(()=>Sm(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new al(ol.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new al(ol.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new km(ah(n.path),s,{includeMetadataChanges:!0,qa:!0});return _m(e,o)}(await yg(e),e.asyncQueue,t,n,r)),r.promise}function bg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ll;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new lg({next:n=>{s.Nu(),t.enqueueAndForget(()=>Sm(e,o)),n.fromCache&&"server"===r.source?i.reject(new al(ol.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new km(n,s,{includeMetadataChanges:!0,qa:!0});return _m(e,o)}(await yg(e),e.asyncQueue,t,n,r)),r.promise}function wg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _g=new Map,Sg="firestore.googleapis.com",Eg=!0;class Cg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new al(ol.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sg,this.ssl=Eg}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Eg;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Af;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Rf)throw new al(ol.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new al(ol.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new al(ol.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new al(ol.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new al(ol.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new al(ol.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new al(ol.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cg(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ul;switch(e.type){case"firstParty":return new pl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new al(ol.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_g.get(e);t&&(Za("ComponentProvider","Removing Datastore"),_g.delete(e),t.terminate())}(this),Promise.resolve()}}class Tg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Tg(this.firestore,e,this._query)}}class Ag{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ag(this.firestore,e,this._key)}toJSON(){return{type:Ag._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ul(t,Ag._jsonSchema))return new Ag(e,n||null,new Pl(Al.fromString(t.referencePath)))}}Ag._jsonSchemaVersion="firestore/documentReference/1.0",Ag._jsonSchema={type:jl("string",Ag._jsonSchemaVersion),referencePath:jl("string")};class kg extends Tg{constructor(e,t,n){super(e,t,ah(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ag(this.firestore,null,new Pl(e))}withConverter(e){return new kg(this.firestore,e,this._path)}}function Ig(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),Rl("collection","path",t),e instanceof xg){const n=Al.fromString(t,...r);return Dl(n),new kg(e,null,n)}{if(!(e instanceof Ag||e instanceof kg))throw new al(ol.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Al.fromString(t,...r));return Dl(n),new kg(e.firestore,null,n)}}function Pg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),1===arguments.length&&(t=vl.newId()),Rl("doc","path",t),e instanceof xg){const n=Al.fromString(t,...r);return Nl(n),new Ag(e,null,new Pl(n))}{if(!(e instanceof Ag||e instanceof kg))throw new al(ol.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Al.fromString(t,...r));return Nl(n),new Ag(e.firestore,e instanceof kg?e.converter:null,new Pl(n))}}const Rg="AsyncQueue";class Ng{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kp(this,"async_queue_retry"),this._c=()=>{const e=Tp();e&&Za(Rg,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Tp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Tp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ll;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(ND){if(!tc(ND))throw ND;Za(Rg,"Operation failed with retryable error: "+ND)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,$a("INTERNAL UNHANDLED ERROR: ",Dg(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=fm.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&nl(47125,{Pc:Dg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Dg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Og(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Mg extends xg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ng,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ng(e),this._firestoreClient=void 0,await e}}}function Lg(e){if(e._terminated)throw new al(ol.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Fg(e),e._firestoreClient}function Fg(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ru(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wg(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new ug(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Ug{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Vg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vg(Wc.fromBase64String(e))}catch(e){throw new al(ol.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Vg(Wc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ul(e,Vg._jsonSchema))return Vg.fromBase64String(e.bytes)}}Vg._jsonSchemaVersion="firestore/bytes/1.0",Vg._jsonSchema={type:jl("string",Vg._jsonSchemaVersion),bytes:jl("string")};class zg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new al(ol.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Il(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bg{constructor(e){this._methodName=e}}class qg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new al(ol.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new al(ol.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bl(this._lat,e._lat)||bl(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qg._jsonSchemaVersion}}static fromJSON(e){if(Ul(e,qg._jsonSchema))return new qg(e.latitude,e.longitude)}}qg._jsonSchemaVersion="firestore/geoPoint/1.0",qg._jsonSchema={type:jl("string",qg._jsonSchemaVersion),latitude:jl("number"),longitude:jl("number")};class Hg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hg._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ul(e,Hg._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Hg(e.vectorValues);throw new al(ol.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hg._jsonSchemaVersion="firestore/vectorValue/1.0",Hg._jsonSchema={type:jl("string",Hg._jsonSchemaVersion),vectorValues:jl("object")};const Wg=/^__.*__$/;class Gg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new ld(e,this.data,t,this.fieldTransforms)}}class Kg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nl(40011,{Ac:e})}}class Yg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yg(m(m({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return py(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Qg(this.Ac)&&Wg.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ap(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Yg({Ac:e,methodName:t,Dc:n,path:Il.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jg(e){const t=e._freezeSettings(),n=Ap(e._databaseId);return new Xg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zg(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);uy("Data must be an object, but it was:",o,r);const a=ly(r,o);let l,c;if(s.merge)l=new qc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=hy(t,r,n);if(!o.contains(i))throw new al(ol.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));my(e,i)||e.push(i)}l=new qc(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Gg(new Iu(a),l,c)}class $g extends Bg{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $g}}function ey(e,t,n){return new Yg({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ty extends Bg{_toFieldTransform(e){return new Zh(e.path,new Hh)}isEqual(e){return e instanceof ty}}class ny extends Bg{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=ey(this,e,!0),n=this.vc.map(e=>ay(e,t)),r=new Wh(n);return new Zh(e.path,r)}isEqual(e){return e instanceof ny&&_n(this.vc,e.vc)}}class ry extends Bg{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=ey(this,e,!0),n=this.vc.map(e=>ay(e,t)),r=new Kh(n);return new Zh(e.path,r)}isEqual(e){return e instanceof ry&&_n(this.vc,e.vc)}}function iy(e,t,n,r){const i=e.Cc(1,t,n);uy("Data must be an object, but it was:",i,r);const s=[],o=Iu.empty();Mc(r,(e,r)=>{const a=fy(t,e,n);r=Rn(r);const l=i.yc(a);if(r instanceof $g)s.push(a);else{const e=ay(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new qc(s);return new Kg(o,a,i.fieldTransforms)}function sy(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[hy(t,r,n)],l=[i];if(s.length%2!=0)throw new al(ol.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(hy(t,s[d])),l.push(s[d+1]);const c=[],u=Iu.empty();for(let d=a.length-1;d>=0;--d)if(!my(c,a[d])){const e=a[d];let t=l[d];t=Rn(t);const n=o.yc(e);if(t instanceof $g)c.push(e);else{const r=ay(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new qc(c);return new Kg(u,h,o.fieldTransforms)}function oy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ay(n,e.Cc(r?4:3,t))}function ay(e,t){if(cy(e=Rn(e)))return uy("Unsupported field value:",t,e),ly(e,t);if(e instanceof Bg)return function(e,t){if(!Qg(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ay(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Rn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Uh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Bl.fromDate(e);return{timestampValue:Wd(t.serializer,n)}}if(e instanceof Bl){const n=new Bl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wd(t.serializer,n)}}if(e instanceof qg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Vg)return{bytesValue:Gd(t.serializer,e._byteString)};if(e instanceof Ag){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Yd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Hg)return function(e,t){return{mapValue:{fields:{[ou]:{stringValue:cu},[uu]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Fh(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Ml(e)))}(e,t)}function ly(e,t){const n={};return Fc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mc(e,(e,r)=>{const i=ay(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function cy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bl||e instanceof qg||e instanceof Vg||e instanceof Ag||e instanceof Bg||e instanceof Hg)}function uy(e,t,n){if(!cy(n)||!Ol(n)){const r=Ml(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function hy(e,t,n){if((t=Rn(t))instanceof zg)return t._internalPath;if("string"==typeof t)return fy(e,t);throw py("Field path arguments must be of type string or ",e,!1,void 0,n)}const dy=new RegExp("[~\\*/\\[\\]]");function fy(e,t,n){if(t.search(dy)>=0)throw py("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new zg(...t.split("."))._internalPath}catch(RD){throw py("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function py(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new al(ol.INVALID_ARGUMENT,a+e+l)}function my(e,t){return e.some(e=>e.isEqual(t))}class gy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ag(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yy extends gy{data(){return super.data()}}function vy(e,t){return"string"==typeof t?fy(e,t):t instanceof zg?t._internalPath:t._delegate._internalPath}function by(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new al(ol.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wy{}class _y extends wy{}function Sy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof wy&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof xy).length,n=e.filter(e=>e instanceof Ey).length;if(t>1||t>0&&n>0)throw new al(ol.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Ey extends _y{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ey(e,t,n)}_apply(e){const t=this._parse(e);return Ry(e._query,t),new Tg(e.firestore,e.converter,ph(e._query,t))}_parse(e){const t=Jg(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new al(ol.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Py(o,s);const t=[];for(const n of o)t.push(Iy(r,e,n));a={arrayValue:{values:t}}}else a=Iy(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Py(o,s),a=oy(n,t,o,"in"===s||"not-in"===s);return ju.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Cy(e,t,n){const r=t,i=vy("where",e);return Ey._create(i,r,n)}class xy extends wy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xy(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Uu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ry(n,i),n=ph(n,i)}(e._query,t),new Tg(e.firestore,e.converter,ph(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ty extends _y{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ty(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new al(ol.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new al(ol.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(t,n)}(e._query,this._field,this._direction);return new Tg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new sh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ay(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=vy("orderBy",e);return Ty._create(n,t)}class ky extends _y{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ky(e,t,n)}_apply(e){return new Tg(e.firestore,e.converter,mh(e._query,this._limit,this._limitType))}}function Iy(e,t,n){if("string"==typeof(n=Rn(n))){if(""===n)throw new al(ol.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ch(t)&&-1!==n.indexOf("/"))throw new al(ol.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Al.fromString(n));if(!Pl.isDocumentKey(r))throw new al(ol.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wu(e,new Pl(r))}if(n instanceof Ag)return wu(e,n._key);throw new al(ol.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ml(n),"."))}function Py(e,t){if(!Array.isArray(e)||0===e.length)throw new al(ol.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ry(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new al(ol.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new al(ol.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ny{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw nl(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Mc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[uu].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Qc(e.doubleValue));return new Hg(n)}convertGeoPoint(e){return new qg(Qc(e.latitude),Qc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=tu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){const t=Kc(e);return new Bl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Al.fromString(e);il(bf(n),9688,{name:e});const r=new su(n.get(1),n.get(3)),i=new Pl(n.popFirst(5));return r.isEqual(t)||$a("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Dy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Oy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class My extends gy{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ly(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new al(ol.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=My._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}My._jsonSchemaVersion="firestore/documentSnapshot/1.0",My._jsonSchema={type:jl("string",My._jsonSchemaVersion),bundleSource:jl("string","DocumentSnapshot"),bundleName:jl("string"),bundle:jl("string")};class Ly extends My{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Oy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ly(this._firestore,this._userDataWriter,n.key,n,new Oy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new al(ol.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Ly(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Oy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Ly(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Oy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:jy(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new al(ol.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fy._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nl(61501,{type:e})}}function Uy(e){e=Ll(e,Ag);const t=Ll(e.firestore,Mg);return vg(Lg(t),e._key).then(n=>Gy(t,e,n))}Fy._jsonSchemaVersion="firestore/querySnapshot/1.0",Fy._jsonSchema={type:jl("string",Fy._jsonSchemaVersion),bundleSource:jl("string","QuerySnapshot"),bundleName:jl("string"),bundle:jl("string")};class Vy extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ag(this.firestore,null,t)}}function zy(e){e=Ll(e,Tg);const t=Ll(e.firestore,Mg),n=Lg(t),r=new Vy(t);return by(e._query),bg(n,e._query).then(n=>new Fy(t,r,e,n))}function By(e,t,n){e=Ll(e,Ag);const r=Ll(e.firestore,Mg),i=Dy(e.converter,t,n);return Wy(r,[Zg(Jg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ed.none())])}function qy(e,t,n){e=Ll(e,Ag);const r=Ll(e.firestore,Mg),i=Jg(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Rn(t))||t instanceof zg?sy(i,"updateDoc",e._key,t,n,a):iy(i,"updateDoc",e._key,t),Wy(r,[s.toMutation(e._key,ed.exists(!0))])}function Hy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=Rn(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||Og(n[s])||(i=n[s++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Og(n[s])){var a,l,c;const e=n[s];n[s]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,h,d;if(e instanceof Ag)h=Ll(e.firestore,Mg),d=ah(e._key.path),u={next:t=>{n[s]&&n[s](Gy(h,e,t))},error:n[s+1],complete:n[s+2]};else{const t=Ll(e,Tg);h=Ll(t.firestore,Mg),d=t._query;const r=new Vy(h);u={next:e=>{n[s]&&n[s](new Fy(h,r,t,e))},error:n[s+1],complete:n[s+2]},by(e._query)}return function(e,t,n,r){const i=new lg(r),s=new km(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>_m(await yg(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Sm(await yg(e),s))}}(Lg(h),d,o,u)}function Wy(e,t){return function(e,t){const n=new ll;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=ig(e);try{const e=await function(e,t){const n=sl(e),r=Bl.now(),i=t.reduce((e,t)=>e.add(t.key),Oh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=xh(),l=Oh();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=od(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new cd(e.key,t,Pu(t.value.mapValue),ed.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:kh(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new jc(bl)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await eg(r,e.changes),await em(r.remoteStore)}catch(e){const t=pm(e,"Failed to persist write");n.reject(t)}}(await mg(e),t,n)),n.promise}(Lg(e),t)}function Gy(e,t,n){const r=n.docs.get(t._key),i=new Vy(e);return new My(e,i,t._key,r,new Oy(n.hasPendingWrites,n.fromCache),t.converter)}function Ky(e){return function(e,t){const n=Ll(e.firestore,Mg),r=Lg(n),i=Lc(t,(e,t)=>new vd(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new ll;return e.asyncQueue.enqueueAndForget(async()=>{try{const i=await gg(e);r.resolve(async function(e,t,n){var r;const i=sl(e),{request:s,gt:o,parent:a}=cf(i.serializer,dh(t),n);i.connection.$o||delete s.parent;const l=(await i.Ho("RunAggregationQuery",i.serializer.databaseId,a,s,1)).filter(e=>!!e.result);il(1===l.length,64727);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce((e,t)=>(e[o[t]]=c[t],e),{})}(i,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,i).then(t=>function(e,t,n){const r=new Vy(e);return new Ug(t,r,n)}(n,e,t))}(e,{count:new jg("count")})}function Qy(){return new ty("serverTimestamp")}function Yy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ny("arrayUnion",t)}function Xy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ry("arrayRemove",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ya=e}(Gr),zr(new Nn("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Mg(new dl(e.getProvider("auth-internal")),new gl(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new al(ol.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(e.options.projectId,t)}(s,r),s);return i=m({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Yr(Ga,Ka,e),Yr(Ga,Ka,"esm2020")}();const Jy="@firebase/database",Zy="1.1.0";let $y="";function ev(e){$y=e}class tv{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:pn(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class nv{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return yn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const rv=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tv(t)}}catch(ND){}return new nv},iv=rv("localStorage"),sv=rv("sessionStorage"),ov=new Bn("@firebase/database"),av=function(){let e=1;return function(){return e++}}(),lv=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Dt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Tn;n.update(t);const r=n.digest();return Lt.encodeByteArray(r)},cv=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=cv.apply(null,n):e+="object"===typeof n?mn(n):n,e+=" "}return e};let uv=null,hv=!0;const dv=function(e,t){Dt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ov.logLevel=Fn.VERBOSE,uv=ov.log.bind(ov),t&&sv.set("logging_enabled",!0)):"function"===typeof e?uv=e:(uv=null,sv.remove("logging_enabled"))},fv=function(){if(!0===hv&&(hv=!1,null===uv&&!0===sv.get("logging_enabled")&&dv(!0)),uv){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=cv.apply(null,t);uv(r)}},pv=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];fv(e,...n)}},mv=function(){const e="FIREBASE INTERNAL ERROR: "+cv(...arguments);ov.error(e)},gv=function(){const e="FIREBASE FATAL ERROR: ".concat(cv(...arguments));throw ov.error(e),new Error(e)},yv=function(){const e="FIREBASE WARNING: "+cv(...arguments);ov.warn(e)},vv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},bv="[MIN_NAME]",wv="[MAX_NAME]",_v=function(e,t){if(e===t)return 0;if(e===bv||t===wv)return-1;if(t===bv||e===wv)return 1;{const n=Iv(e),r=Iv(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Sv=function(e,t){return e===t?0:e<t?-1:1},Ev=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+mn(t))},Cv=function(e){if("object"!==typeof e||null===e)return mn(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=mn(t[r]),n+=":",n+=Cv(e[t[r]]);return n+="}",n},xv=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Tv(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Av=function(e){Dt(!vv(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const kv=new RegExp("^-?(0*)\\d{1,10}$"),Iv=function(e){if(kv.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Pv=function(e){try{e()}catch(ND){setTimeout(()=>{const t=ND.stack||"";throw yv("Exception was thrown by user callback.",t),ND},Math.floor(0))}},Rv=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Nv{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,qr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){yv('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Dv{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(fv("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yv(e)}}class Ov{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ov.OWNER="owner";const Mv="5",Lv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fv="ac",jv="websocket",Uv="long_polling";class Vv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=iv.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&iv.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function zv(e,t,n){let r;if(Dt("string"===typeof t,"typeof type must == string"),Dt("object"===typeof n,"typeof params must == object"),t===jv)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Uv)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Tv(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class Bv{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;yn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return zt(this.counters_)}}const qv={},Hv={};function Wv(e){const t=e.toString();return qv[t]||(qv[t]=new Bv),qv[t]}class Gv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Pv(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Kv="start";class Qv{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pv(e),this.stats_=Wv(t),this.urlFn=e=>(this.appCheckToken&&(e[Fv]=this.appCheckToken),zv(t,Uv,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Gv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(ln()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yv(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Kv)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[Kv]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Mv,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Fv]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Lv.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qv.forceAllow_=!0}static forceDisallow(){Qv.forceDisallow_=!0}static isAvailable(){return!ln()&&(!!Qv.forceAllow_||!Qv.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=mn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=jt(t),r=xv(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ln())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=mn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Yv{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ln())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=av(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Yv.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(ND){fv("frame writing exception"),ND.stack&&fv(ND.stack),fv(ND)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||fv("No IE domain setting required")}catch(ND){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){ln()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{fv("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(ND){}},Math.floor(1))}}let Xv=null;"undefined"!==typeof MozWebSocket?Xv=MozWebSocket:"undefined"!==typeof WebSocket&&(Xv=WebSocket);class Jv{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pv(this.connId),this.stats_=Wv(t),this.connURL=Jv.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Mv,!ln()&&"undefined"!==typeof location&&location.hostname&&Lv.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Fv]=r),i&&(s.p=i),zv(e,jv,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,iv.set("previous_websocket_failure",!0);try{let e;if(ln()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Mv,"/").concat($y,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/CodeCollab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STORAGE_BUCKET:"codecollab-51e34.firebasestorage.app",REACT_APP_AUTH_DOMAIN:"codecollab-51e34.firebaseapp.com",REACT_APP_PROJECT_ID:"codecollab-51e34",REACT_APP_APP_ID:"1:843472885618:web:39e387dd0fdc16c5ff6feb",REACT_APP_API_KEY:"AIzaSyBsa4EXmMMdQjMccbG17wBPMd9iQsb4KJY",REACT_APP_MESSAGING_SENDER_ID:"843472885618"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Xv(this.connURL,[],e)}catch(ND){this.log_("Error instantiating WebSocket.");const t=ND.message||ND.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Jv.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Xv&&!Jv.forceDisallow_}static previouslyFailed(){return iv.isInMemoryStorage||!0===iv.get("previous_websocket_failure")}markConnectionHealthy(){iv.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=pn(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Dt(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=mn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=xv(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(ND){this.log_("Exception thrown from WebSocket.send():",ND.message||ND.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jv.responsesRequiredToBeHealthy=2,Jv.healthyTimeout=3e4;class Zv{static get ALL_TRANSPORTS(){return[Qv,Jv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Jv&&Jv.isAvailable();let n=t&&!Jv.previouslyFailed();if(e.webSocketOnly&&(t||yv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Jv];else{const e=this.transports_=[];for(const t of Zv.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Zv.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Zv.globalTransportInitialized_=!1;class $v{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pv("c:"+this.id+":"),this.transportManager_=new Zv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Rv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ev("t",e),n=Ev("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ev("t",e),n=Ev("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ev("t",e);if("d"in e){const n=e.d;if("h"===t){const e=m({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?mv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Mv!==n&&yv("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Rv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(iv.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class eb{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class tb{constructor(e){this.allowedEvents_=e,this.listeners_={},Dt(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Dt(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nb extends tb{static getInstance(){return new nb}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||sn()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Dt("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class rb{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ib(){return new rb("")}function sb(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ob(e){return e.pieces_.length-e.pieceNum_}function ab(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new rb(e.pieces_,t)}function lb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function cb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ub(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new rb(t,0)}function hb(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof rb)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new rb(n,0)}function db(e){return e.pieceNum_>=e.pieces_.length}function fb(e,t){const n=sb(e),r=sb(t);if(null===n)return t;if(n===r)return fb(ab(e),ab(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function pb(e,t){const n=cb(e,0),r=cb(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=_v(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function mb(e,t){if(ob(e)!==ob(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function gb(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ob(e)>ob(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class yb{constructor(e,t){this.errorPrefix_=t,this.parts_=cb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Pn(this.parts_[n]);vb(this)}}function vb(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bb(e))}function bb(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class wb extends tb{static getInstance(){return new wb}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return Dt("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _b=1e3;class Sb extends eb{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Sb.nextPersistentConnectionId_++,this.log_=pv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_b,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ln())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wb.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&nb.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(mn(i)),Dt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Xt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Dt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Dt(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,o=i.s;Sb.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&yn(e,"w")){const n=vn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();yv("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=gn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=gn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Dt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mn(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):mv("Unrecognized action received from server: "+mn(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Dt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_b,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_b,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_b),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Sb.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Dt(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?fv("getToken() completed but was canceled"):(fv("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new $v(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{yv(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(mv){this.log_("Failed to get token: "+mv),s||(this.repoInfo_.nodeAdmin&&yv(mv),a())}}}interrupt(e){fv("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fv("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bn(this.interruptReasons_)&&(this.reconnectDelay_=_b,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>Cv(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new rb(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){fv("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){fv("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ln()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+$y.replace(/\./g,"-")]=1,sn()?e["framework.cordova"]=1:an()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nb.getInstance().currentlyOnline();return bn(this.interruptReasons_)&&e}}Sb.nextPersistentConnectionId_=0,Sb.nextConnectionId_=0;class Eb{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Eb(e,t)}}class Cb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Eb(bv,e),r=new Eb(bv,t);return 0!==this.compare(n,r)}minPost(){return Eb.MIN}}let xb;class Tb extends Cb{static get __EMPTY_NODE(){return xb}static set __EMPTY_NODE(e){xb=e}compare(e,t){return _v(e.name,t.name)}isDefinedOn(e){throw Ot("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Eb.MIN}maxPost(){return new Eb(wv,xb)}makePost(e,t){return Dt("string"===typeof e,"KeyIndex indexValue must always be a string."),new Eb(e,xb)}toString(){return".key"}}const Ab=new Tb;class kb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ib{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ib.RED,this.left=null!=r?r:Pb.EMPTY_NODE,this.right=null!=i?i:Pb.EMPTY_NODE}copy(e,t,n,r,i){return new Ib(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pb.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Pb.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ib.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ib.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ib.RED=!0,Ib.BLACK=!1;class Pb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pb.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Pb(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ib.BLACK,null,null))}remove(e){return new Pb(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ib.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kb(this.root_,null,this.comparator_,!0,e)}}function Rb(e,t){return _v(e.name,t.name)}function Nb(e,t){return _v(e,t)}let Db;Pb.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ib(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ob=function(e){return"number"===typeof e?"number:"+Av(e):"string:"+e},Mb=function(e){if(e.isLeafNode()){const t=e.val();Dt("string"===typeof t||"number"===typeof t||"object"===typeof t&&yn(t,".sv"),"Priority must be a string or number.")}else Dt(e===Db||e.isEmpty(),"priority of unexpected type.");Dt(e===Db||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Lb,Fb,jb;class Ub{static set __childrenNodeConstructor(e){Lb=e}static get __childrenNodeConstructor(){return Lb}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ub.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Dt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Mb(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ub(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Ub.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return db(e)?this:".priority"===sb(e)?this.priorityNode_:Ub.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ub.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=sb(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Dt(".priority"!==n||1===ob(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Ub.__childrenNodeConstructor.EMPTY_NODE.updateChild(ab(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ob(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Av(this.value_):this.value_,this.lazyHash_=lv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ub.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ub.__childrenNodeConstructor?-1:(Dt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Ub.VALUE_TYPE_ORDER.indexOf(t),i=Ub.VALUE_TYPE_ORDER.indexOf(n);return Dt(r>=0,"Unknown leaf type: "+t),Dt(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Ub.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Vb=new class extends Cb{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?_v(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Eb.MIN}maxPost(){return new Eb(wv,new Ub("[PRIORITY-POST]",jb))}makePost(e,t){const n=Fb(e);return new Eb(t,new Ub("[PRIORITY-POST]",n))}toString(){return".priority"}},zb=Math.log(2);class Bb{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/zb,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qb=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Ib(a,o.node,Ib.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Ib(a,o.node,Ib.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Ib(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Ib.BLACK):(a(r,Ib.BLACK),a(r,Ib.RED))}return s}(new Bb(e.length));return new Pb(r||t,s)};let Hb;const Wb={};class Gb{static get Default(){return Dt(Wb&&Vb,"ChildrenNode.ts has not been loaded"),Hb=Hb||new Gb({".priority":Wb},{".priority":Vb}),Hb}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=vn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Pb?t:null}hasIndex(e){return yn(this.indexSet_,e.toString())}addIndex(e,t){Dt(e!==Ab,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Eb.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?qb(n,e.getCompare()):Wb;const a=e.toString(),l=m({},this.indexSet_);l[a]=e;const c=m({},this.indexes_);return c[a]=s,new Gb(c,l)}addToIndexes(e,t){const n=wn(this.indexes_,(n,r)=>{const i=vn(this.indexSet_,r);if(Dt(i,"Missing index implementation for "+r),n===Wb){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Eb.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),qb(n,i.getCompare())}return Wb}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Eb(e.name,r))),i.insert(e,e.node)}});return new Gb(n,this.indexSet_)}removeFromIndexes(e,t){const n=wn(this.indexes_,n=>{if(n===Wb)return n;{const r=t.get(e.name);return r?n.remove(new Eb(e.name,r)):n}});return new Gb(n,this.indexSet_)}}let Kb;class Qb{static get EMPTY_NODE(){return Kb||(Kb=new Qb(new Pb(Nb),null,Gb.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Mb(this.priorityNode_),this.children_.isEmpty()&&Dt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kb}updatePriority(e){return this.children_.isEmpty()?this:new Qb(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Kb:t}}getChild(e){const t=sb(e);return null===t?this:this.getImmediateChild(t).getChild(ab(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Dt(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Eb(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Kb:this.priorityNode_;return new Qb(r,s,i)}}updateChild(e,t){const n=sb(e);if(null===n)return t;{Dt(".priority"!==sb(e)||1===ob(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(ab(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Vb,(s,o)=>{t[s]=o.val(e),n++,i&&Qb.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ob(this.getPriority().val())+":"),this.forEachChild(Vb,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":lv(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Eb(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Eb(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Eb(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,Eb.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,Eb.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yb?-1:0}withIndex(e){if(e===Ab||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Qb(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ab||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Vb),n=t.getIterator(Vb);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Ab?null:this.indexMap_.get(e.toString())}}Qb.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Yb=new class extends Qb{constructor(){super(new Pb(Nb),Qb.EMPTY_NODE,Gb.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qb.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Eb,{MIN:{value:new Eb(bv,Qb.EMPTY_NODE)},MAX:{value:new Eb(wv,Yb)}}),Tb.__EMPTY_NODE=Qb.EMPTY_NODE,Ub.__childrenNodeConstructor=Qb,Db=Yb,function(e){jb=e}(Yb);function Xb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Qb.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Dt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Ub(e,Xb(t))}if(e instanceof Array){let n=Qb.EMPTY_NODE;return Tv(e,(t,r)=>{if(yn(e,t)&&"."!==t.substring(0,1)){const e=Xb(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Xb(t))}{const n=[];let r=!1;if(Tv(e,(e,t)=>{if("."!==e.substring(0,1)){const i=Xb(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Eb(e,i)))}}),0===n.length)return Qb.EMPTY_NODE;const i=qb(n,Rb,e=>e.name,Nb);if(r){const e=qb(n,Vb.getCompare());return new Qb(i,Xb(t),new Gb({".priority":e},{".priority":Vb}))}return new Qb(i,Xb(t),Gb.Default)}}!function(e){Fb=e}(Xb);class Jb extends Cb{constructor(e){super(),this.indexPath_=e,Dt(!db(e)&&".priority"!==sb(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?_v(e.name,t.name):i}makePost(e,t){const n=Xb(e),r=Qb.EMPTY_NODE.updateChild(this.indexPath_,n);return new Eb(t,r)}maxPost(){const e=Qb.EMPTY_NODE.updateChild(this.indexPath_,Yb);return new Eb(wv,e)}toString(){return cb(this.indexPath_,0).join("/")}}const Zb=new class extends Cb{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?_v(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Eb.MIN}maxPost(){return Eb.MAX}makePost(e,t){const n=Xb(e);return new Eb(t,n)}toString(){return".value"}};function $b(e){return{type:"value",snapshotNode:e}}function ew(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tw(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function nw(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class rw{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Dt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(tw(t,o)):Dt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(ew(t,n)):s.trackChildChange(nw(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Vb,(e,r)=>{t.hasChild(e)||n.trackChildChange(tw(e,r))}),t.isLeafNode()||t.forEachChild(Vb,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(nw(t,r,i))}else n.trackChildChange(ew(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Qb.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class iw{constructor(e){this.indexedFilter_=new rw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=iw.getStartPost_(e),this.endPost_=iw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Eb(t,n))||(n=Qb.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Qb.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Qb.EMPTY_NODE);const i=this;return t.forEachChild(Vb,(e,t)=>{i.matches(new Eb(e,t))||(r=r.updateImmediateChild(e,Qb.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class sw{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new iw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Eb(t,n))||(n=Qb.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Qb.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Qb.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Qb.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Qb.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Dt(o.numChildren()===this.limit_,"");const a=new Eb(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(nw(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(tw(t,e));const n=o.updateImmediateChild(t,Qb.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(ew(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(tw(l.name,l.node)),i.trackChildChange(ew(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Qb.EMPTY_NODE)):e}}class ow{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vb}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Dt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Dt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bv}hasEnd(){return this.endSet_}getIndexEndValue(){return Dt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Dt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Dt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vb}copy(){const e=new ow;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function aw(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Vb?n="$priority":e.index_===Zb?n="$value":e.index_===Ab?n="$key":(Dt(e.index_ instanceof Jb,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=mn(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=mn(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+mn(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=mn(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+mn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function lw(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Vb&&(t.i=e.index_.toString()),t}class cw extends eb{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Dt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=pv("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=cw.getListenId_(e,n),o={};this.listens_[s]=o;const a=aw(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),vn(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=cw.getListenId_(e,t);delete this.listens_[n]}get(e){const t=aw(e._queryParams),n=e._path.toString(),r=new Xt;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+En(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=pn(a.responseText)}catch(ND){yv("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&yv("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class uw{constructor(){this.rootNode_=Qb.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function hw(){return{value:null,children:new Map}}function dw(e,t,n){if(db(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=sb(t);e.children.has(r)||e.children.set(r,hw());dw(e.children.get(r),t=ab(t),n)}}function fw(e,t){if(db(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Vb,(t,n)=>{dw(e,new rb(t),n)}),fw(e,t)}}if(e.children.size>0){const n=sb(t);if(t=ab(t),e.children.has(n)){fw(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function pw(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{pw(r,new rb(t.toString()+"/"+e),n)})}class mw{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=m({},e);return this.last_&&Tv(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class gw{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new mw(e);const n=1e4+2e4*Math.random();Rv(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Tv(e,(e,r)=>{r>0&&yn(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Rv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var yw;function vw(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(yw||(yw={}));class bw{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=yw.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(db(this.path)){if(null!=this.affectedTree.value)return Dt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new rb(e));return new bw(ib(),t,this.revert)}}return Dt(sb(this.path)===e,"operationForChild called for unrelated child."),new bw(ab(this.path),this.affectedTree,this.revert)}}class ww{constructor(e,t){this.source=e,this.path=t,this.type=yw.LISTEN_COMPLETE}operationForChild(e){return db(this.path)?new ww(this.source,ib()):new ww(this.source,ab(this.path))}}class _w{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=yw.OVERWRITE}operationForChild(e){return db(this.path)?new _w(this.source,ib(),this.snap.getImmediateChild(e)):new _w(this.source,ab(this.path),this.snap)}}class Sw{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=yw.MERGE}operationForChild(e){if(db(this.path)){const t=this.children.subtree(new rb(e));return t.isEmpty()?null:t.value?new _w(this.source,ib(),t.value):new Sw(this.source,ib(),t)}return Dt(sb(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sw(this.source,ab(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ew{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(db(e))return this.isFullyInitialized()&&!this.filtered_;const t=sb(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Cw{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xw(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Ot("Should only compare child_ events.");const r=new Eb(t.childName,t.snapshotNode),i=new Eb(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Tw(e,t){return{eventCache:e,serverCache:t}}function Aw(e,t,n,r){return Tw(new Ew(t,n,r),e.serverCache)}function kw(e,t,n,r){return Tw(e.eventCache,new Ew(t,n,r))}function Iw(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Pw(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Rw;class Nw{static fromObject(e){let t=new Nw(null);return Tv(e,(e,n)=>{t=t.set(new rb(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Rw||(Rw=new Pb(Sv)),Rw);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ib(),value:this.value};if(db(e))return null;{const n=sb(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(ab(e),t);if(null!=i){return{path:hb(new rb(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(db(e))return this;{const t=sb(e),n=this.children.get(t);return null!==n?n.subtree(ab(e)):new Nw(null)}}set(e,t){if(db(e))return new Nw(t,this.children);{const n=sb(e),r=(this.children.get(n)||new Nw(null)).set(ab(e),t),i=this.children.insert(n,r);return new Nw(this.value,i)}}remove(e){if(db(e))return this.children.isEmpty()?new Nw(null):new Nw(null,this.children);{const t=sb(e),n=this.children.get(t);if(n){const r=n.remove(ab(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Nw(null):new Nw(this.value,i)}return this}}get(e){if(db(e))return this.value;{const t=sb(e),n=this.children.get(t);return n?n.get(ab(e)):null}}setTree(e,t){if(db(e))return t;{const n=sb(e),r=(this.children.get(n)||new Nw(null)).setTree(ab(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Nw(this.value,i)}}fold(e){return this.fold_(ib(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(hb(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,ib(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(db(e))return null;{const r=sb(e),i=this.children.get(r);return i?i.findOnPath_(ab(e),hb(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ib(),t)}foreachOnPath_(e,t,n){if(db(e))return this;{this.value&&n(t,this.value);const r=sb(e),i=this.children.get(r);return i?i.foreachOnPath_(ab(e),hb(t,r),n):new Nw(null)}}foreach(e){this.foreach_(ib(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(hb(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Dw{constructor(e){this.writeTree_=e}static empty(){return new Dw(new Nw(null))}}function Ow(e,t,n){if(db(t))return new Dw(new Nw(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=fb(i,t);return s=s.updateChild(o,n),new Dw(e.writeTree_.set(i,s))}{const r=new Nw(n),i=e.writeTree_.setTree(t,r);return new Dw(i)}}}function Mw(e,t,n){let r=e;return Tv(n,(e,n)=>{r=Ow(r,hb(t,e),n)}),r}function Lw(e,t){if(db(t))return Dw.empty();{const n=e.writeTree_.setTree(t,new Nw(null));return new Dw(n)}}function Fw(e,t){return null!=jw(e,t)}function jw(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(fb(n.path,t)):null}function Uw(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Vb,(e,n)=>{t.push(new Eb(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new Eb(e,n.value))}),t}function Vw(e,t){if(db(t))return e;{const n=jw(e,t);return new Dw(null!=n?new Nw(n):e.writeTree_.subtree(t))}}function zw(e){return e.writeTree_.isEmpty()}function Bw(e,t){return qw(ib(),e.writeTree_,t)}function qw(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?(Dt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=qw(hb(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(hb(e,".priority"),r)),n}}function Hw(e,t){return r_(t,e)}function Ww(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);Dt(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Gw(t,r.path)?i=!1:gb(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=Qw(e.allWrites,Kw,ib()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Lw(e.visibleWrites,r.path);else{Tv(r.children,t=>{e.visibleWrites=Lw(e.visibleWrites,hb(r.path,t))})}return!0}return!1}function Gw(e,t){if(e.snap)return gb(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&gb(hb(e.path,n),t))return!0;return!1}function Kw(e){return e.visible}function Qw(e,t,n){let r=Dw.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)gb(n,e)?(t=fb(n,e),r=Ow(r,t,s.snap)):gb(e,n)&&(t=fb(e,n),r=Ow(r,ib(),s.snap.getChild(t)));else{if(!s.children)throw Ot("WriteRecord should have .snap or .children");if(gb(n,e))t=fb(n,e),r=Mw(r,t,s.children);else if(gb(e,n))if(t=fb(e,n),db(t))r=Mw(r,ib(),s.children);else{const e=vn(s.children,sb(t));if(e){const n=e.getChild(ab(t));r=Ow(r,ib(),n)}}}}}return r}function Yw(e,t,n,r,i){if(r||i){const s=Vw(e.visibleWrites,t);if(!i&&zw(s))return n;if(i||null!=n||Fw(s,ib())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(gb(e.path,t)||gb(t,e.path))};return Bw(Qw(e.allWrites,s,t),n||Qb.EMPTY_NODE)}return null}{const r=jw(e.visibleWrites,t);if(null!=r)return r;{const r=Vw(e.visibleWrites,t);if(zw(r))return n;if(null!=n||Fw(r,ib())){return Bw(r,n||Qb.EMPTY_NODE)}return null}}}function Xw(e,t,n,r){return Yw(e.writeTree,e.treePath,t,n,r)}function Jw(e,t){return function(e,t,n){let r=Qb.EMPTY_NODE;const i=jw(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Vb,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=Vw(e.visibleWrites,t);return n.forEachChild(Vb,(e,t)=>{const n=Bw(Vw(i,new rb(e)),t);r=r.updateImmediateChild(e,n)}),Uw(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return Uw(Vw(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function Zw(e,t,n,r){return function(e,t,n,r,i){Dt(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=hb(t,n);if(Fw(e.visibleWrites,s))return null;{const t=Vw(e.visibleWrites,s);return zw(t)?i.getChild(n):Bw(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function $w(e,t){return function(e,t){return jw(e.visibleWrites,t)}(e.writeTree,hb(e.treePath,t))}function e_(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Vw(e.visibleWrites,t),c=jw(l,ib());if(null!=c)a=c;else{if(null==n)return[];a=Bw(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function t_(e,t,n){return function(e,t,n,r){const i=hb(t,n),s=jw(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Bw(Vw(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function n_(e,t){return r_(hb(e.treePath,t),e.writeTree)}function r_(e,t){return{treePath:e,writeTree:t}}class i_{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Dt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Dt(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,nw(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,tw(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ew(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ot("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,nw(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const s_=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class o_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Ew(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return t_(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pw(this.viewCache_),i=e_(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function a_(e,t,n,r,i){const s=new i_;let o,a;if(n.type===yw.OVERWRITE){const l=n;l.source.fromUser?o=u_(e,t,l.path,l.snap,r,i,s):(Dt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!db(l.path),o=c_(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===yw.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=hb(n,r);h_(t,sb(c))&&(a=u_(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=hb(n,r);h_(t,sb(c))||(a=u_(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):(Dt(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=f_(e,t,l.path,l.children,r,i,a,s))}else if(n.type===yw.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=$w(r,n))return t;{const a=new o_(r,t,i),l=t.eventCache.getNode();let c;if(db(n)||".priority"===sb(n)){let n;if(t.serverCache.isFullyInitialized())n=Xw(r,Pw(t));else{const e=t.serverCache.getNode();Dt(e instanceof Qb,"serverChildren would be complete if leaf node"),n=Jw(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=sb(n);let u=t_(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,ab(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Qb.EMPTY_NODE,ab(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Xw(r,Pw(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=$w(r,ib()),Aw(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=$w(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(db(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return c_(e,t,n,l.getNode().getChild(n),i,s,a,o);if(db(n)){let r=new Nw(null);return l.getNode().forEachChild(Ab,(e,t)=>{r=r.set(new rb(e),t)}),f_(e,t,n,r,i,s,a,o)}return t}{let c=new Nw(null);return r.foreach((e,t)=>{const r=hb(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),f_(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==yw.LISTEN_COMPLETE)throw Ot("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=kw(t,s.getNode(),s.isFullyInitialized()||db(n),s.isFiltered());return l_(e,o,n,r,s_,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Iw(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push($b(Iw(t)))}}(t,o,l),{viewCache:o,changes:l}}function l_(e,t,n,r,i,s){const o=t.eventCache;if(null!=$w(r,n))return t;{let a,l;if(db(n))if(Dt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Pw(t),i=Jw(r,n instanceof Qb?n:Qb.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Xw(r,Pw(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=sb(n);if(".priority"===c){Dt(1===ob(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Zw(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=ab(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Zw(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=t_(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Aw(t,a,o.isFullyInitialized()||db(n),e.filter.filtersNodes())}}function c_(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(db(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=sb(n);if(!l.isCompleteForPath(n)&&ob(n)>1)return t;const i=ab(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,s_,null)}const h=kw(t,c,l.isFullyInitialized()||db(n),u.filtersNodes());return l_(e,h,n,i,new o_(i,h,s),a)}function u_(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new o_(i,t,s);if(db(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Aw(t,c,!0,e.filter.filtersNodes());else{const i=sb(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Aw(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=ab(n),c=a.getNode().getImmediateChild(i);let h;if(db(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===lb(s)&&e.getChild(ub(s)).isEmpty()?e:e.updateChild(s,r):Qb.EMPTY_NODE}if(c.equals(h))l=t;else{l=Aw(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function h_(e,t){return e.eventCache.isCompleteForChild(t)}function d_(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function f_(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=db(n)?r:new Nw(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=d_(0,t.serverCache.getNode().getImmediateChild(n),r);c=c_(e,c,new rb(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=d_(0,t.serverCache.getNode().getImmediateChild(n),r);c=c_(e,c,new rb(n),l,i,s,o,a)}}),c}class p_{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new rw(n.getIndex()),i=(s=n).loadsAllData()?new rw(s.getIndex()):s.hasLimit()?new sw(s):new iw(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Qb.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Qb.EMPTY_NODE,a.getNode(),null),u=new Ew(l,o.isFullyInitialized(),r.filtersNodes()),h=new Ew(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Tw(h,u),this.eventGenerator_=new Cw(this.query_)}get query(){return this.query_}}function m_(e,t){const n=Pw(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!db(t)&&!n.getImmediateChild(sb(t)).isEmpty())?n.getChild(t):null}function g_(e){return 0===e.eventRegistrations_.length}function y_(e,t,n){const r=[];if(n){Dt(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function v_(e,t,n,r){t.type===yw.MERGE&&null!==t.source.queryId&&(Dt(Pw(e.viewCache_),"We should always have a full cache before handling merges"),Dt(Iw(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=a_(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Dt(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Dt(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Dt(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,b_(e,s.changes,s.viewCache.eventCache.getNode(),null)}function b_(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),xw(e,i,"child_removed",t,r,n),xw(e,i,"child_added",t,r,n),xw(e,i,"child_moved",s,r,n),xw(e,i,"child_changed",t,r,n),xw(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let w_,__;class S_{constructor(){this.views=new Map}}function E_(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Dt(null!=s,"SyncTree gave us an op for an invalid query."),v_(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(v_(s,t,n,r));return i}}function C_(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Xw(n,i?r:null),s=!1;e?s=!0:r instanceof Qb?(e=Jw(n,r),s=!1):(e=Qb.EMPTY_NODE,s=!1);const o=Tw(new Ew(e,s,!1),new Ew(r,i,!1));return new p_(t,o)}return o}function x_(e,t,n,r,i,s){const o=C_(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Vb,(e,t)=>{r.push(ew(e,t))});return n.isFullyInitialized()&&r.push($b(n.getNode())),b_(e,r,n.getNode(),t)}(o,n)}function T_(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=R_(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(y_(c,n,r)),g_(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(y_(t,n,r)),g_(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!R_(e)&&s.push(new(Dt(w_,"Reference.ts has not been loaded"),w_)(t._repo,t._path)),{removed:s,events:o}}function A_(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function k_(e,t){let n=null;for(const r of e.views.values())n=n||m_(r,t);return n}function I_(e,t){if(t._queryParams.loadsAllData())return N_(e);{const n=t._queryIdentifier;return e.views.get(n)}}function P_(e,t){return null!=I_(e,t)}function R_(e){return null!=N_(e)}function N_(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let D_=1;class O_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nw(null),this.pendingWriteTree_={visibleWrites:Dw.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function M_(e,t,n,r,i){return function(e,t,n,r,i){Dt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ow(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?H_(e,new _w({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function L_(e,t,n,r){!function(e,t,n,r){Dt(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Mw(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Nw.fromObject(n);return H_(e,new Sw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function F_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Ww(e.pendingWriteTree_,t)){let t=new Nw(null);return null!=r.snap?t=t.set(ib(),!0):Tv(r.children,e=>{t=t.set(new rb(e),!0)}),H_(e,new bw(r.path,t,n))}return[]}function j_(e,t,n){return H_(e,new _w({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function U_(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||P_(o,t))){const l=T_(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>R_(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&R_(t)){return[N_(t)]}{let e=[];return t&&(e=A_(t)),Tv(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=K_(e,r);e.listenProvider_.startListening($_(i),Q_(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening($_(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(Y_(t));e.listenProvider_.stopListening($_(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Y_(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function V_(e,t,n,r){const i=X_(e,r);if(null!=i){const r=J_(i),s=r.path,o=r.queryId,a=fb(s,t);return Z_(e,s,new _w(vw(o),a,n))}return[]}function z_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=fb(e,i);s=s||k_(t,n),o=o||R_(t)});let a,l=e.syncPointTree_.get(i);if(l?(o=o||R_(l),s=s||k_(l,ib())):(l=new S_,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=Qb.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=k_(t,ib());n&&(s=s.updateImmediateChild(e,n))})}const c=P_(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Y_(t);Dt(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=D_++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=x_(l,t,n,Hw(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=I_(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Q_(e,t),s=K_(e,n),o=e.listenProvider_.startListening($_(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Dt(!R_(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!db(e)&&t&&R_(t))return[N_(t).query];{let e=[];return t&&(e=e.concat(A_(t).map(e=>e.query))),Tv(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening($_(r),Q_(e,r))}}return o}(e,t,n))}return u}function B_(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=k_(n,fb(e,t));if(r)return r});return Yw(r,t,i,n,!0)}function q_(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=fb(e,n);r=r||k_(t,i)});let i=e.syncPointTree_.get(n);i?r=r||k_(i,ib()):(i=new S_,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Ew(r,!0,!1):null;return function(e){return Iw(e.viewCache_)}(C_(i,t,Hw(e.pendingWriteTree_,t._path),s?o.getNode():Qb.EMPTY_NODE,s))}function H_(e,t){return W_(t,e.syncPointTree_,null,Hw(e.pendingWriteTree_,ib()))}function W_(e,t,n,r){if(db(e.path))return G_(e,t,n,r);{const i=t.get(ib());null==n&&null!=i&&(n=k_(i,ib()));let s=[];const o=sb(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=n_(r,o);s=s.concat(W_(a,l,e,t))}return i&&(s=s.concat(E_(i,e,r,n))),s}}function G_(e,t,n,r){const i=t.get(ib());null==n&&null!=i&&(n=k_(i,ib()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=n_(r,t),l=e.operationForChild(t);l&&(s=s.concat(G_(l,i,o,a)))}),i&&(s=s.concat(E_(i,e,r,n))),s}function K_(e,t){const n=t.query,r=Q_(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Qb.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=X_(e,n);if(r){const n=J_(r),i=n.path,s=n.queryId,o=fb(i,t);return Z_(e,i,new ww(vw(s),o))}return[]}(e,n._path,r):function(e,t){return H_(e,new ww({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return U_(e,n,null,r)}}}}function Q_(e,t){const n=Y_(t);return e.queryToTagMap.get(n)}function Y_(e){return e._path.toString()+"$"+e._queryIdentifier}function X_(e,t){return e.tagToQueryMap.get(t)}function J_(e){const t=e.indexOf("$");return Dt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new rb(e.substr(0,t))}}function Z_(e,t,n){const r=e.syncPointTree_.get(t);Dt(r,"Missing sync point for query tag that we're tracking");return E_(r,n,Hw(e.pendingWriteTree_,t),null)}function $_(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Dt(__,"Reference.ts has not been loaded"),__)(e._repo,e._path):e}class eS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new eS(t)}node(){return this.node_}}class tS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=hb(this.path_,e);return new tS(this.syncTree_,t)}node(){return B_(this.syncTree_,this.path_)}}const nS=function(e,t,n){return e&&"object"===typeof e?(Dt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?rS(e[".sv"],t,n):"object"===typeof e[".sv"]?iS(e[".sv"],t):void Dt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},rS=function(e,t,n){if("timestamp"===e)return n.timestamp;Dt(!1,"Unexpected server value: "+e)},iS=function(e,t,n){e.hasOwnProperty("increment")||Dt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Dt(!1,"Unexpected increment value: "+r);const i=t.node();if(Dt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},sS=function(e,t,n,r){return aS(t,new tS(n,e),r)},oS=function(e,t,n){return aS(e,new eS(t),n)};function aS(e,t,n){const r=e.getPriority().val(),i=nS(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=nS(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Ub(s,Xb(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Ub(i))),r.forEachChild(Vb,(e,r)=>{const i=aS(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class lS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function cS(e,t){let n=t instanceof rb?t:new rb(t),r=e,i=sb(n);for(;null!==i;){const e=vn(r.node.children,i)||{children:{},childCount:0};r=new lS(i,r,e),n=ab(n),i=sb(n)}return r}function uS(e){return e.node.value}function hS(e,t){e.node.value=t,gS(e)}function dS(e){return e.node.childCount>0}function fS(e,t){Tv(e.node.children,(n,r)=>{t(new lS(n,e,r))})}function pS(e,t,n,r){n&&!r&&t(e),fS(e,e=>{pS(e,t,!0,r)}),n&&r&&t(e)}function mS(e){return new rb(null===e.parent?e.name:mS(e.parent)+"/"+e.name)}function gS(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===uS(e)&&!dS(e)}(n),i=yn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,gS(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,gS(e))}(e.parent,e.name,e)}const yS=/[\[\].#$\/\u0000-\u001F\u007F]/,vS=/[\[\].#$\u0000-\u001F\u007F]/,bS=10485760,wS=function(e){return"string"===typeof e&&0!==e.length&&!yS.test(e)},_S=function(e){return"string"===typeof e&&0!==e.length&&!vS.test(e)},SS=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!vv(e)||e&&"object"===typeof e&&yn(e,".sv")},ES=function(e,t,n,r){r&&void 0===t||CS(In(e,"value"),t,n)},CS=function(e,t,n){const r=n instanceof rb?new yb(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+bb(r));if("function"===typeof t)throw new Error(e+"contains a function "+bb(r)+" with contents = "+t.toString());if(vv(t))throw new Error(e+"contains "+t.toString()+" "+bb(r));if("string"===typeof t&&t.length>bS/3&&Pn(t)>bS)throw new Error(e+"contains a string greater than "+bS+" utf8 bytes "+bb(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Tv(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!wS(t)))throw new Error(e+" contains an invalid key ("+t+") "+bb(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Pn(t),vb(e)}(r,t),CS(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Pn(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+bb(r)+" in addition to actual children.")}},xS=function(e,t,n,r){if(r&&void 0===t)return;const i=In(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Tv(t,(e,t)=>{const r=new rb(e);if(CS(i,t,hb(n,r)),".priority"===lb(r)&&!SS(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=cb(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!wS(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(pb);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&gb(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},TS=function(e,t,n){if(!n||void 0!==t){if(vv(t))throw new Error(In(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!SS(t))throw new Error(In(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},AS=function(e,t,n,r){if((!r||void 0!==n)&&!_S(n))throw new Error(In(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kS=function(e,t){if(".info"===sb(t))throw new Error(e+" failed = Can't modify data under /.info/")},IS=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!wS(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),_S(e)}(n))throw new Error(In(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class PS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function RS(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||mb(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function NS(e,t,n){RS(e,n),OS(e,e=>mb(e,t))}function DS(e,t,n){RS(e,n),OS(e,e=>gb(e,t)||gb(t,e))}function OS(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(MS(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function MS(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();uv&&fv("event: "+n.toString()),Pv(r)}}}const LS="repo_interrupt";class FS{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hw(),this.transactionQueueTree_=new lS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jS(e,t,n){if(e.stats_=Wv(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new cw(e.repoInfo_,(t,n,r,i)=>{zS(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>BS(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mn(n)}catch(ND){throw new Error("Invalid authOverride provided: "+ND)}}e.persistentConnection_=new Sb(e.repoInfo_,t,(t,n,r,i)=>{zS(e,t,n,r,i)},t=>{BS(e,t)},t=>{!function(e,t){Tv(t,(t,n)=>{qS(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return Hv[n]||(Hv[n]=t()),Hv[n]}(e.repoInfo_,()=>new gw(e.stats_,e.server_)),e.infoData_=new uw,e.infoSyncTree_=new O_({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=j_(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),qS(e,"connected",!1),e.serverSyncTree_=new O_({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);DS(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function US(e){const t=e.infoData_.getNode(new rb(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function VS(e){return(t=(t={timestamp:US(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function zS(e,t,n,r,i){e.dataUpdateCount++;const s=new rb(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=wn(n,e=>Xb(e));o=function(e,t,n,r){const i=X_(e,r);if(i){const r=J_(i),s=r.path,o=r.queryId,a=fb(s,t),l=Nw.fromObject(n);return Z_(e,s,new Sw(vw(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Xb(n);o=V_(e.serverSyncTree_,s,t,i)}else if(r){const t=wn(n,e=>Xb(e));o=function(e,t,n){const r=Nw.fromObject(n);return H_(e,new Sw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Xb(n);o=j_(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=eE(e,s)),DS(e.eventQueue_,a,o)}function BS(e,t){qS(e,"connected",t),!1===t&&function(e){XS(e,"onDisconnectEvents");const t=VS(e),n=hw();pw(e.onDisconnect_,ib(),(r,i)=>{const s=sS(r,i,e.serverSyncTree_,t);dw(n,r,s)});let r=[];pw(n,ib(),(t,n)=>{r=r.concat(j_(e.serverSyncTree_,t,n));const i=sE(e,t);eE(e,i)}),e.onDisconnect_=hw(),DS(e.eventQueue_,ib(),r)}(e)}function qS(e,t,n){const r=new rb("/.info/"+t),i=Xb(n);e.infoData_.updateSnapshot(r,i);const s=j_(e.infoSyncTree_,r,i);DS(e.eventQueue_,r,s)}function HS(e){return e.nextWriteId_++}function WS(e,t,n,r,i){XS(e,"set",{path:t.toString(),value:n,priority:r});const s=VS(e),o=Xb(n,r),a=B_(e.serverSyncTree_,t),l=oS(o,a,s),c=HS(e),u=M_(e.serverSyncTree_,t,l,c,!0);RS(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||yv("set at "+t+" failed: "+n);const o=F_(e.serverSyncTree_,c,!s);DS(e.eventQueue_,t,o),JS(e,i,n,r)});const h=sE(e,t);eE(e,h),DS(e.eventQueue_,h,[])}function GS(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&fw(e.onDisconnect_,t),JS(e,n,r,i)})}function KS(e,t,n,r){const i=Xb(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,s)=>{"ok"===n&&dw(e.onDisconnect_,t,i),JS(e,r,n,s)})}function QS(e,t,n){let r;r=".info"===sb(t._path)?U_(e.infoSyncTree_,t,n):U_(e.serverSyncTree_,t,n),NS(e.eventQueue_,t._path,r)}function YS(e){e.persistentConnection_&&e.persistentConnection_.interrupt(LS)}function XS(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];fv(t,...r)}function JS(e,t,n,r){t&&Pv(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function ZS(e,t,n){return B_(e.serverSyncTree_,t,n)||Qb.EMPTY_NODE}function $S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||iE(e,t),uS(t)){const n=nE(e,t);Dt(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=ZS(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Dt(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=fb(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{XS(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(F_(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();iE(e,cS(e.transactionQueueTree_,t)),$S(e,e.transactionQueueTree_),DS(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Pv(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{yv("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}eE(e,t)}},o)}(e,mS(t),n)}else dS(t)&&fS(t,t=>{$S(e,t)})}function eE(e,t){const n=tE(e,t),r=mS(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=fb(n,s.path);let c,u=!1;if(Dt(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,i=i.concat(F_(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",i=i.concat(F_(e.serverSyncTree_,s.currentWriteId,!0));else{const n=ZS(e,s.path,o);s.currentInputSnapshot=n;const r=t[a].update(n.val());if(void 0!==r){CS("transaction failed: Data returned ",r,s.path);let t=Xb(r);"object"===typeof r&&null!=r&&yn(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=VS(e),c=oS(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=HS(e),o.splice(o.indexOf(a),1),i=i.concat(M_(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(F_(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",i=i.concat(F_(e.serverSyncTree_,s.currentWriteId,!0))}DS(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(c),!1,null))))}iE(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Pv(r[a]);$S(e,e.transactionQueueTree_)}(e,nE(e,n),r),r}function tE(e,t){let n,r=e.transactionQueueTree_;for(n=sb(t);null!==n&&void 0===uS(r);)r=cS(r,n),n=sb(t=ab(t));return r}function nE(e,t){const n=[];return rE(e,t,n),n.sort((e,t)=>e.order-t.order),n}function rE(e,t,n){const r=uS(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);fS(t,t=>{rE(e,t,n)})}function iE(e,t){const n=uS(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,hS(t,n.length>0?n:void 0)}fS(t,t=>{iE(e,t)})}function sE(e,t){const n=mS(tE(e,t)),r=cS(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{oE(e,t)}),oE(e,r),pS(r,t=>{oE(e,t)}),n}function oE(e,t){const n=uS(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Dt(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Dt(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(F_(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?hS(t,void 0):n.length=s+1,DS(e.eventQueue_,mS(t),i);for(let e=0;e<r.length;e++)Pv(r[e])}}const aE=function(e,t){const n=lE(e),r=n.namespace;"firebase.com"===n.domain&&gv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||gv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Vv(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new rb(n.pathString)}},lE=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(ND){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):yv("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},cE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",uE=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=cE.charAt(n%64),n=Math.floor(n/64);Dt(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=cE.charAt(t[i]);return Dt(20===o.length,"nextPushId: Length should be 20."),o}}();class hE{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mn(this.snapshot.exportVal())}}class dE{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fE{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Dt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class pE{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Xt;return GS(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){kS("OnDisconnect.remove",this._path);const e=new Xt;return KS(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){kS("OnDisconnect.set",this._path),ES("OnDisconnect.set",e,this._path,!1);const t=new Xt;return KS(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){kS("OnDisconnect.setWithPriority",this._path),ES("OnDisconnect.setWithPriority",e,this._path,!1),TS("OnDisconnect.setWithPriority",t,!1);const n=new Xt;return function(e,t,n,r,i){const s=Xb(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,r)=>{"ok"===n&&dw(e.onDisconnect_,t,s),JS(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){kS("OnDisconnect.update",this._path),xS("OnDisconnect.update",e,this._path,!1);const t=new Xt;return function(e,t,n,r){if(bn(n))return fv("onDisconnect().update() called with empty data.  Don't do anything."),void JS(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&Tv(n,(n,r)=>{const i=Xb(r);dw(e.onDisconnect_,hb(t,n),i)}),JS(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class mE{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return db(this._path)?null:lb(this._path)}get ref(){return new gE(this._repo,this._path)}get _queryIdentifier(){const e=lw(this._queryParams),t=Cv(e);return"{}"===t?"default":t}get _queryObject(){return lw(this._queryParams)}isEqual(e){if(!((e=Rn(e))instanceof mE))return!1;const t=this._repo===e._repo,n=mb(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class gE extends mE{constructor(e,t){super(e,t,new ow,!1)}get parent(){const e=ub(this._path);return null===e?null:new gE(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class yE{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new rb(e),n=bE(this.ref,e);return new yE(this._node.getChild(t),n,Vb)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new yE(n,bE(this.ref,t),Vb)))}hasChild(e){const t=new rb(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vE(e,t){return(e=Rn(e))._checkNotDeleted("ref"),void 0!==t?bE(e._root,t):e._root}function bE(e,t){var n,r,i,s;return null===sb((e=Rn(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),AS(n,r,i,s)):AS("child","path",t,!1),new gE(e._repo,hb(e._path,t))}function wE(e){return kS("remove",e._path),_E(e,null)}function _E(e,t){e=Rn(e),kS("set",e._path),ES("set",t,e._path,!1);const n=new Xt;return WS(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function SE(e,t){xS("update",t,e._path,!1);const n=new Xt;return function(e,t,n,r){XS(e,"update",{path:t.toString(),value:n});let i=!0;const s=VS(e),o={};if(Tv(n,(n,r)=>{i=!1,o[n]=sS(hb(t,n),Xb(r),e.serverSyncTree_,s)}),i)fv("update() called with empty data.  Don't do anything."),JS(0,r,"ok",void 0);else{const i=HS(e),s=L_(e.serverSyncTree_,t,o,i);RS(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||yv("update at "+t+" failed: "+n);const a=F_(e.serverSyncTree_,i,!o),l=a.length>0?eE(e,t):t;DS(e.eventQueue_,l,a),JS(0,r,n,s)}),Tv(n,n=>{const r=sE(e,hb(t,n));eE(e,r)}),DS(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function EE(e){e=Rn(e);const t=new fE(()=>{}),n=new CE(t);return function(e,t,n){const r=q_(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(r=>{const i=Xb(r).withIndex(t._queryParams.getIndex());let s;if(z_(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=j_(e.serverSyncTree_,t._path,i);else{const n=Q_(e.serverSyncTree_,t);s=V_(e.serverSyncTree_,t._path,i,n)}return DS(e.eventQueue_,t._path,s),U_(e.serverSyncTree_,t,n,null,!0),i},n=>(XS(e,"get for query "+mn(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new yE(t,new gE(e._repo,e._path),e._queryParams.getIndex()))}class CE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new hE("value",this,new yE(e.snapshotNode,new gE(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dE(this,e,t):null}matches(e){return e instanceof CE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xE{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dE(this,e,t):null}createEvent(e,t){Dt(null!=e.childName,"Child events should have a childName.");const n=bE(new gE(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new hE(e.type,this,new yE(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof xE&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function TE(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{QS(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new fE(n,s||void 0),a="value"===t?new CE(o):new xE(t,o);return function(e,t,n){let r;r=".info"===sb(t._path)?z_(e.infoSyncTree_,t,n):z_(e.serverSyncTree_,t,n),NS(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>QS(e._repo,e,a)}function AE(e,t,n,r){return TE(e,"value",t,n,r)}!function(e){Dt(!w_,"__referenceConstructor has already been defined"),w_=e}(gE),function(e){Dt(!__,"__referenceConstructor has already been defined"),__=e}(gE);const kE={};let IE=!1;function PE(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||gv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fv("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=aE(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/CodeCollab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STORAGE_BUCKET:"codecollab-51e34.firebasestorage.app",REACT_APP_AUTH_DOMAIN:"codecollab-51e34.firebaseapp.com",REACT_APP_PROJECT_ID:"codecollab-51e34",REACT_APP_APP_ID:"1:843472885618:web:39e387dd0fdc16c5ff6feb",REACT_APP_API_KEY:"AIzaSyBsa4EXmMMdQjMccbG17wBPMd9iQsb4KJY",REACT_APP_MESSAGING_SENDER_ID:"843472885618"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=aE(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Ov(Ov.OWNER):new Dv(e.name,e.options,t);IS("Invalid Firebase Database URL",l),db(l.path)||gv("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=kE[t.name];i||(i={},kE[t.name]=i);let s=i[e.toURLString()];s&&gv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new FS(e,IE,n,r),i[e.toURLString()]=s,s}(c,e,u,new Nv(e,n));return new RE(h,e)}class RE{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gE(this._repo,ib())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=kE[t];n&&n[e.key]===e||gv("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),YS(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&gv("Cannot call "+e+" on a deleted database.")}}const NE={".sv":"timestamp"};function DE(){return NE}Sb.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Sb.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){ev(Gr),zr(new Nn("database",(e,t)=>{let{instanceIdentifier:n}=t;return PE(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),Yr(Jy,Zy,e),Yr(Jy,Zy,"esm2020")}();const OE=Kr({apiKey:"AIzaSyBsa4EXmMMdQjMccbG17wBPMd9iQsb4KJY",authDomain:"codecollab-51e34.firebaseapp.com",projectId:"codecollab-51e34",storageBucket:"codecollab-51e34.firebasestorage.app",messagingSenderId:"843472885618",appId:"1:843472885618:web:39e387dd0fdc16c5ff6feb",measurementId:"G-4L8MQFL4GT",databaseURL:"https://codecollab-51e34-default-rtdb.asia-southeast1.firebasedatabase.app/"}),ME=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr();const t=Br(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Br(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(_n(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;pi(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ca,persistence:[Oo,po,bo]}),r=Yt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ka)return;const r=null===t||void 0===t?void 0:t.token;Ia!==r&&(Ia=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Rn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Rn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Gt("auth");return s&&Ls(n,"http://".concat(s)),n}(OE),LE=function(e,t){const n="object"==typeof e?e:Qr(),r="string"==typeof e?e:t||iu,i=Br(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Kt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ll(e,xg);const i=Jt(t),s=e._getSettings(),o=m(m({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(Zt("https://".concat(a)),nn("Firestore",!0)),s.host!==Sg&&s.host!==a&&el("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=m(m({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!_n(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Qa.MOCK_USER;else{var c;t=$t(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new al(ol.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Qa(i)}e._authCredentials=new hl(new cl(t,n))}}(i,...e)}return i}(OE),FE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr(),t=arguments.length>1?arguments[1]:void 0;const n=Br(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Kt("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Rn(e),e._checkNotDeleted("useEmulator");const i="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&_n(r,s.repoInfo_.emulatorOptions))return;gv("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&gv('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ov(Ov.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:$t(r.mockUserToken,e.app.options.projectId);o=new Ov(t)}Jt(t)&&(Zt(t),nn("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=Jt(t.substring(0,i));e.repoInfo_=new Vv(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}(n,...e)}return n}(OE);var jE=n(579);const UE=(0,a.createContext)();function VE(){return(0,a.useContext)(UE)}function zE(e){let{children:t}=e;const[n,r]=(0,a.useState)(null),[i,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{const e=function(e,t,n,r){return Rn(e).onAuthStateChanged(t,n,r)}(ME,async e=>{if(e){const n=Pg(LE,"users",e.uid),i=await Uy(n);if(i.exists())s(i.data());else try{await By(n,{uid:e.uid,email:e.email,displayName:e.displayName,avatar:e.photoURL,createdAt:Qy(),isProfileComplete:!1,skillLevel:"Beginner"});const t=await Uy(n);s(t.data())}catch(t){console.error("Error creating user document:",t)}r(e)}else r(null),s(null);l(!1)});return e},[]);const c={currentUser:n,userProfile:i,loading:o,signInWithGoogle:function(){const e=new $s;return async function(e,t,n){if(qr(e.app))return Promise.reject(mi(e,"operation-not-supported-in-this-environment"));const r=Cs(e);vi(e,t,Xs);const i=Vo(r,n);return new Ko(r,"signInViaPopup",t,i).executeNotNull()}(ME,e)},updateProfile:async function(e,t){const n=Pg(LE,"users",e);try{await qy(n,t);const e=await Uy(n);return s(e.data()),!0}catch(r){return console.error("Error updating profile:",r),!1}}};return(0,jE.jsx)(UE.Provider,{value:c,children:!o&&t})}const BE=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qE=(()=>new Set(BE))(),HE=e=>180*e/Math.PI,WE=e=>{const t=HE(Math.atan2(e[1],e[0]));return KE(t)},GE={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:WE,rotateZ:WE,skewX:e=>HE(Math.atan(e[1])),skewY:e=>HE(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},KE=e=>((e%=360)<0&&(e+=360),e),QE=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),YE=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),XE={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:QE,scaleY:YE,scale:e=>(QE(e)+YE(e))/2,rotateX:e=>KE(HE(Math.atan2(e[6],e[5]))),rotateY:e=>KE(HE(Math.atan2(-e[2],e[0]))),rotateZ:WE,rotate:WE,skewX:e=>HE(Math.atan(e[4])),skewY:e=>HE(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function JE(e){return e.includes("scale")?1:0}function ZE(e,t){if(!e||"none"===e)return JE(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,i;if(n)r=XE,i=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=GE,i=t}if(!i)return JE(t);const s=r[t],o=i[1].split(",").map($E);return"function"===typeof s?s(o):o[s]}function $E(e){return parseFloat(e.trim())}const eC=e=>t=>"string"===typeof t&&t.startsWith(e),tC=eC("--"),nC=eC("var(--"),rC=e=>!!nC(e)&&iC.test(e.split("/*")[0].trim()),iC=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function sC(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}const oC=(e,t,n)=>e+(t-e)*n;function aC(e){return void 0===e||1===e}function lC(e){let{scale:t,scaleX:n,scaleY:r}=e;return!aC(t)||!aC(n)||!aC(r)}function cC(e){return lC(e)||uC(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function uC(e){return hC(e.x)||hC(e.y)}function hC(e){return e&&"0%"!==e}function dC(e,t,n){return n+t*(e-n)}function fC(e,t,n,r,i){return void 0!==i&&(e=dC(e,i,r)),dC(e,n,r)+t}function pC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=fC(e.min,t,n,r,i),e.max=fC(e.max,t,n,r,i)}function mC(e,t){let{x:n,y:r}=t;pC(e.x,n.translate,n.scale,n.originPoint),pC(e.y,r.translate,r.scale,r.originPoint)}const gC=.999999999999,yC=1.0000000000001;function vC(e,t){e.min=e.min+t,e.max=e.max+t}function bC(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;pC(e,t,n,oC(e.min,e.max,i),r)}function wC(e,t){bC(e.x,t.x,t.scaleX,t.scale,t.originX),bC(e.y,t.y,t.scaleY,t.scale,t.originY)}function _C(e,t){return sC(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const SC=new Set(["width","height","top","left","right","bottom",...BE]),EC=(e,t,n)=>n>t?t:n<e?e:n,CC={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},xC=m(m({},CC),{},{transform:e=>EC(0,1,e)}),TC=m(m({},CC),{},{default:1}),AC=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),kC=AC("deg"),IC=AC("%"),PC=AC("px"),RC=AC("vh"),NC=AC("vw"),DC=(()=>m(m({},IC),{},{parse:e=>IC.parse(e)/100,transform:e=>IC.transform(100*e)}))(),OC=e=>t=>t.test(e),MC=[CC,PC,IC,kC,NC,RC,{test:e=>"auto"===e,parse:e=>e}],LC=e=>MC.find(OC(e));const FC=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),jC=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function UC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,i]=function(e){const t=jC.exec(e);if(!t)return[,];const[,n,r,i]=t;return["--".concat(null!==n&&void 0!==n?n:r),i]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return FC(e)?parseFloat(e):e}return rC(i)?UC(i,t,n+1):i}const VC=e=>e===CC||e===PC,zC=new Set(["x","y","z"]),BC=BE.filter(e=>!zC.has(e));const qC={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return ZE(n,"x")},y:(e,t)=>{let{transform:n}=t;return ZE(n,"y")}};qC.translateX=qC.x,qC.translateY=qC.y;const HC=e=>e,WC={},GC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],KC={value:null,addProjectionMetrics:null};function QC(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=GC.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){o.has(t)&&(u.schedule(t),e()),l++,t(a)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{a=e,i?s=!0:(i=!0,[n,r]=[r,n],n.forEach(c),t&&KC.value&&KC.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(e)))}};return u}(s,t?n:void 0),e),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:d,render:f,postRender:p}=o,m=()=>{const s=WC.useManualTiming?i.timestamp:performance.now();n=!1,WC.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},g=GC.reduce((t,s)=>{const a=o[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(m)),a.schedule(t,s,o)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<GC.length;t++)o[GC[t]].cancel(e)},state:i,steps:o}}const{schedule:YC,cancel:XC,state:JC,steps:ZC}=QC("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:HC,!0),$C=new Set;let ex=!1,tx=!1,nx=!1;function rx(){if(tx){const e=Array.from($C).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return BC.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[r,i]=t;null===(n=e.getValue(r))||void 0===n||n.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}tx=!1,ex=!1,$C.forEach(e=>e.complete(nx)),$C.clear()}function ix(){$C.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(tx=!0)})}class sx{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?($C.add(this),ex||(ex=!0,YC.read(ix),YC.resolveKeyframes(rx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=null===r||void 0===r?void 0:r.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,s);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===i&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$C.delete(this)}cancel(){"scheduled"===this.state&&($C.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const ox=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function ax(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||ox(e))}const lx=e=>Math.round(1e5*e)/1e5,cx=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const ux=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,hx=(e,t)=>n=>Boolean("string"===typeof n&&ux.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),dx=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[i,s,o,a]=r.match(cx);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},fx=m(m({},CC),{},{transform:e=>Math.round((e=>EC(0,255,e))(e))}),px={test:hx("rgb","red"),parse:dx("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+fx.transform(t)+", "+fx.transform(n)+", "+fx.transform(r)+", "+lx(xC.transform(i))+")"}};const mx={test:hx("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:px.transform},gx={test:hx("hsl","hue"),parse:dx("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+IC.transform(lx(n))+", "+IC.transform(lx(r))+", "+lx(xC.transform(i))+")"}},yx={test:e=>px.test(e)||mx.test(e)||gx.test(e),parse:e=>px.test(e)?px.parse(e):gx.test(e)?gx.parse(e):mx.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?px.transform(e):gx.transform(e),getAnimatableNone:e=>{const t=yx.parse(e);return t.alpha=0,yx.transform(t)}},vx=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const bx="number",wx="color",_x=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Sx(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(_x,e=>(yx.test(e)?(r.color.push(s),i.push(wx),n.push(yx.parse(e))):e.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(e)):(r.number.push(s),i.push(bx),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:o,indexes:r,types:i}}function Ex(e){return Sx(e).values}function Cx(e){const{split:t,types:n}=Sx(e),r=t.length;return e=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],void 0!==e[s]){const t=n[s];i+=t===bx?lx(e[s]):t===wx?yx.transform(e[s]):e[s]}return i}}const xx=e=>"number"===typeof e?0:yx.test(e)?yx.getAnimatableNone(e):e;const Tx={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(cx))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(vx))||void 0===n?void 0:n.length)||0)>0},parse:Ex,createTransformer:Cx,getAnimatableNone:function(e){const t=Ex(e);return Cx(e)(t.map(xx))}},Ax=new Set(["brightness","contrast","saturate","opacity"]);function kx(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(cx)||[];if(!r)return e;const i=n.replace(r,"");let s=Ax.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Ix=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Px=m(m({},Tx),{},{getAnimatableNone:e=>{const t=e.match(Ix);return t?t.map(kx).join(" "):e}}),Rx=m(m({},CC),{},{transform:Math.round}),Nx=m(m({borderWidth:PC,borderTopWidth:PC,borderRightWidth:PC,borderBottomWidth:PC,borderLeftWidth:PC,borderRadius:PC,radius:PC,borderTopLeftRadius:PC,borderTopRightRadius:PC,borderBottomRightRadius:PC,borderBottomLeftRadius:PC,width:PC,maxWidth:PC,height:PC,maxHeight:PC,top:PC,right:PC,bottom:PC,left:PC,padding:PC,paddingTop:PC,paddingRight:PC,paddingBottom:PC,paddingLeft:PC,margin:PC,marginTop:PC,marginRight:PC,marginBottom:PC,marginLeft:PC,backgroundPositionX:PC,backgroundPositionY:PC},{rotate:kC,rotateX:kC,rotateY:kC,rotateZ:kC,scale:TC,scaleX:TC,scaleY:TC,scaleZ:TC,skew:kC,skewX:kC,skewY:kC,distance:PC,translateX:PC,translateY:PC,translateZ:PC,x:PC,y:PC,z:PC,perspective:PC,transformPerspective:PC,opacity:xC,originX:DC,originY:DC,originZ:PC}),{},{zIndex:Rx,fillOpacity:xC,strokeOpacity:xC,numOctaves:Rx}),Dx=m(m({},Nx),{},{color:yx,backgroundColor:yx,outlineColor:yx,fill:yx,stroke:yx,borderColor:yx,borderTopColor:yx,borderRightColor:yx,borderBottomColor:yx,borderLeftColor:yx,filter:Px,WebkitFilter:Px}),Ox=e=>Dx[e];function Mx(e,t){let n=Ox(e);return n!==Px&&(n=Tx),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Lx=new Set(["auto","none","0"]);class Fx extends sx{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),rC(n))){const r=UC(n,t.current);void 0!==r&&(e[a]=r),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!SC.has(n)||2!==e.length)return;const[r,i]=e,s=LC(r),o=LC(i);if(s!==o)if(VC(s)&&VC(o))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else qC[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||ax(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"===typeof t&&!Lx.has(t)&&Sx(t).values.length&&(r=e[i]),i++}if(r&&n)for(const s of t)e[s]=Mx(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qC[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=qC[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,r]=e;t.getValue(n).set(r)}),this.resolveNoneKeyframes()}}const jx=e=>Boolean(e&&e.getVelocity);let Ux;function Vx(){Ux=void 0}const zx={now:()=>(void 0===Ux&&zx.set(JC.isProcessing||WC.useManualTiming?JC.timestamp:performance.now()),Ux),set:e=>{Ux=e,queueMicrotask(Vx)}};function Bx(e,t){-1===e.indexOf(t)&&e.push(t)}function qx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Hx{constructor(){this.subscriptions=[]}add(e){return Bx(this.subscriptions,e),()=>qx(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Wx(e,t){return t?e*(1e3/t):0}const Gx={current:void 0};class Kx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=zx.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=zx.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Hx);const n=this.events[e].add(t);return"change"===e?()=>{n(),YC.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Gx.current&&Gx.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=zx.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Wx(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qx(e,t){return new Kx(e,t)}const Yx=[...MC,yx,Tx],{schedule:Xx,cancel:Jx}=QC(queueMicrotask,!1),Zx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$x={};for(const wU in Zx)$x[wU]={isEnabled:e=>Zx[wU].some(t=>!!e[t])};const eT=()=>({x:{min:0,max:0},y:{min:0,max:0}}),tT="undefined"!==typeof window,nT={current:null},rT={current:!1};const iT=new WeakMap;function sT(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function oT(e){return"string"===typeof e||Array.isArray(e)}const aT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lT=["initial",...aT];function cT(e){return sT(e.animate)||lT.some(t=>oT(e[t]))}function uT(e){return Boolean(cT(e)||e.variants)}function hT(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function dT(e,t,n,r){if("function"===typeof t){const[i,s]=hT(r);t=t(void 0!==n?n:e.custom,i,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[i,s]=hT(r);t=t(void 0!==n?n:e.custom,i,s)}return t}const fT=["willChange"],pT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mT{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=zx.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,YC.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget=m({},l),this.initialValues=n.initial?m({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=cT(n),this.isVariantNode=uT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const h=this.scrapeMotionValuesFromProps(n,{},this),{willChange:d}=h,f=u(h,fT);for(const u in f){const e=f[u];void 0!==l[u]&&jx(e)&&e.set(l[u])}}mount(e){var t;this.current=e,iT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),rT.current||function(){if(rT.current=!0,tT)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>nT.current=e.matches;e.addEventListener("change",t),t()}else nT.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||nT.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),XC(this.notifyUpdate),XC(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=qE.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&YC.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in $x){const t=$x[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<pT.length;n++){const t=pT[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],s=n[r];if(jx(i))e.addValue(r,i);else if(jx(s))e.addValue(r,Qx(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,Qx(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Qx(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(FC(r)||ox(r))?r=parseFloat(r):!(e=>Yx.find(OC(e)))(r)&&Tx.test(t)&&(r=Mx(e,t)),this.setBaseTarget(e,jx(r)?r.get():r)),jx(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const i=dT(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);i&&(n=i[e])}if(t&&void 0!==n)return n;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||jx(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new Hx),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}scheduleRenderMicrotask(){Xx.render(this.render)}}class gT extends mT{constructor(){super(...arguments),this.KeyframeResolver=Fx}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jx(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const yT=(e,t)=>t&&"number"===typeof e?t.transform(e):e,vT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bT=BE.length;function wT(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(qE.has(l))o=!0;else if(tC(l))i[l]=e;else{const t=yT(e,Nx[l]);l.startsWith("origin")?(a=!0,s[l]=t):r[l]=t}}if(t.transform||(o||n?r.transform=function(e,t,n){let r="",i=!0;for(let s=0;s<bT;s++){const o=BE[s],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=yT(a,Nx[o]);l||(i=!1,r+="".concat(vT[o]||o,"(").concat(e,") ")),n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}function _T(e,t,n,r){let{style:i,vars:s}=t;const o=e.style;let a;for(a in i)o[a]=i[a];for(a in null===r||void 0===r||r.applyProjectionStyles(o,n),s)o.setProperty(a,s[a])}const ST={};function ET(e,t){let{layout:n,layoutId:r}=t;return qE.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!ST[e]||"opacity"===e)}function CT(e,t,n){const{style:r}=e,i={};for(const o in r){var s;(jx(r[o])||t.style&&jx(t.style[o])||ET(o,e)||void 0!==(null===n||void 0===n||null===(s=n.getValue(o))||void 0===s?void 0:s.liveStyle))&&(i[o]=r[o])}return i}class xT extends gT{constructor(){super(...arguments),this.type="html",this.renderInstance=_T}readValueFromInstance(e,t){var n,r;if(qE.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?JE(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ZE(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),i=(tC(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof i?i.trim():i}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return _C(e,n)}build(e,t,n){wT(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return CT(e,t,n)}}const TT=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),AT={offset:"stroke-dashoffset",array:"stroke-dasharray"},kT={offset:"strokeDashoffset",array:"strokeDasharray"};const IT=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function PT(e,t,n,r,i){let{attrX:s,attrY:o,attrScale:a,pathLength:l,pathSpacing:c=1,pathOffset:h=0}=t;if(wT(e,u(t,IT),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:f}=e;var p,m;(d.transform&&(f.transform=d.transform,delete d.transform),f.transform||d.transformOrigin)&&(f.transformOrigin=null!==(p=d.transformOrigin)&&void 0!==p?p:"50% 50%",delete d.transformOrigin);f.transform&&(f.transformBox=null!==(m=null===i||void 0===i?void 0:i.transformBox)&&void 0!==m?m:"fill-box",delete d.transformBox);void 0!==s&&(d.x=s),void 0!==o&&(d.y=o),void 0!==a&&(d.scale=a),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=i?AT:kT;e[s.offset]=PC.transform(-r);const o=PC.transform(t),a=PC.transform(n);e[s.array]="".concat(o," ").concat(a)}(d,l,c,h,!1)}const RT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),NT=e=>"string"===typeof e&&"svg"===e.toLowerCase();function DT(e,t,n){const r=CT(e,t,n);for(const i in e)if(jx(e[i])||jx(t[i])){r[-1!==BE.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}class OT extends gT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=eT}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(qE.has(t)){const e=Ox(t);return e&&e.default||0}return t=RT.has(t)?t:TT(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return DT(e,t,n)}build(e,t,n){PT(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){_T(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(RT.has(i)?i:TT(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=NT(e.tagName),super.mount(e)}}const MT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function LT(e){return"string"===typeof e&&!e.includes("-")&&!!(MT.indexOf(e)>-1||/[A-Z]/.test(e))}const FT=(e,t)=>LT(e)?new OT(t):new xT(t,{allowProjection:e!==a.Fragment}),jT=(0,a.createContext)({}),UT=(0,a.createContext)({strict:!1}),VT=(0,a.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),zT=(0,a.createContext)({});function BT(e){const{initial:t,animate:n}=function(e,t){if(cT(e)){const{initial:t,animate:n}=e;return{initial:!1===t||oT(t)?t:void 0,animate:oT(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,a.useContext)(zT));return(0,a.useMemo)(()=>({initial:t,animate:n}),[qT(t),qT(n)])}function qT(e){return Array.isArray(e)?e.join(" "):e}const HT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function WT(e,t,n){for(const r in t)jx(t[r])||ET(r,n)||(e[r]=t[r])}function GT(e,t){const n={};return WT(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,a.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return wT(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),n}function KT(e,t){const n={},r=GT(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const QT=()=>m(m({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function YT(e,t,n,r){const i=(0,a.useMemo)(()=>{const n=QT();return PT(n,t,NT(r),e.transformTemplate,e.style),m(m({},n.attrs),{},{style:m({},n.style)})},[t]);if(e.style){const t={};WT(t,e.style,e),i.style=m(m({},t),i.style)}return i}const XT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function JT(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||XT.has(e)}let ZT=e=>!JT(e);try{"function"===typeof($T=require("@emotion/is-prop-valid").default)&&(ZT=e=>e.startsWith("on")?!JT(e):$T(e))}catch(bU){}var $T;function eA(e,t,n,r,i){let{latestValues:s}=r,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(LT(e)?YT:KT)(t,s,i,e),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(ZT(i)||!0===n&&JT(i)||!t&&!JT(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(t,"string"===typeof e,o),u=e!==a.Fragment?m(m(m({},c),l),{},{ref:n}):{},{children:h}=t,d=(0,a.useMemo)(()=>jx(h)?h.get():h,[h]);return(0,a.createElement)(e,m(m({},u),{},{children:d}))}const tA=(0,a.createContext)(null);function nA(e){return jx(e)?e.get():e}const rA=["transitionEnd","transition"];function iA(e,t,n,r){const i={},s=r(e,{});for(const u in s)i[u]=nA(s[u]);let{initial:o,animate:a}=e;const l=cT(e),c=uT(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let h=!!n&&!1===n.initial;h=h||!1===o;const d=h?a:o;if(d&&"boolean"!==typeof d&&!sT(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=dT(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=u(r,rA);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[h?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}const sA=e=>(t,n)=>{const r=(0,a.useContext)(zT),i=(0,a.useContext)(tA),s=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:s}=e;return{latestValues:iA(t,n,r,i),renderState:s()}}(e,t,r,i);return n?s():function(e){const t=(0,a.useRef)(null);return null===t.current&&(t.current=e()),t.current}(s)},oA=sA({scrapeMotionValuesFromProps:CT,createRenderState:HT}),aA=sA({scrapeMotionValuesFromProps:DT,createRenderState:QT});const lA=Symbol.for("motionComponentSymbol");function cA(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function uA(e,t,n){return(0,a.useCallback)(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):cA(n)&&(n.current=r))},[t])}const hA="data-"+TT("framerAppearId"),dA=(0,a.createContext)({}),fA=tT?a.useLayoutEffect:a.useEffect;function pA(e,t,n,r,i){var s,o,l,c;const{visualElement:u}=(0,a.useContext)(zT),h=(0,a.useContext)(UT),d=(0,a.useContext)(tA),f=(0,a.useContext)(VT).reducedMotion,p=(0,a.useRef)(null);r=r||h.renderer,!p.current&&r&&(p.current=r(e,{visualState:t,parent:u,props:n,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:f}));const m=p.current,g=(0,a.useContext)(dA);!m||m.projection||!i||"html"!==m.type&&"svg"!==m.type||function(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:mA(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(o)||a&&cA(a),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(p.current,n,i,g);const y=(0,a.useRef)(!1);(0,a.useInsertionEffect)(()=>{m&&y.current&&m.update(n,d)});const v=n[hA],b=(0,a.useRef)(Boolean(v)&&!(null!==(s=(o=window).MotionHandoffIsComplete)&&void 0!==s&&s.call(o,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return fA(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),b.current&&m.animationState&&m.animationState.animateChanges())}),(0,a.useEffect)(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)}),b.current=!1),m.enteringChildren=void 0)}),m}function mA(e){if(e)return!1!==e.options.allowProjection?e.projection:mA(e.parent)}function gA(e){var t,n;let{forwardMotionProps:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;i&&function(e){for(const t in e)$x[t]=m(m({},$x[t]),e[t])}(i);const o=LT(e)?aA:oA;function l(t,n){let i;const l=m(m(m({},(0,a.useContext)(VT)),t),{},{layoutId:yA(t)}),{isStatic:c}=l,u=BT(t),h=o(t,c);if(!c&&tT){!function(){(0,a.useContext)(UT).strict;0}();const t=function(e){const{drag:t,layout:n}=$x;if(!t&&!n)return{};const r=m(m({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);i=t.MeasureLayout,u.visualElement=pA(e,h,l,s,t.ProjectionNode)}return(0,jE.jsxs)(zT.Provider,{value:u,children:[i&&u.visualElement?(0,jE.jsx)(i,m({visualElement:u.visualElement},l)):null,eA(e,t,uA(h,u.visualElement,n),h,c,r)]})}l.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==t?t:"",")"));const c=(0,a.forwardRef)(l);return c[lA]=e,c}function yA(e){let{layoutId:t}=e;const n=(0,a.useContext)(jT).id;return n&&void 0!==t?n+"-"+t:t}function vA(e,t){if("undefined"===typeof Proxy)return gA;const n=new Map,r=(n,r)=>gA(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,s)=>"create"===s?r:(n.has(s)||n.set(s,gA(s,void 0,e,t)),n.get(s))})}function bA(e,t,n){const r=e.getProps();return dT(r,t,void 0!==n?n:r.custom,e)}function wA(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const _A=e=>Array.isArray(e),SA=["transitionEnd","transition"];function EA(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Qx(n))}function CA(e){return _A(e)?e[e.length-1]||0:e}function xA(e,t){const n=e.getValue("willChange");if(r=n,Boolean(jx(r)&&r.add))return n.add(t);if(!n&&WC.WillChange){const n=new WC.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function TA(e){return e.props[hA]}function AA(e){e.duration=0,e.type="keyframes"}const kA=(e,t)=>n=>t(e(n)),IA=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(kA)},PA=e=>1e3*e,RA=e=>e/1e3,NA={layout:0,mainThread:0,waapi:0};function DA(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function OA(e,t){return n=>n>0?t:e}const MA=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},LA=[mx,px,gx];function FA(e){const t=(e=>LA.find(t=>t.test(e)))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let n=t.parse(e);return t===gx&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,o=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=DA(i,e,t+1/3),o=DA(i,e,t),a=DA(i,e,t-1/3)}else s=o=a=r;return{red:Math.round(255*s),green:Math.round(255*o),blue:Math.round(255*a),alpha:i}}(n)),n}const jA=(e,t)=>{const n=FA(e),r=FA(t);if(!n||!r)return OA(e,t);const i=m({},n);return e=>(i.red=MA(n.red,r.red,e),i.green=MA(n.green,r.green,e),i.blue=MA(n.blue,r.blue,e),i.alpha=oC(n.alpha,r.alpha,e),px.transform(i))},UA=new Set(["none","hidden"]);function VA(e,t){return n=>oC(e,t,n)}function zA(e){return"number"===typeof e?VA:"string"===typeof e?rC(e)?OA:yx.test(e)?jA:HA:Array.isArray(e)?BA:"object"===typeof e?yx.test(e)?jA:qA:OA}function BA(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>zA(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function qA(e,t){const n=m(m({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=zA(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const HA=(e,t)=>{const n=Tx.createTransformer(t),r=Sx(e),i=Sx(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?UA.has(e)&&!i.values.length||UA.has(t)&&!r.values.length?function(e,t){return UA.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):IA(BA(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){var i;const o=t.types[s],a=e.indexes[o][r[o]],l=null!==(i=e.values[a])&&void 0!==i?i:0;n[s]=l,r[o]++}return n}(r,i),i.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),OA(e,t))};function WA(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return oC(e,t,n);return zA(e)(e,t)}const GA=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return YC.update(t,e)},stop:()=>XC(t),now:()=>JC.isProcessing?JC.timestamp:zx.now()}},KA=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(1e4*e(s/(i-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},QA=2e4;function YA(e){let t=0;let n=e.next(t);for(;!n.done&&t<QA;)t+=50,n=e.next(t);return t>=QA?1/0:t}function XA(e,t,n){const r=Math.max(t-5,0);return Wx(n-e(r),t-r)}const JA={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ZA=.001;function $A(e){let t,n,{duration:r=JA.duration,bounce:i=JA.bounce,velocity:s=JA.velocity,mass:o=JA.mass}=e;PA(JA.maxDuration);let a=1-i;a=EC(JA.minDamping,JA.maxDamping,a),r=EC(JA.minDuration,JA.maxDuration,RA(r)),a<1?(t=e=>{const t=e*a,n=t*r,i=t-s,o=tk(e,a),l=Math.exp(-n);return ZA-i/o*l},n=e=>{const n=e*a*r,i=n*s+s,o=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=tk(Math.pow(e,2),a);return(-t(e)+ZA>0?-1:1)*((i-o)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let i=1;i<ek;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=PA(r),isNaN(l))return{stiffness:JA.stiffness,damping:JA.damping,duration:r};{const e=Math.pow(l,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:r}}}const ek=12;function tk(e,t){return e*Math.sqrt(1-t*t)}const nk=["duration","bounce"],rk=["stiffness","damping","mass"];function ik(e,t){return t.some(t=>void 0!==e[t])}function sk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JA.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JA.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(e){let t=m({velocity:JA.velocity,stiffness:JA.stiffness,damping:JA.damping,mass:JA.mass,isResolvedFromDuration:!1},e);if(!ik(e,rk)&&ik(e,nk))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*EC(.05,1,1-(e.bounce||0))*Math.sqrt(i);t=m(m({},t),{},{mass:JA.mass,stiffness:i,damping:s})}else{const n=$A(e);t=m(m(m({},t),n),{},{mass:JA.mass}),t.isResolvedFromDuration=!0}return t}(m(m({},n),{},{velocity:-RA(n.velocity||0)})),p=d||0,g=c/(2*Math.sqrt(l*u)),y=o-s,v=RA(Math.sqrt(l/u)),b=Math.abs(y)<5;let w;if(r||(r=b?JA.restSpeed.granular:JA.restSpeed.default),i||(i=b?JA.restDelta.granular:JA.restDelta.default),g<1){const e=tk(v,g);w=t=>{const n=Math.exp(-g*v*t);return o-n*((p+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}}else if(1===g)w=e=>o-Math.exp(-v*e)*(y+(p+v*y)*e);else{const e=v*Math.sqrt(g*g-1);w=t=>{const n=Math.exp(-g*v*t),r=Math.min(e*t,300);return o-n*((p+g*v*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}const _={calculatedDuration:f&&h||null,next:e=>{const t=w(e);if(f)a.done=e>=h;else{let n=0===e?p:0;g<1&&(n=0===e?PA(p):XA(w,e,t));const s=Math.abs(n)<=r,l=Math.abs(o-t)<=i;a.done=s&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min(YA(_),QA),t=KA(t=>_.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return _}function ok(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:h}=e;const d=t[0],f={done:!1,value:d},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=d+m,y=void 0===a?g:a(g);y!==g&&(m=y-d);const v=e=>-m*Math.exp(-e/i),b=e=>y+v(e),w=e=>{const t=v(e),n=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let _,S;const E=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(_=e,S=sk({keyframes:[f.value,p(f.value)],velocity:XA(b,e,f.value),damping:s,stiffness:o,restDelta:u,restSpeed:h}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==_||(t=!0,w(e),E(e)),void 0!==_&&e>=_?S.next(e-_):(!t&&w(e),f)}}}sk.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(m(m({},e),{},{keyframes:[0,t]})),r=Math.min(YA(n),QA);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:RA(r)}}(e,100,sk);return e.ease=t.ease,e.duration=PA(t.duration),e.type="keyframes",e};const ak=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function lk(e,t,n,r){if(e===t&&n===r)return HC;const i=t=>function(e,t,n,r,i){let s,o,a=0;do{o=t+(n-t)/2,s=ak(o,r,i)-e,s>0?n=o:t=o}while(Math.abs(s)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:ak(i(e),t,r)}const ck=lk(.42,0,1,1),uk=lk(0,0,.58,1),hk=lk(.42,0,.58,1),dk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,fk=e=>t=>1-e(1-t),pk=lk(.33,1.53,.69,.99),mk=fk(pk),gk=dk(mk),yk=e=>(e*=2)<1?.5*mk(e):.5*(2-Math.pow(2,-10*(e-1))),vk=e=>1-Math.sin(Math.acos(e)),bk=fk(vk),wk=dk(vk),_k=e=>Array.isArray(e)&&"number"===typeof e[0],Sk={linear:HC,easeIn:ck,easeInOut:hk,easeOut:uk,circIn:vk,circInOut:wk,circOut:bk,backIn:mk,backInOut:gk,backOut:pk,anticipate:yk},Ek=e=>{if(_k(e)){e.length;const[t,n,r,i]=e;return lk(t,n,r,i)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),Sk[e]):e},Ck=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function xk(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(t.length,1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const r=[],i=n||WC.mix||WA,s=e.length-1;for(let o=0;o<s;o++){let n=i(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||HC:t;n=IA(e,n)}r.push(n)}return r}(t,r,i),l=a.length,c=n=>{if(o&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=Ck(e[r],e[r+1],n);return a[r](i)};return n?t=>c(EC(e[0],e[s-1],t)):c}function Tk(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Ck(0,t,r);e.push(oC(n,1,i))}}(t,e.length-1),t}function Ak(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(Ek):Ek(i),o={done:!1,value:n[0]},a=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:Tk(n),t),l=xk(a,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map(()=>u||hk).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(o.value=l(e),o.done=e>=t,o)}}const kk=e=>null!==e;function Ik(e,t,n){let{repeat:r,repeatType:i="loop"}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.filter(kk),a=s<0||r&&"loop"!==i&&r%2===1?0:o.length-1;return a&&void 0!==n?n:o[a]}const Pk={decay:ok,inertia:ok,tween:Ak,keyframes:Ak,spring:sk};function Rk(e){"string"===typeof e.type&&(e.type=Pk[e.type])}class Nk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Dk=e=>e/100;class Ok extends Nk{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==zx.now()&&this.tick(zx.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},NA.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Rk(e);const{type:t=Ak,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=e;let{keyframes:o}=e;const a=t||Ak;a!==Ak&&"number"!==typeof o[0]&&(this.mixKeyframes=IA(Dk,WA(o[0],o[1])),o=[0,100]);const l=a(m(m({},e),{},{keyframes:o}));"mirror"===i&&(this.mirroredGenerator=a(m(m({},e),{},{keyframes:[...o].reverse(),velocity:-s}))),null===l.calculatedDuration&&(l.calculatedDuration=YA(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:h,repeatDelay:d,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,b=n;if(u){const e=Math.min(this.currentTime,r)/o;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===h?(n=1-n,d&&(n-=d/o)):"mirror"===h&&(b=s)),v=EC(0,1,n)*o}const w=y?{done:!1,value:c[0]}:b.next(v);i&&(w.value=i(w.value));let{done:_}=w;y||null===a||(_=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&_);return S&&f!==ok&&(w.value=Ik(c,this.options,m,this.speed)),p&&p(w.value),S&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return RA(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+RA(e)}get time(){return RA(this.currentTime)}set time(e){var t;e=PA(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zx.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=RA(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=GA,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zx.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,NA.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function Mk(e){let t;return()=>(void 0===t&&(t=e()),t)}const Lk=Mk(()=>void 0!==window.ScrollTimeline),Fk={};function jk(e,t){const n=Mk(e);return()=>{var e;return null!==(e=Fk[t])&&void 0!==e?e:n()}}const Uk=jk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(ND){return!1}return!0},"linearEasing"),Vk=e=>{let[t,n,r,i]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(i,")")},zk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vk([0,.65,.55,1]),circOut:Vk([.55,0,1,.45]),backIn:Vk([.31,.01,.66,-.59]),backOut:Vk([.33,1.53,.69,.99])};function Bk(e,t){return e?"function"===typeof e?Uk()?KA(e,t):"ease-out":_k(e)?Vk(e):Array.isArray(e)?e.map(e=>Bk(e,t)||zk.easeOut):zk[e]:void 0}function qk(e,t,n){let{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const h=Bk(a,i);Array.isArray(h)&&(u.easing=h),KC.value&&NA.waapi++;const d={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"};c&&(d.pseudoElement=c);const f=e.animate(u,d);return KC.value&&f.finished.finally(()=>{NA.waapi--}),f}function Hk(e){return"function"===typeof e&&"applyToOptions"in e}const Wk=["type"];class Gk extends Nk{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:o,onComplete:a}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=s,this.options=e,e.type;const l=function(e){let{type:t}=e,n=u(e,Wk);return Hk(t)&&Uk()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(i=n.ease)&&void 0!==i||(n.ease="easeOut"),n);var r,i}(e);this.animation=qk(t,n,r,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=Ik(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===a||void 0===a||a(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(ND){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return RA(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+RA(e)}get time(){return RA(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=PA(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&Lk()?(this.animation.timeline=t,HC):n(this)}}const Kk={anticipate:yk,backInOut:gk,circInOut:wk};function Qk(e){"string"===typeof e.ease&&e.ease in Kk&&(e.ease=Kk[e.ease])}const Yk=["motionValue","onUpdate","onComplete","element"];class Xk extends Gk{constructor(e){Qk(e),Rk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:i,onComplete:s,element:o}=n,a=u(n,Yk);if(!r)return;if(void 0!==e)return void r.set(e);const l=new Ok(m(m({},a),{},{autoplay:!1})),c=PA(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const Jk=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Tx.test(e)&&"0"!==e||e.startsWith("url(")));const Zk=new Set(["opacity","clipPath","filter","transform"]),$k=Mk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const eI=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class tI extends Nk{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:h,element:d}=e,f=u(e,eI);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=zx.now();const p=m({autoplay:n,delay:r,type:i,repeat:s,repeatDelay:o,repeatType:a,name:c,motionValue:h,element:d},f),g=(null===d||void 0===d?void 0:d.KeyframeResolver)||sx;this.keyframeResolver=new g(l,(e,t,n)=>this.onKeyframesResolved(e,t,p,!n),c,h,d),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:a,isHandoff:l,onUpdate:c}=n;this.resolvedAt=zx.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],o=Jk(i,t),a=Jk(s,t);return"You are trying to animate ".concat(t,' from "').concat(i,'" to "').concat(s,'". "').concat(o?s:i,'" is not an animatable value.'),!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Hk(n))&&r)}(e,i,s,o)||(!WC.instantAnimations&&a||null===c||void 0===c||c(Ik(e,n,t)),e[0]=e[e.length-1],AA(n),n.repeat=0);const u=m(m({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),h=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return $k()&&r&&Zk.has(r)&&("transform"!==r||!c)&&!l&&!i&&"mirror"!==s&&0!==o&&"inertia"!==a}(u)?new Xk(m(m({},u),{},{element:u.motionValue.owner.current})):new Ok(u);h.finished.then(()=>this.notifyFinished()).catch(HC),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),nx=!0,ix(),rx(),nx=!1);return this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const nI=e=>null!==e;const rI={type:"spring",stiffness:500,damping:25,restSpeed:10},iI={type:"keyframes",duration:.8},sI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oI=(e,t)=>{let{keyframes:n}=t;return n.length>2?iI:qE.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:rI:sI},aI=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const lI=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return o=>{const a=wA(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c-=PA(l);const h=m(m({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},a),{},{delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:h}=e,d=u(e,aI);return!!Object.keys(d).length})(a)||Object.assign(h,oI(e,h)),h.duration&&(h.duration=PA(h.duration)),h.repeatDelay&&(h.repeatDelay=PA(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let d=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(AA(h),0===h.delay&&(d=!0)),(WC.instantAnimations||WC.skipAnimations)&&(d=!0,AA(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!s&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:i="loop"}=t;const s=e.filter(nI),o=r&&"loop"!==i&&r%2===1?0:s.length-1;return o&&void 0!==n?n:s[o]}(h.keyframes,a);if(void 0!==e)return void YC.update(()=>{h.onUpdate(e),h.onComplete()})}return a.isSync?new Ok(h):new tI(h)}},cI=["transition","transitionEnd"];function uI(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function hI(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:s=e.getDefaultTransition(),transitionEnd:o}=t,a=u(t,cI);r&&(s=r);const l=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const u in a){var h;const t=e.getValue(u,null!==(h=e.latestValues[u])&&void 0!==h?h:null),r=a[u];if(void 0===r||c&&uI(c,u))continue;const i=m({delay:n},wA(s||{},u)),o=t.get();if(void 0!==o&&!t.isAnimating&&!Array.isArray(r)&&r===o&&!i.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=TA(e);if(t){const e=window.MotionHandoffAnimation(t,u,YC);null!==e&&(i.startTime=e,d=!0)}}xA(e,u),t.start(lI(u,t,r,e.shouldReduceMotion&&SC.has(u)?{type:!1}:i,e,d));const f=t.animation;f&&l.push(f)}return o&&Promise.all(l).then(()=>{YC.update(()=>{o&&function(e,t){let n=bA(e,t)||{},{transitionEnd:r={},transition:i={}}=n,s=u(n,SA);s=m(m({},s),r);for(const o in s)EA(e,o,CA(s[o]))}(e,o)})}),l}function dI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,a=(o-1)*r;return"function"===typeof n?n(s,o):1===i?s*r:a-s*r}function fI(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=bA(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);const o=i?()=>Promise.all(hI(e,i,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0;const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(fI(l,t,m(m({},o),{},{delay:n+("function"===typeof r?0:r)+dI(e.variantChildren,l,r,i,s)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}(e,t,n,i,o,a,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then(()=>t())}return Promise.all([o(),a(r.delay)])}function pI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const mI=lT.length;function gI(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&gI(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<mI;n++){const r=lT[n],i=e.props[r];(oT(i)||!1===i)&&(t[r]=i)}return t}const yI=["transition","transitionEnd"],vI=[...aT].reverse(),bI=aT.length;function wI(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>fI(e,t,r));n=Promise.all(i)}else if("string"===typeof t)n=fI(e,t,r);else{const i="function"===typeof t?bA(e,t,r.custom):t;n=Promise.all(hI(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function _I(e){let t=wI(e),n=CI(),r=!0;const i=t=>(n,r)=>{var i;const s=bA(e,r,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(s){const{transition:e,transitionEnd:t}=s,r=u(s,yI);n=m(m(m({},n),r),t)}return n};function s(s){const{props:o}=e,a=gI(e.parent)||{},l=[],c=new Set;let u={},h=1/0;for(let t=0;t<bI;t++){const d=vI[t],f=n[d],p=void 0!==o[d]?o[d]:a[d],g=oT(p),y=d===s?f.isActive:null;!1===y&&(h=t);let v=p===a[d]&&p!==o[d]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),f.protectedKeys=m({},u),!f.isActive&&null===y||!p&&!f.prevProp||sT(p)||"boolean"===typeof p)continue;const b=SI(f.prevProp,p);let w=b||d===s&&f.isActive&&!v&&g||t>h&&g,_=!1;const S=Array.isArray(p)?p:[p];let E=S.reduce(i(d),{});!1===y&&(E={});const{prevResolvedValues:C={}}=f,x=m(m({},C),E),T=t=>{w=!0,c.has(t)&&(_=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in x){const t=E[e],n=C[e];if(u.hasOwnProperty(e))continue;let r=!1;r=_A(t)&&_A(n)?!pI(t,n):t!==n,r?void 0!==t&&null!==t?T(e):c.add(e):void 0!==t&&c.has(e)?T(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=E,f.isActive&&(u=m(m({},u),E)),r&&e.blockInitialAnimation&&(w=!1);const A=v&&b;w&&(!A||_)&&l.push(...S.map(t=>{const n={type:d};if("string"===typeof t&&r&&!A&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,i=bA(r,t);if(r.enteringChildren&&i){const{delayChildren:t}=i.transition||{};n.delay=dI(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof o.initial){const n=bA(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null}),l.push({animation:t})}let d=Boolean(l.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(d=!1),r=!1,d?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const o=s(t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=CI()}}}function SI(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!pI(t,e)}function EI(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CI(){return{animate:EI(!0),whileInView:EI(),whileHover:EI(),whileTap:EI(),whileDrag:EI(),whileFocus:EI(),exit:EI()}}class xI{constructor(e){this.isMounted=!1,this.node=e}update(){}}let TI=0;const AI={animation:{Feature:class extends xI{constructor(e){super(e),e.animationState||(e.animationState=_I(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sT(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends xI{constructor(){super(...arguments),this.id=TI++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},kI={x:!1,y:!1};function II(){return kI.x||kI.y}function PI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const RI=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function NI(e){return{point:{x:e.pageX,y:e.pageY}}}function DI(e,t,n,r){return PI(e,t,(e=>t=>RI(t)&&e(t,NI(t)))(n),r)}function OI(e){return e.max-e.min}function MI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=oC(t.min,t.max,e.origin),e.scale=OI(n)/OI(t),e.translate=oC(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function LI(e,t,n,r){MI(e.x,t.x,n.x,r?r.originX:void 0),MI(e.y,t.y,n.y,r?r.originY:void 0)}function FI(e,t,n){e.min=n.min+t.min,e.max=e.min+OI(t)}function jI(e,t,n){e.min=t.min-n.min,e.max=e.min+OI(t)}function UI(e,t,n){jI(e.x,t.x,n.x),jI(e.y,t.y,n.y)}function VI(e){return[e("x"),e("y")]}const zI=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},BI=(e,t)=>Math.abs(e-t);class qI{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:s=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=GI(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=BI(e.x,t.x),r=BI(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=JC;this.history.push(m(m({},r),{},{timestamp:i}));const{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=HI(t,this.transformPagePoint),YC.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=GI("pointercancel"===e.type?this.lastMoveEventInfo:HI(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!RI(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=r||window;const o=HI(NI(e),this.transformPagePoint),{point:a}=o,{timestamp:l}=JC;this.history=[m(m({},a),{},{timestamp:l})];const{onSessionStart:c}=t;c&&c(e,GI(o,this.history)),this.removeListeners=IA(DI(this.contextWindow,"pointermove",this.handlePointerMove),DI(this.contextWindow,"pointerup",this.handlePointerUp),DI(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),XC(this.updatePoint)}}function HI(e,t){return t?{point:t(e.point)}:e}function WI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function GI(e,t){let{point:n}=e;return{point:n,delta:WI(n,QI(t)),offset:WI(n,KI(t)),velocity:YI(t,.1)}}function KI(e){return e[0]}function QI(e){return e[e.length-1]}function YI(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=QI(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>PA(t)));)n--;if(!r)return{x:0,y:0};const s=RA(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function XI(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function JI(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const ZI=.35;function $I(e,t,n){return{min:eP(e,t),max:eP(e,n)}}function eP(e,t){return"number"===typeof e?e:e[t]||0}const tP=new WeakMap;class nP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new qI(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(NI(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?kI[s]?null:(kI[s]=!0,()=>{kI[s]=!1}):kI.x||kI.y?null:(kI.x=kI.y=!0,()=>{kI.x=kI.y=!1}),!this.openDragLock))return;var s;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),VI(e=>{let t=this.getAxisMotionValue(e).get()||0;if(IC.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=OI(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&YC.postRender(()=>i(e,t)),xA(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>VI(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:zI(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&YC.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!rP(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?oC(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?oC(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&cA(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:s}=t;return{x:XI(e.x,r,s),y:XI(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZI;return!1===e?e=0:!0===e&&(e=ZI),{x:$I(e,"left","right"),y:$I(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&VI(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cA(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=_C(e,n),{scroll:i}=t;return i&&(vC(r.x,i.offset.x),vC(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:JI(e.x,t.x),y:JI(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=sC(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=VI(o=>{if(!rP(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,h=m(m({type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},i),l);return this.startAxisValueAnimation(o,h)});return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return xA(this.visualElement,e),n.start(lI(e,n,0,t,this.visualElement,!1))}stopAnimation(){VI(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){VI(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){VI(t=>{const{drag:n}=this.getProps();if(!rP(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-oC(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!cA(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};VI(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=OI(e),i=OI(t);return i>r?n=Ck(t.min,t.max-r,e.min):r>i&&(n=Ck(e.min,e.max-i,t.min)),EC(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),VI(t=>{if(!rP(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(oC(i,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;tP.set(this.visualElement,this);const e=DI(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();cA(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),YC.read(t);const i=PI(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(VI(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=ZI,dragMomentum:o=!0}=e;return m(m({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:o})}}function rP(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const iP=e=>(t,n)=>{e&&YC.postRender(()=>e(t,n))};const sP={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oP(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const aP={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!PC.test(e))return e;e=parseFloat(e)}const n=oP(e,t.target.x),r=oP(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},lP={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,s=Tx.parse(e);if(s.length>5)return i;const o=Tx.createTransformer(e),a="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+a]/=l,s[1+a]/=c;const u=oC(l,c,.5);return"number"===typeof s[2+a]&&(s[2+a]/=u),"number"===typeof s[3+a]&&(s[3+a]/=u),o(s)}};let cP=!1;class uP extends a.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)ST[t]=e[t],tC(t)&&(ST[t].isCSSVariable=!0)}(dP),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),cP&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions(m(m({},i.options),{},{onExitComplete:()=>this.safeToRemove()}))),sP.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:s}=n;return s?(s.isPresent=i,cP=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||YC.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;cP=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hP(e){const[t,n]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,a.useContext)(tA);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=(0,a.useId)();(0,a.useEffect)(()=>{if(e)return i(s)},[e]);const o=(0,a.useCallback)(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}(),r=(0,a.useContext)(jT);return(0,jE.jsx)(uP,m(m({},e),{},{layoutGroup:r,switchLayoutGroup:(0,a.useContext)(dA),isPresent:t,safeToRemove:n}))}const dP={borderRadius:m(m({},aP),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:aP,borderTopRightRadius:aP,borderBottomLeftRadius:aP,borderBottomRightRadius:aP,boxShadow:lP};function fP(e){return"object"===typeof e&&null!==e}function pP(e){return fP(e)&&"ownerSVGElement"in e}const mP=(e,t)=>e.depth-t.depth;class gP{constructor(){this.children=[],this.isDirty=!1}add(e){Bx(this.children,e),this.isDirty=!0}remove(e){qx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mP),this.isDirty=!1,this.children.forEach(e)}}function yP(e,t){const n=zx.now(),r=i=>{let{timestamp:s}=i;const o=s-n;o>=t&&(XC(r),e(o-t))};return YC.setup(r,!0),()=>XC(r)}const vP=["TopLeft","TopRight","BottomLeft","BottomRight"],bP=vP.length,wP=e=>"string"===typeof e?parseFloat(e):e,_P=e=>"number"===typeof e||PC.test(e);function SP(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const EP=xP(0,.5,bk),CP=xP(.5,.95,HC);function xP(e,t,n){return r=>r<e?0:r>t?1:n(Ck(e,t,r))}function TP(e,t){e.min=t.min,e.max=t.max}function AP(e,t){TP(e.x,t.x),TP(e.y,t.y)}function kP(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function IP(e,t,n,r,i){return e=dC(e-=t,1/n,r),void 0!==i&&(e=dC(e,1/i,r)),e}function PP(e,t,n,r,i){let[s,o,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;IC.test(t)&&(t=parseFloat(t),t=oC(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=oC(s.min,s.max,r);e===s&&(a-=t),e.min=IP(e.min,t,n,a,i),e.max=IP(e.max,t,n,a,i)}(e,t[s],t[o],t[a],t.scale,r,i)}const RP=["x","scaleX","originX"],NP=["y","scaleY","originY"];function DP(e,t,n,r){PP(e.x,t,RP,n?n.x:void 0,r?r.x:void 0),PP(e.y,t,NP,n?n.y:void 0,r?r.y:void 0)}function OP(e){return 0===e.translate&&1===e.scale}function MP(e){return OP(e.x)&&OP(e.y)}function LP(e,t){return e.min===t.min&&e.max===t.max}function FP(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function jP(e,t){return FP(e.x,t.x)&&FP(e.y,t.y)}function UP(e){return OI(e.x)/OI(e.y)}function VP(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class zP{constructor(){this.members=[]}add(e){Bx(this.members,e),e.scheduleRender()}remove(e){if(qx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const BP={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},qP=["","X","Y","Z"];let HP=0;function WP(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function GP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=TA(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",YC,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&GP(r)}function KP(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=HP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,KC.value&&(BP.nodes=BP.calculatedTargetDeltas=BP.calculatedProjections=0),this.nodes.forEach(XP),this.nodes.forEach(rR),this.nodes.forEach(iR),this.nodes.forEach(JP),KC.addProjectionMetrics&&KC.addProjectionMetrics(BP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new gP)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Hx),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=pP(e)&&!(pP(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;YC.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=yP(i,250),sP.hasAnimatedSinceResize&&(sP.hasAnimatedSinceResize=!1,this.nodes.forEach(nR)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||uR,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!jP(this.targetLayout,i),u=!n&&r;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=m(m({},wA(o,"layout")),{},{onPlay:a,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,u)}else n||nR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),XC(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sR),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach($P);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(eR);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(tR),this.nodes.forEach(QP),this.nodes.forEach(YP)):this.nodes.forEach(eR),this.clearAllSnapshots();const e=zx.now();JC.delta=EC(0,1e3/60,e-JC.timestamp),JC.timestamp=e,JC.isProcessing=!0,ZC.update.process(JC),ZC.preRender.process(JC),ZC.render.process(JC),JC.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZP),this.sharedNodes.forEach(oR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,YC.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){YC.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||OI(this.snapshot.measuredBox.x)||OI(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!MP(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||cC(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),fR((r=n).x),fR(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(mR))){const{scroll:e}=this.root;e&&(vC(n.x,e.offset.x),vC(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(AP(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:s}=t;t!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&AP(n,e),vC(n.x,i.offset.x),vC(n.y,i.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};AP(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&wC(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),cC(e.latestValues)&&wC(n,e.latestValues)}return cC(this.latestValues)&&wC(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};AP(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!cC(e.latestValues))continue;lC(e.latestValues)&&e.updateSnapshot();const r=eT();AP(r,e.measurePageBox()),DP(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return cC(this.latestValues)&&DP(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=m(m(m({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==JC.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=JC.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},UI(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),AP(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,FI(o.x,a.x,l.x),FI(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):AP(this.target,this.layout.layoutBox),mC(this.target,this.targetDelta)):AP(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},UI(this.relativeTargetOrigin,this.target,e.target),AP(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}KC.value&&BP.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!lC(this.parent.latestValues)&&!uC(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===JC.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;AP(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let s,o;t.x=t.y=1;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&wC(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,mC(e,o)),r&&cC(s.latestValues)&&wC(e,s.latestValues))}t.x<yC&&t.x>gC&&(t.x=1),t.y<yC&&t.y>gC&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(kP(this.prevProjectionDelta.x,this.projectionDelta.x),kP(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),LI(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&VP(this.projectionDelta.x,this.prevProjectionDelta.x)&&VP(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),KC.value&&BP.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i=m({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(cR));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,d;aR(s.x,e.x,n),aR(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(UI(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){lR(e.x,t.x,n.x,r),lR(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,o,n),h&&(l=this.relativeTarget,d=h,LP(l.x,d.x)&&LP(l.y,d.y))&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),AP(h,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,s){var o,a;if(i)e.opacity=oC(0,null!==(o=n.opacity)&&void 0!==o?o:1,EP(r)),e.opacityExit=oC(null!==(a=t.opacity)&&void 0!==a?a:1,0,CP(r));else if(s){var l,c;e.opacity=oC(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r)}for(let u=0;u<bP;u++){const i="border".concat(vP[u],"Radius");let s=SP(t,i),o=SP(n,i);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||_P(s)===_P(o)?(e[i]=Math.max(oC(wP(s),wP(o),r),0),(IC.test(o)||IC.test(s))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=oC(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(XC(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=YC.update(()=>{sP.hasAnimatedSinceResize=!0,NA.layout++,this.motionValue||(this.motionValue=Qx(0)),this.currentAnimation=function(e,t,n){const r=jx(e)?e:Qx(e);return r.start(lI("",r,t,n)),r.animation}(this.motionValue,[0,1e3],m(m({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{NA.layout--},onComplete:()=>{NA.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&pR(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=OI(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=OI(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}AP(t,n),wC(t,i),LI(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new zP);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&WP("z",e,r,this.animationValues);for(let i=0;i<qP.length;i++)WP("rotate".concat(qP[i]),e,r,this.animationValues),WP("skew".concat(qP[i]),e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=nA(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=nA(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!cC(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let s=function(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(null===n||void 0===n?void 0:n.z)||0;if((i||s||o)&&(r="translate3d(".concat(i,"px, ").concat(s,"px, ").concat(o,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:o,skewY:a}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),i&&(r+="rotateX(".concat(i,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) ")),o&&(r+="skewX(".concat(o,"deg) ")),a&&(r+="skewY(".concat(a,"deg) "))}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(r+="scale(".concat(a,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(s=n(i,s)),e.transform=s;const{x:o,y:a}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*o.origin,"% ").concat(100*a.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=i.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const u in ST){if(void 0===i[u])continue;const{correct:t,applyTo:n,isCSSVariable:o}=ST[u],a="none"===s?i[u]:t(i[u],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=a}else o?this.options.visualElement.renderState.vars[u]=a:e[u]=a}this.options.layoutId&&(e.pointerEvents=r===this?nA(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach($P),this.root.sharedNodes.clear()}}}function QP(e){e.updateLayout()}function YP(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?VI(e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=OI(r);r.min=t[e].min,r.max=r.min+i}):pR(i,n.layoutBox,t)&&VI(r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],o=OI(t[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};LI(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?LI(a,e.applyTransform(r,!0),n.measuredBox):LI(a,t,n.layoutBox);const l=!MP(o);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const o={x:{min:0,max:0},y:{min:0,max:0}};UI(o,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};UI(a,t,s.layoutBox),jP(o,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function XP(e){KC.value&&BP.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function JP(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ZP(e){e.clearSnapshot()}function $P(e){e.clearMeasurements()}function eR(e){e.isLayoutDirty=!1}function tR(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nR(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rR(e){e.resolveTargetDelta()}function iR(e){e.calcProjection()}function sR(e){e.resetSkewAndRotation()}function oR(e){e.removeLeadSnapshot()}function aR(e,t,n){e.translate=oC(t.translate,0,n),e.scale=oC(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function lR(e,t,n,r){e.min=oC(t.min,n.min,r),e.max=oC(t.max,n.max,r)}function cR(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const uR={duration:.45,ease:[.4,0,.1,1]},hR=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),dR=hR("applewebkit/")&&!hR("chrome/")?Math.round:HC;function fR(e){e.min=dR(e.min),e.max=dR(e.max)}function pR(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=UP(t),i=UP(n),s=.2,!(Math.abs(r-i)<=s));var r,i,s}function mR(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const gR=KP({attachResizeListener:(e,t)=>PI(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yR={current:void 0},vR=KP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!yR.current){const e=new gR({});e.mount(window),e.setOptions({layoutScroll:!0}),yR.current=e}return yR.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),bR={pan:{Feature:class extends xI{constructor(){super(...arguments),this.removePointerDownListener=HC}onPointerDown(e){this.session=new qI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:iP(e),onStart:iP(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&YC.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=DI(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends xI{constructor(e){super(e),this.removeGroupControls=HC,this.removeListeners=HC,this.controls=new nP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||HC}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:vR,MeasureLayout:hP}};function wR(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let i=document;t&&(i=t.current);const s=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),r=new AbortController;return[n,m(m({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function _R(e){return!("touch"===e.pointerType||II())}function SR(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&YC.postRender(()=>i(t,NI(t)))}const ER=(e,t)=>!!t&&(e===t||ER(e,t.parentElement)),CR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const xR=new WeakSet;function TR(e){return t=>{"Enter"===t.key&&e(t)}}function AR(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function kR(e){return RI(e)&&!II()}function IR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=wR(e,n),o=e=>{const r=e.currentTarget;if(!kR(e))return;xR.add(r);const s=t(r,e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),xR.has(r)&&xR.delete(r),kR(e)&&"function"===typeof s&&s(e,{success:t})},a=e=>{o(e,r===window||r===document||n.useGlobalTarget||ER(r,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",o,i),fP(t=e)&&"offsetHeight"in t&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=TR(()=>{if(xR.has(n))return;AR(n,"down");const e=TR(()=>{AR(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>AR(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),function(e){return CR.has(e.tagName)||-1!==e.tabIndex}(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}function PR(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&YC.postRender(()=>i(t,NI(t)))}const RR=["root"],NR=new WeakMap,DR=new WeakMap,OR=e=>{const t=NR.get(e.target);t&&t(e)},MR=e=>{e.forEach(OR)};function LR(e,t,n){const r=function(e){let{root:t}=e,n=u(e,RR);const r=t||document;DR.has(r)||DR.set(r,{});const i=DR.get(r),s=JSON.stringify(n);return i[s]||(i[s]=new IntersectionObserver(MR,m({root:t},n))),i[s]}(t);return NR.set(e,n),r.observe(e),()=>{NR.delete(e),r.unobserve(e)}}const FR={some:0,all:1};const jR={inView:{Feature:class extends xI{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:FR[r]};return LR(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends xI{mount(){const{current:e}=this.node;e&&(this.unmount=IR(e,(e,t)=>(PR(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return PR(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends xI{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(ND){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=IA(PI(this.node.current,"focus",()=>this.onFocus()),PI(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends xI{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=wR(e,n),o=e=>{if(!_R(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const s=e=>{_R(e)&&(r(e),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,i)};return r.forEach(e=>{e.addEventListener("pointerenter",o,i)}),s}(e,(e,t)=>(SR(this.node,t,"Start"),e=>SR(this.node,e,"End"))))}unmount(){}}}},UR={layout:{ProjectionNode:vR,MeasureLayout:hP}},VR=vA(m(m(m(m({},AI),jR),bR),UR),FT);function zR(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function BR(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qR(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function HR(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function WR(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function GR(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function KR(e,t){let n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function QR(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function YR(e,t,n){let r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],l=n[2];return e[0]=i*l-s*a,e[1]=s*o-r*l,e[2]=r*a-i*o,e}const XR=function(){const e=[0,0,0],t=[0,0,0];return function(n,r){BR(e,n),BR(t,r),KR(e,e),KR(t,t);let i=QR(e,t);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();class JR extends Array{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(function(e,t,n,r){e[0]=t,e[1]=n,e[2]=r}(this,e,t,n),this)}copy(e){return BR(this,e),this}add(e,t){return t?qR(this,e,t):qR(this,this,e),this}sub(e,t){return t?HR(this,e,t):HR(this,this,e),this}multiply(e){var t,n,r;return e.length?(n=this,r=e,(t=this)[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2]):WR(this,this,e),this}divide(e){var t,n,r;return e.length?(n=this,r=e,(t=this)[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2]):WR(this,this,1/e),this}inverse(){var e,t;return t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,(e=this)[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],this}len(){return zR(this)}distance(e){return e?function(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}(this,e):zR(this)}squaredLen(){return GR(this)}squaredDistance(e){return e?function(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}(this,e):GR(this)}negate(){var e,t;return t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,(e=this)[0]=-t[0],e[1]=-t[1],e[2]=-t[2],this}cross(e,t){return t?YR(this,e,t):YR(this,this,e),this}scale(e){return WR(this,this,e),this}normalize(){return KR(this,this),this}dot(e){return QR(this,e)}equals(e){return n=e,(t=this)[0]===n[0]&&t[1]===n[1]&&t[2]===n[2];var t,n}applyMatrix3(e){return function(e,t,n){let r=t[0],i=t[1],s=t[2];e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8]}(this,this,e),this}applyMatrix4(e){return function(e,t,n){let r=t[0],i=t[1],s=t[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o}(this,this,e),this}scaleRotateMatrix4(e){return function(e,t,n){let r=t[0],i=t[1],s=t[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*s)/o,e[1]=(n[1]*r+n[5]*i+n[9]*s)/o,e[2]=(n[2]*r+n[6]*i+n[10]*s)/o}(this,this,e),this}applyQuaternion(e){return function(e,t,n){let r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],l=n[2],c=a*s-l*i,u=l*r-o*s,h=o*i-a*r,d=a*h-l*u,f=l*c-o*h,p=o*u-a*c,m=2*n[3];c*=m,u*=m,h*=m,d*=2,f*=2,p*=2,e[0]=r+c+d,e[1]=i+u+f,e[2]=s+h+p}(this,this,e),this}angle(e){return XR(this,e)}lerp(e,t){return function(e,t,n,r){let i=t[0],s=t[1],o=t[2];e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o)}(this,this,e,t),this}smoothLerp(e,t,n){return function(e,t,n,r,i){const s=Math.exp(-r*i);let o=t[0],a=t[1],l=t[2];e[0]=n[0]+(o-n[0])*s,e[1]=n[1]+(a-n[1])*s,e[2]=n[2]+(l-n[2])*s}(this,this,e,t,n),this}clone(){return new JR(this[0],this[1],this[2])}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],n=this[1],r=this[2];return this[0]=e[0]*t+e[4]*n+e[8]*r,this[1]=e[1]*t+e[5]*n+e[9]*r,this[2]=e[2]*t+e[6]*n+e[10]*r,this.normalize()}}const ZR=new JR;let $R=1;class eN{constructor(){let{canvas:e=document.createElement("canvas"),width:t=300,height:n=150,dpr:r=1,alpha:i=!1,depth:s=!0,stencil:o=!1,antialias:a=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:c=!1,powerPreference:u="default",autoClear:h=!0,webgl:d=2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const f={alpha:i,depth:s,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u};this.dpr=r,this.alpha=i,this.color=!0,this.depth=s,this.stencil=o,this.premultipliedAlpha=l,this.autoClear=h,this.id=$R++,2===d&&(this.gl=e.getContext("webgl2",f)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",f)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=n,this.state.viewport.y=r,this.gl.viewport(n,r,e,t))}setScissor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.gl.scissor(n,r,e,t)}enable(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}disable(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,n,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=r,void 0!==n?this.gl.blendFuncSeparate(e,t,n,r):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,void 0!==t?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,n){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===n||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=n||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,n||0))}setStencilOp(e,t,n){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===n||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=n,this.gl.stencilOp(e,t,n))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer(){let{target:e=this.gl.FRAMEBUFFER,buffer:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,n){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList(e){let{scene:t,camera:n,frustumCull:r,sort:i}=e,s=[];if(n&&r&&n.updateFrustum(),t.traverse(e=>{if(!e.visible)return!0;e.draw&&(r&&e.frustumCulled&&n&&!n.frustumIntersectsMesh(e)||s.push(e))}),i){const e=[],t=[],r=[];s.forEach(i=>{i.program.transparent?i.program.depthTest?t.push(i):r.push(i):e.push(i),i.zDepth=0,0===i.renderOrder&&i.program.depthTest&&n&&(i.worldMatrix.getTranslation(ZR),ZR.applyMatrix4(n.projectionViewMatrix),i.zDepth=ZR.z)}),e.sort(this.sortOpaque),t.sort(this.sortTransparent),r.sort(this.sortUI),s=e.concat(t,r)}return s}render(e){let{scene:t,camera:n,target:r=null,update:i=!0,sort:s=!0,frustumCull:o=!0,clear:a}=e;null===r?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(a||this.autoClear&&!1!==a)&&(!this.depth||r&&!r.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&t.updateMatrixWorld(),n&&n.updateMatrixWorld();this.getRenderList({scene:t,camera:n,frustumCull:o,sort:s}).forEach(e=>{e.draw({camera:n})})}}const tN=new JR;let nN=1,rN=1,iN=!1;class sN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=nN++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in t)this.addAttribute(n,t[n])}addAttribute(e,t){if(this.attributes[e]=t,t.id=rN++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else"index"===e?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((e,t)=>{let{name:n,type:r}=t;if(!this.attributes[n])return void console.warn("active attribute ".concat(n," not being supplied"));const i=this.attributes[n];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let s=1;35674===r&&(s=2),35675===r&&(s=3),35676===r&&(s=4);const o=i.size/s,a=1===s?0:s*s*4,l=1===s?0:4*s;for(let c=0;c<s;c++)this.gl.vertexAttribPointer(e+c,o,i.type,i.normalized,i.stride+a,i.offset+c*l),this.gl.enableVertexAttribArray(e+c),this.gl.renderer.vertexAttribDivisor(e+c,i.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw(e){var t;let{program:n,mode:r=this.gl.TRIANGLES}=e;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(n.attributeOrder)&&(this.VAOs[n.attributeOrder]||this.createVAO(n),this.gl.renderer.bindVertexArray(this.VAOs[n.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(n.attributeOrder)),n.attributeLocations.forEach((e,t)=>{let{name:n}=t;const r=this.attributes[n];r.needsUpdate&&this.updateAttribute(r)});let i=2;(null===(t=this.attributes.index)||void 0===t?void 0:t.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(r,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(r,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;return e.data?e:iN?void 0:(console.warn("No position buffer data found to compute bounds"),iN=!0)}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||(this.bounds={min:new JR,max:new JR,center:new JR,scale:new JR,radius:1/0});const r=this.bounds.min,i=this.bounds.max,s=this.bounds.center,o=this.bounds.scale;r.set(1/0),i.set(-1/0);for(let a=0,l=t.length;a<l;a+=n){const e=t[a],n=t[a+1],s=t[a+2];r.x=Math.min(e,r.x),r.y=Math.min(n,r.y),r.z=Math.min(s,r.z),i.x=Math.max(e,i.x),i.y=Math.max(n,i.y),i.z=Math.max(s,i.z)}o.sub(i,r),s.add(r,i).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let i=0,s=t.length;i<s;i+=n)tN.fromArray(t,i),r=Math.max(r,this.bounds.center.squaredDistance(tN));this.bounds.radius=Math.sqrt(r)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}class oN extends sN{constructor(e){let{attributes:t={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}let aN=1;const lN={};class cN{constructor(e){let{vertex:t,fragment:n,uniforms:r={},transparent:i=!1,cullFace:s=e.BACK,frontFace:o=e.CCW,depthTest:a=!0,depthWrite:l=!0,depthFunc:c=e.LEQUAL}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=r,this.id=aN++,t||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=i,this.cullFace=s,this.frontFace=o,this.depthTest=a,this.depthWrite=l,this.depthFunc=c,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:n})}setShaders(e){let{vertex:t,fragment:n}=e;if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),""!==this.gl.getShaderInfoLog(this.vertexShader)&&console.warn("".concat(this.gl.getShaderInfoLog(this.vertexShader),"\nVertex Shader\n").concat(hN(t)))),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),""!==this.gl.getShaderInfoLog(this.fragmentShader)&&console.warn("".concat(this.gl.getShaderInfoLog(this.fragmentShader),"\nFragment Shader\n").concat(hN(n)))),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<r;o++){let e=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(e,this.gl.getUniformLocation(this.program,e.name));const t=e.name.match(/(\w+)/g);e.uniformName=t[0],e.nameComponents=t.slice(1)}this.attributeLocations=new Map;const i=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const e=this.gl.getActiveAttrib(this.program,o),t=this.gl.getAttribLocation(this.program,e.name);-1!==t&&(i[t]=e.name,this.attributeLocations.set(e,t))}this.attributeOrder=i.join("")}setBlendFunc(e,t,n,r){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,n){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=n}setStencilOp(e,t,n){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=n}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use(){let{flipFaces:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((e,n)=>{let r=this.uniforms[n.uniformName];for(const t of n.nameComponents){if(!r)break;if(!(t in r)){if(Array.isArray(r.value))break;r=void 0;break}r=r[t]}if(!r)return fN("Active uniform ".concat(n.name," has not been supplied"));if(r&&void 0===r.value)return fN("".concat(n.name," uniform is missing a value parameter"));if(r.value.texture)return t+=1,r.value.update(t),uN(this.gl,n.type,e,t);if(r.value.length&&r.value[0].texture){const i=[];return r.value.forEach(e=>{t+=1,e.update(t),i.push(t)}),uN(this.gl,n.type,e,i)}uN(this.gl,n.type,e,r.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function uN(e,t,n,r){r=r.length?function(e){const t=e.length,n=e[0].length;if(void 0===n)return e;const r=t*n;let i=lN[r];i||(lN[r]=i=new Float32Array(r));for(let s=0;s<t;s++)i.set(e[s],s*n);return i}(r):r;const i=e.renderer.state.uniformLocations.get(n);if(r.length)if(void 0===i||i.length!==r.length)e.renderer.state.uniformLocations.set(n,r.slice(0));else{if(function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(i,r))return;i.set?i.set(r):function(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t[n]}(i,r),e.renderer.state.uniformLocations.set(n,i)}else{if(i===r)return;e.renderer.state.uniformLocations.set(n,r)}switch(t){case 5126:return r.length?e.uniform1fv(n,r):e.uniform1f(n,r);case 35664:return e.uniform2fv(n,r);case 35665:return e.uniform3fv(n,r);case 35666:return e.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(n,r):e.uniform1i(n,r);case 35671:case 35667:return e.uniform2iv(n,r);case 35672:case 35668:return e.uniform3iv(n,r);case 35673:case 35669:return e.uniform4iv(n,r);case 35674:return e.uniformMatrix2fv(n,!1,r);case 35675:return e.uniformMatrix3fv(n,!1,r);case 35676:return e.uniformMatrix4fv(n,!1,r)}}function hN(e){let t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}let dN=0;function fN(e){dN>100||(console.warn(e),dN++,dN>100&&console.warn("More than 100 program warnings - stopping logs."))}function pN(e,t,n){let r=t[0],i=t[1],s=t[2],o=t[3],a=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+o*a+i*c-s*l,e[1]=i*u+o*l+s*a-r*c,e[2]=s*u+o*c+r*l-i*a,e[3]=o*u-r*a-i*l-s*c,e}const mN=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},gN=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},yN=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},vN=function(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=s*o,e};class bN extends Array{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1),this.onChange=()=>{},this._target=this;const e=["0","1","2","3"];return new Proxy(this,{set(t,n){const r=Reflect.set(...arguments);return r&&e.includes(n)&&t.onChange(),r}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){var e;return(e=this._target)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.onChange(),this}set(e,t,n,r){return e.length?this.copy(e):(gN(this._target,e,t,n,r),this.onChange(),this)}rotateX(e){return function(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+o*a,e[1]=i*l+s*a,e[2]=s*l-i*a,e[3]=o*l-r*a}(this._target,this._target,e),this.onChange(),this}rotateY(e){return function(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l-s*a,e[1]=i*l+o*a,e[2]=s*l+r*a,e[3]=o*l-i*a}(this._target,this._target,e),this.onChange(),this}rotateZ(e){return function(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+i*a,e[1]=i*l-r*a,e[2]=s*l+o*a,e[3]=o*l-s*a}(this._target,this._target,e),this.onChange(),this}inverse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,a=o?1/o:0;e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=s*a}(this._target,e),this.onChange(),this}conjugate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;var t,n;return t=this._target,n=e,t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],this.onChange(),this}copy(e){return mN(this._target,e),this.onChange(),this}normalize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return vN(this._target,e),this.onChange(),this}multiply(e,t){return t?pN(this._target,e,t):pN(this._target,this._target,e),this.onChange(),this}dot(e){return yN(this._target,e)}fromMatrix3(e){return function(e,t){let n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);let i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*s+s]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+s]-t[3*s+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[s]=(t[3*s+r]+t[3*r+s])*n}}(this._target,e),this.onChange(),this}fromEuler(e,t){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ",r=Math.sin(.5*t[0]),i=Math.cos(.5*t[0]),s=Math.sin(.5*t[1]),o=Math.cos(.5*t[1]),a=Math.sin(.5*t[2]),l=Math.cos(.5*t[2]);"XYZ"===n?(e[0]=r*o*l+i*s*a,e[1]=i*s*l-r*o*a,e[2]=i*o*a+r*s*l,e[3]=i*o*l-r*s*a):"YXZ"===n?(e[0]=r*o*l+i*s*a,e[1]=i*s*l-r*o*a,e[2]=i*o*a-r*s*l,e[3]=i*o*l+r*s*a):"ZXY"===n?(e[0]=r*o*l-i*s*a,e[1]=i*s*l+r*o*a,e[2]=i*o*a+r*s*l,e[3]=i*o*l-r*s*a):"ZYX"===n?(e[0]=r*o*l-i*s*a,e[1]=i*s*l+r*o*a,e[2]=i*o*a-r*s*l,e[3]=i*o*l+r*s*a):"YZX"===n?(e[0]=r*o*l+i*s*a,e[1]=i*s*l+r*o*a,e[2]=i*o*a-r*s*l,e[3]=i*o*l-r*s*a):"XZY"===n&&(e[0]=r*o*l-i*s*a,e[1]=i*s*l-r*o*a,e[2]=i*o*a+r*s*l,e[3]=i*o*l+r*s*a)}(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return function(e,t,n){n*=.5;let r=Math.sin(n);e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n)}(this._target,e,t),this.onChange(),this}slerp(e,t){return function(e,t,n,r){let i,s,o,a,l,c=t[0],u=t[1],h=t[2],d=t[3],f=n[0],p=n[1],m=n[2],g=n[3];s=c*f+u*p+h*m+d*g,s<0&&(s=-s,f=-f,p=-p,m=-m,g=-g),1-s>1e-6?(i=Math.acos(s),o=Math.sin(i),a=Math.sin((1-r)*i)/o,l=Math.sin(r*i)/o):(a=1-r,l=r),e[0]=a*c+l*f,e[1]=a*u+l*p,e[2]=a*h+l*m,e[3]=a*d+l*g}(this._target,this._target,e,t),this.onChange(),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}function wN(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15];return(t*o-n*s)*(h*g-d*m)-(t*a-r*s)*(u*g-d*p)+(t*l-i*s)*(u*m-h*p)+(n*a-r*o)*(c*g-d*f)-(n*l-i*o)*(c*m-h*f)+(r*l-i*a)*(c*p-u*f)}function _N(e,t,n){let r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],y=t[14],v=t[15],b=n[0],w=n[1],_=n[2],S=n[3];return e[0]=b*r+w*a+_*h+S*m,e[1]=b*i+w*l+_*d+S*g,e[2]=b*s+w*c+_*f+S*y,e[3]=b*o+w*u+_*p+S*v,b=n[4],w=n[5],_=n[6],S=n[7],e[4]=b*r+w*a+_*h+S*m,e[5]=b*i+w*l+_*d+S*g,e[6]=b*s+w*c+_*f+S*y,e[7]=b*o+w*u+_*p+S*v,b=n[8],w=n[9],_=n[10],S=n[11],e[8]=b*r+w*a+_*h+S*m,e[9]=b*i+w*l+_*d+S*g,e[10]=b*s+w*c+_*f+S*y,e[11]=b*o+w*u+_*p+S*v,b=n[12],w=n[13],_=n[14],S=n[15],e[12]=b*r+w*a+_*h+S*m,e[13]=b*i+w*l+_*d+S*g,e[14]=b*s+w*c+_*f+S*y,e[15]=b*o+w*u+_*p+S*v,e}function SN(e,t){let n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,o,a),e[2]=Math.hypot(l,c,u),e}const EN=function(){const e=[1,1,1];return function(t,n){let r=e;SN(r,n);let i=1/r[0],s=1/r[1],o=1/r[2],a=n[0]*i,l=n[1]*s,c=n[2]*o,u=n[4]*i,h=n[5]*s,d=n[6]*o,f=n[8]*i,p=n[9]*s,m=n[10]*o,g=a+h+m,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(d-p)/y,t[1]=(f-c)/y,t[2]=(l-u)/y):a>h&&a>m?(y=2*Math.sqrt(1+a-h-m),t[3]=(d-p)/y,t[0]=.25*y,t[1]=(l+u)/y,t[2]=(f+c)/y):h>m?(y=2*Math.sqrt(1+h-a-m),t[3]=(f-c)/y,t[0]=(l+u)/y,t[1]=.25*y,t[2]=(d+p)/y):(y=2*Math.sqrt(1+m-a-h),t[3]=(l-u)/y,t[0]=(f+c)/y,t[1]=(d+p)/y,t[2]=.25*y),t}}();function CN(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function xN(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}class TN extends Array{constructor(){return super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,arguments.length>15&&void 0!==arguments[15]?arguments[15]:1),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,m){return e.length?this.copy(e):(function(e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g){e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=m,e[15]=g}(this,e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,m),this)}translate(e){return function(e,t,n){let r,i,s,o,a,l,c,u,h,d,f,p,m=n[0],g=n[1],y=n[2];t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*m+a*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=s*m+c*g+f*y+t[14],e[15]=o*m+u*g+p*y+t[15])}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}rotate(e,t){return function(e,t,n,r){let i,s,o,a,l,c,u,h,d,f,p,m,g,y,v,b,w,_,S,E,C,x,T,A,k=r[0],I=r[1],P=r[2],R=Math.hypot(k,I,P);Math.abs(R)<1e-6||(R=1/R,k*=R,I*=R,P*=R,i=Math.sin(n),s=Math.cos(n),o=1-s,a=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],m=t[8],g=t[9],y=t[10],v=t[11],b=k*k*o+s,w=I*k*o+P*i,_=P*k*o-I*i,S=k*I*o-P*i,E=I*I*o+s,C=P*I*o+k*i,x=k*P*o+I*i,T=I*P*o-k*i,A=P*P*o+s,e[0]=a*b+h*w+m*_,e[1]=l*b+d*w+g*_,e[2]=c*b+f*w+y*_,e[3]=u*b+p*w+v*_,e[4]=a*S+h*E+m*C,e[5]=l*S+d*E+g*C,e[6]=c*S+f*E+y*C,e[7]=u*S+p*E+v*C,e[8]=a*x+h*T+m*A,e[9]=l*x+d*T+g*A,e[10]=c*x+f*T+y*A,e[11]=u*x+p*T+v*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,e,t),this}scale(e){return function(e,t,n){let r=n[0],i=n[1],s=n[2];e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,"number"===typeof e?[e,e,e]:e),this}add(e,t){return t?CN(this,e,t):CN(this,this,e),this}sub(e,t){return t?xN(this,e,t):xN(this,this,e),this}multiply(e,t){var n,r,i;return e.length?t?_N(this,e,t):_N(this,this,e):(r=this,i=e,(n=this)[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=r[7]*i,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,n[11]=r[11]*i,n[12]=r[12]*i,n[13]=r[13]*i,n[14]=r[14]*i,n[15]=r[15]*i),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}copy(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}fromPerspective(){let{fov:e,aspect:t,near:n,far:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t,n,r,i){let s=1/Math.tan(t/2),o=1/(r-i);e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0}(this,e,t,n,r),this}fromOrthogonal(e){let{left:t,right:n,bottom:r,top:i,near:s,far:o}=e;return function(e,t,n,r,i,s,o){let a=1/(t-n),l=1/(r-i),c=1/(s-o);e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*l,e[14]=(o+s)*c,e[15]=1}(this,t,n,r,i,s,o),this}fromQuaternion(e){return function(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,d=i*o,f=i*a,p=i*l,m=s*o,g=s*a,y=s*l;e[0]=1-h-p,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-p,e[6]=f+m,e[7]=0,e[8]=d+g,e[9]=f-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(){return function(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*a-r*o,b=n*l-i*o,w=n*c-s*o,_=r*l-i*a,S=r*c-s*a,E=i*c-s*l,C=u*m-h*p,x=u*g-d*p,T=u*y-f*p,A=h*g-d*m,k=h*y-f*m,I=d*y-f*g,P=v*I-b*k+w*A+_*T-S*x+E*C;P&&(P=1/P,e[0]=(a*I-l*k+c*A)*P,e[1]=(i*k-r*I-s*A)*P,e[2]=(m*E-g*S+y*_)*P,e[3]=(d*S-h*E-f*_)*P,e[4]=(l*T-o*I-c*x)*P,e[5]=(n*I-i*T+s*x)*P,e[6]=(g*w-p*E-y*b)*P,e[7]=(u*E-d*w+f*b)*P,e[8]=(o*k-a*T+c*C)*P,e[9]=(r*T-n*k-s*C)*P,e[10]=(p*S-m*w+y*v)*P,e[11]=(h*w-u*S-f*v)*P,e[12]=(a*x-o*A-l*C)*P,e[13]=(n*A-r*x+i*C)*P,e[14]=(m*b-p*_-g*v)*P,e[15]=(u*_-h*b+d*v)*P)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}compose(e,t,n){return function(e,t,n,r){const i=e,s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,m=o*u,g=o*h,y=a*h,v=l*c,b=l*u,w=l*h,_=r[0],S=r[1],E=r[2];i[0]=(1-(m+y))*_,i[1]=(f+w)*_,i[2]=(p-b)*_,i[3]=0,i[4]=(f-w)*S,i[5]=(1-(d+y))*S,i[6]=(g+v)*S,i[7]=0,i[8]=(p+b)*E,i[9]=(g-v)*E,i[10]=(1-(d+m))*E,i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1}(this,e,t,n),this}decompose(e,t,n){return function(e,t,n,r){let i=zR([e[0],e[1],e[2]]);const s=zR([e[4],e[5],e[6]]),o=zR([e[8],e[9],e[10]]);wN(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const a=e.slice(),l=1/i,c=1/s,u=1/o;a[0]*=l,a[1]*=l,a[2]*=l,a[4]*=c,a[5]*=c,a[6]*=c,a[8]*=u,a[9]*=u,a[10]*=u,EN(t,a),r[0]=i,r[1]=s,r[2]=o}(this,e,t,n),this}getRotation(e){return EN(e,this),this}getTranslation(e){var t,n;return n=this,(t=e)[0]=n[12],t[1]=n[13],t[2]=n[14],this}getScaling(e){return SN(e,this),this}getMaxScaleOnAxis(){return function(e){let t=e[0],n=e[1],r=e[2],i=e[4],s=e[5],o=e[6],a=e[8],l=e[9],c=e[10];const u=t*t+n*n+r*r,h=i*i+s*s+o*o,d=a*a+l*l+c*c;return Math.sqrt(Math.max(u,h,d))}(this)}lookAt(e,t,n){return function(e,t,n,r){let i=t[0],s=t[1],o=t[2],a=r[0],l=r[1],c=r[2],u=i-n[0],h=s-n[1],d=o-n[2],f=u*u+h*h+d*d;0===f?d=1:(f=1/Math.sqrt(f),u*=f,h*=f,d*=f);let p=l*d-c*h,m=c*u-a*d,g=a*h-l*u;f=p*p+m*m+g*g,0===f&&(c?a+=1e-6:l?c+=1e-6:l+=1e-6,p=l*d-c*h,m=c*u-a*d,g=a*h-l*u,f=p*p+m*m+g*g),f=1/Math.sqrt(f),p*=f,m*=f,g*=f,e[0]=p,e[1]=m,e[2]=g,e[3]=0,e[4]=h*g-d*m,e[5]=d*p-u*g,e[6]=u*m-h*p,e[7]=0,e[8]=u,e[9]=h,e[10]=d,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1}(this,e,t,n),this}determinant(){return wN(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}const AN=new TN;class kN extends Array{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YXZ";super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e),this.order=t,this.onChange=()=>{},this._target=this;const n=["0","1","2"];return new Proxy(this,{set(e,t){const r=Reflect.set(...arguments);return r&&n.includes(t)&&e.onChange(),r}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=n,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ";"XYZ"===n?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):"YXZ"===n?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):"ZXY"===n?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):"ZYX"===n?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):"YZX"===n?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):"XZY"===n&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0))}(this._target,e,t),this.onChange(),this}fromQuaternion(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order,n=arguments.length>2?arguments[2]:void 0;return AN.fromQuaternion(e),this._target.fromRotationMatrix(AN,t),n||this.onChange(),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class IN{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new TN,this.worldMatrix=new TN,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new JR,this.quaternion=new bN,this.scale=new JR(1),this.rotation=new kN,this.up=new JR(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function PN(e,t,n){let r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],f=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],b=n[7],w=n[8];return e[0]=d*r+f*o+p*c,e[1]=d*i+f*a+p*u,e[2]=d*s+f*l+p*h,e[3]=m*r+g*o+y*c,e[4]=m*i+g*a+y*u,e[5]=m*s+g*l+y*h,e[6]=v*r+b*o+w*c,e[7]=v*i+b*a+w*u,e[8]=v*s+b*l+w*h,e}class RN extends Array{constructor(){return super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:1),this}set(e,t,n,r,i,s,o,a,l){return e.length?this.copy(e):(function(e,t,n,r,i,s,o,a,l,c){e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c}(this,e,t,n,r,i,s,o,a,l),this)}translate(e){return function(e,t,n){let r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],f=n[1];e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=d*r+f*o+c,e[7]=d*i+f*a+u,e[8]=d*s+f*l+h}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}rotate(e){return function(e,t,n){let r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(n),f=Math.cos(n);e[0]=f*r+d*o,e[1]=f*i+d*a,e[2]=f*s+d*l,e[3]=f*o-d*r,e[4]=f*a-d*i,e[5]=f*l-d*s,e[6]=c,e[7]=u,e[8]=h}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}scale(e){return function(e,t,n){let r=n[0],i=n[1];e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}multiply(e,t){return t?PN(this,e,t):PN(this,this,e),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this}copy(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}fromMatrix4(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],this}fromQuaternion(e){return function(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,d=i*o,f=i*a,p=i*l,m=s*o,g=s*a,y=s*l;e[0]=1-h-p,e[3]=u-y,e[6]=d+g,e[1]=u+y,e[4]=1-c-p,e[7]=f-m,e[2]=d-g,e[5]=f+m,e[8]=1-c-h}(this,e),this}fromBasis(e,t,n){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]),this}inverse(){return function(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=u*o-a*c,d=-u*s+a*l,f=c*s-o*l,p=n*h+r*d+i*f;p&&(p=1/p,e[0]=h*p,e[1]=(-u*r+i*c)*p,e[2]=(a*r-i*o)*p,e[3]=d*p,e[4]=(u*n-i*l)*p,e[5]=(-a*n+i*s)*p,e[6]=f*p,e[7]=(-c*n+r*l)*p,e[8]=(o*n-r*s)*p)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}getNormalMatrix(e){return function(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*a-r*o,b=n*l-i*o,w=n*c-s*o,_=r*l-i*a,S=r*c-s*a,E=i*c-s*l,C=u*m-h*p,x=u*g-d*p,T=u*y-f*p,A=h*g-d*m,k=h*y-f*m,I=d*y-f*g,P=v*I-b*k+w*A+_*T-S*x+E*C;P&&(P=1/P,e[0]=(a*I-l*k+c*A)*P,e[1]=(l*T-o*I-c*x)*P,e[2]=(o*k-a*T+c*C)*P,e[3]=(i*k-r*I-s*A)*P,e[4]=(n*I-i*T+s*x)*P,e[5]=(r*T-n*k-s*C)*P,e[6]=(m*E-g*S+y*_)*P,e[7]=(g*w-p*E-y*b)*P,e[8]=(p*S-m*w+y*v)*P)}(this,e),this}}let NN=0;class DN extends IN{constructor(e){let{geometry:t,program:n,mode:r=e.TRIANGLES,frustumCulled:i=!0,renderOrder:s=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=NN++,this.geometry=t,this.program=n,this.mode=r,this.frustumCulled=i,this.renderOrder=s,this.modelViewMatrix=new TN,this.normalMatrix=new RN,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw(){let{camera:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}))}}function ON(e){let{hue:t=0,hoverIntensity:n=4.5,rotateOnHover:r=!0,forceHoverState:i=!1}=e;const s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{const e=s.current;if(!e)return;const o=new eN({alpha:!0,premultipliedAlpha:!1}),a=o.gl;a.clearColor(0,0,0,0),e.appendChild(a.canvas);const l=new oN(a),c=new cN(a,{vertex:"\n    precision highp float;\n    attribute vec2 position;\n    attribute vec2 uv;\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = vec4(position, 0.0, 1.0);\n    }\n  ",fragment:"\n    precision highp float;\n\n    uniform float iTime;\n    uniform vec3 iResolution;\n    uniform float hue;\n    uniform float hover;\n    uniform float rot;\n    uniform float hoverIntensity;\n    varying vec2 vUv;\n\n    vec3 rgb2yiq(vec3 c) {\n      float y = dot(c, vec3(0.299, 0.587, 0.114));\n      float i = dot(c, vec3(0.596, -0.274, -0.322));\n      float q = dot(c, vec3(0.211, -0.523, 0.312));\n      return vec3(y, i, q);\n    }\n    \n    vec3 yiq2rgb(vec3 c) {\n      float r = c.x + 0.956 * c.y + 0.621 * c.z;\n      float g = c.x - 0.272 * c.y - 0.647 * c.z;\n      float b = c.x - 1.106 * c.y + 1.703 * c.z;\n      return vec3(r, g, b);\n    }\n    \n    vec3 adjustHue(vec3 color, float hueDeg) {\n      float hueRad = hueDeg * 3.14159265 / 180.0;\n      vec3 yiq = rgb2yiq(color);\n      float cosA = cos(hueRad);\n      float sinA = sin(hueRad);\n      float i = yiq.y * cosA - yiq.z * sinA;\n      float q = yiq.y * sinA + yiq.z * cosA;\n      yiq.y = i;\n      yiq.z = q;\n      return yiq2rgb(yiq);\n    }\n\n    vec3 hash33(vec3 p3) {\n      p3 = fract(p3 * vec3(0.1031, 0.11369, 0.13787));\n      p3 += dot(p3, p3.yxz + 19.19);\n      return -1.0 + 2.0 * fract(vec3(\n        p3.x + p3.y,\n        p3.x + p3.z,\n        p3.y + p3.z\n      ) * p3.zyx);\n    }\n\n    float snoise3(vec3 p) {\n      const float K1 = 0.333333333;\n      const float K2 = 0.166666667;\n      vec3 i = floor(p + (p.x + p.y + p.z) * K1);\n      vec3 d0 = p - (i - (i.x + i.y + i.z) * K2);\n      vec3 e = step(vec3(0.0), d0 - d0.yzx);\n      vec3 i1 = e * (1.0 - e.zxy);\n      vec3 i2 = 1.0 - e.zxy * (1.0 - e);\n      vec3 d1 = d0 - (i1 - K2);\n      vec3 d2 = d0 - (i2 - K1);\n      vec3 d3 = d0 - 0.5;\n      vec4 h = max(0.6 - vec4(\n        dot(d0, d0),\n        dot(d1, d1),\n        dot(d2, d2),\n        dot(d3, d3)\n      ), 0.0);\n      vec4 n = h * h * h * h * vec4(\n        dot(d0, hash33(i)),\n        dot(d1, hash33(i + i1)),\n        dot(d2, hash33(i + i2)),\n        dot(d3, hash33(i + 1.0))\n      );\n      return dot(vec4(31.316), n);\n    }\n\n    vec4 extractAlpha(vec3 colorIn) {\n      float a = max(max(colorIn.r, colorIn.g), colorIn.b);\n      return vec4(colorIn.rgb / (a + 1e-5), a);\n    }\n\n    const vec3 baseColor1 = vec3(0.611765, 0.262745, 0.996078);\n    const vec3 baseColor2 = vec3(0.298039, 0.760784, 0.913725);\n    const vec3 baseColor3 = vec3(0.062745, 0.078431, 0.600000);\n    const float innerRadius = 0.6;\n    const float noiseScale = 0.65;\n\n    float light1(float intensity, float attenuation, float dist) {\n      return intensity / (1.0 + dist * attenuation);\n    }\n    float light2(float intensity, float attenuation, float dist) {\n      return intensity / (1.0 + dist * dist * attenuation);\n    }\n\n    vec4 draw(vec2 uv) {\n      vec3 color1 = adjustHue(baseColor1, hue);\n      vec3 color2 = adjustHue(baseColor2, hue);\n      vec3 color3 = adjustHue(baseColor3, hue);\n      \n      float ang = atan(uv.y, uv.x);\n      float len = length(uv);\n      float invLen = len > 0.0 ? 1.0 / len : 0.0;\n      \n      float n0 = snoise3(vec3(uv * noiseScale, iTime * 0.5)) * 0.5 + 0.5;\n      float r0 = mix(mix(innerRadius, 1.0, 0.4), mix(innerRadius, 1.0, 0.6), n0);\n      float d0 = distance(uv, (r0 * invLen) * uv);\n      float v0 = light1(1.0, 10.0, d0);\n      v0 *= smoothstep(r0 * 1.05, r0, len);\n      float cl = cos(ang + iTime * 2.0) * 0.5 + 0.5;\n      \n      float a = iTime * -1.0;\n      vec2 pos = vec2(cos(a), sin(a)) * r0;\n      float d = distance(uv, pos);\n      float v1 = light2(1.5, 5.0, d);\n      v1 *= light1(1.0, 50.0, d0);\n      \n      float v2 = smoothstep(1.0, mix(innerRadius, 1.0, n0 * 0.5), len);\n      float v3 = smoothstep(innerRadius, mix(innerRadius, 1.0, 0.5), len);\n      \n      vec3 col = mix(color1, color2, cl);\n      col = mix(color3, col, v0);\n      col = (col + v1) * v2 * v3;\n      col = clamp(col, 0.0, 1.0);\n      \n      return extractAlpha(col);\n    }\n\n    vec4 mainImage(vec2 fragCoord) {\n      vec2 center = iResolution.xy * 0.5;\n      float size = min(iResolution.x, iResolution.y);\n      vec2 uv = (fragCoord - center) / size * 2.0;\n      \n      float angle = rot;\n      float s = sin(angle);\n      float c = cos(angle);\n      uv = vec2(c * uv.x - s * uv.y, s * uv.x + c * uv.y);\n      \n      uv.x += hover * hoverIntensity * 0.1 * sin(uv.y * 10.0 + iTime);\n      uv.y += hover * hoverIntensity * 0.1 * sin(uv.x * 10.0 + iTime);\n      \n      return draw(uv);\n    }\n\n    void main() {\n      vec2 fragCoord = vUv * iResolution.xy;\n      vec4 col = mainImage(fragCoord);\n      gl_FragColor = vec4(col.rgb * col.a, col.a);\n    }\n  ",uniforms:{iTime:{value:0},iResolution:{value:new JR(a.canvas.width,a.canvas.height,a.canvas.width/a.canvas.height)},hue:{value:t},hover:{value:0},rot:{value:0},hoverIntensity:{value:n}}}),u=new DN(a,{geometry:l,program:c});function h(){if(!e)return;const t=window.devicePixelRatio||1,n=e.clientWidth,r=e.clientHeight;o.setSize(n*t,r*t),a.canvas.style.width=n+"px",a.canvas.style.height=r+"px",c.uniforms.iResolution.value.set(a.canvas.width,a.canvas.height,a.canvas.width/a.canvas.height)}window.addEventListener("resize",h),h();let d=0,f=0,p=0;const m=t=>{const n=e.getBoundingClientRect(),r=t.clientX-n.left,i=t.clientY-n.top,s=n.width,o=n.height,a=Math.min(s,o),l=(r-s/2)/a*2,c=(i-o/2)/a*2;d=Math.sqrt(l*l+c*c)<.8?1:0},g=()=>{d=0};let y;e.addEventListener("mousemove",m),e.addEventListener("mouseleave",g);const v=e=>{y=requestAnimationFrame(v);const s=.001*(e-f);f=e,c.uniforms.iTime.value=.001*e,c.uniforms.hue.value=t,c.uniforms.hoverIntensity.value=n;const a=i?1:d;c.uniforms.hover.value+=.1*(a-c.uniforms.hover.value),r&&a>.5&&(p+=.3*s),c.uniforms.rot.value=p,o.render({scene:u})};return y=requestAnimationFrame(v),()=>{var t;cancelAnimationFrame(y),window.removeEventListener("resize",h),e.removeEventListener("mousemove",m),e.removeEventListener("mouseleave",g),e.removeChild(a.canvas),null===(t=a.getExtension("WEBGL_lose_context"))||void 0===t||t.loseContext()}},[t,n,r,i]),(0,jE.jsx)("div",{ref:s,className:"orb-container"})}const MN=()=>{const{currentUser:e,loading:t}=VE(),n=e?"/dashboard":"/auth",r={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},i=e=>{let{children:t,href:n="#"}=e;return(0,jE.jsx)("a",{href:n,className:"text-gray-400 hover:text-white transition-colors",children:t})};return(0,jE.jsxs)("div",{className:"flex flex-col min-h-screen bg-black text-white",children:[(0,jE.jsx)("div",{className:"fixed top-0 left-0 right-0 z-20 p-12 flex justify-center",children:(0,jE.jsxs)(VR.header,{className:"flex justify-between items-center z-20 min-w-[500px] p-4 px-6 bg-gray-900/40 backdrop-blur rounded-full border border-white/10",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut"},children:[(0,jE.jsx)("div",{className:"flex items-center gap-2",children:(0,jE.jsx)("span",{className:"font-bold text-xl bg-gradient-to-r from-purple-500 to-blue-400 bg-clip-text text-transparent",children:"CODECOLLAB"})}),(0,jE.jsxs)("nav",{className:"flex items-center gap-6 text-sm",children:[(0,jE.jsx)(i,{children:"Features"}),(0,jE.jsx)(i,{children:"Docs"})]})]})}),(0,jE.jsx)("main",{className:"flex-1 flex items-center justify-center p-6 relative",children:(0,jE.jsxs)(VR.div,{className:"relative w-full max-w-6xl h-[700px]",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},initial:"hidden",animate:"visible",children:[(0,jE.jsx)("div",{className:"absolute inset-0 z-0",children:(0,jE.jsx)(ON,{hue:0,hoverIntensity:4.5})}),(0,jE.jsxs)("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center text-center pointer-events-none",children:[(0,jE.jsx)(VR.h1,{variants:r,className:"text-5xl md:text-7xl font-bold mb-8 max-w-3xl",children:"Become emboldened by the flame of ambition"}),(0,jE.jsxs)(VR.div,{variants:r,className:"flex gap-4",children:[(0,jE.jsx)(St,{to:n,className:"pointer-events-auto px-8 py-3 bg-white text-black text-md font-semibold rounded-full shadow-md transition-all hover:bg-gray-200 hover:scale-105",children:t?"Loading...":"Get Started"}),(0,jE.jsx)("button",{className:"pointer-events-auto px-8 py-3 bg-gray-800 text-gray-300 text-md font-semibold rounded-full shadow-md transition-all hover:bg-gray-700 hover:scale-105",children:"Learn More"})]})]})]})})]})},LN=e=>{let{className:t}=e;return(0,jE.jsxs)("svg",{className:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,jE.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.73 3.28-8.09z",fill:"#4285F4"}),(0,jE.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.84 0-5.22-1.92-6.1-4.49H2.34v2.84C4.13 21.08 7.79 23 12 23z",fill:"#34A853"}),(0,jE.jsx)("path",{d:"M5.9 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.34C1.6 8.25 1 9.61 1 11.09c0 1.48.6 2.84 1.34 4.02l3.56-2.84z",fill:"#FBBC05"}),(0,jE.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.79 1 4.13 2.92 2.34 5.94l3.56 2.84c.88-2.57 3.26-4.4 6.1-4.4z",fill:"#EA4335"})]})},FN=()=>{const{signInWithGoogle:e,currentUser:t}=VE(),n=we();(0,a.useEffect)(()=>{t&&n("/dashboard")},[t,n]);return t?null:(0,jE.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:(0,jE.jsxs)("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-xl shadow-lg",children:[(0,jE.jsx)("h2",{className:"text-3xl font-bold text-center text-white",children:"Welcome to CodeCollab"}),(0,jE.jsx)("p",{className:"text-center text-gray-400",children:"Sign in to start your collaborative coding journey."}),(0,jE.jsxs)("button",{onClick:async()=>{try{await e(),n("/dashboard")}catch(mv){console.error("Failed to sign in with Google:",mv)}},className:"w-full py-3 px-4 flex items-center justify-center gap-3 bg-white text-gray-700 font-medium rounded-lg shadow-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all",children:[(0,jE.jsx)(LN,{className:"w-6 h-6"}),(0,jE.jsx)("span",{className:"text-lg",children:"Sign in with Google"})]})]})})},jN=()=>(0,jE.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"}),UN=()=>{const{currentUser:e,userProfile:t}=VE();if(!e||!t)return(0,jE.jsx)("div",{className:"w-64 bg-gray-800 p-4 text-gray-400",children:"Loading..."});const n={Beginner:"bg-green-500",Intermediate:"bg-yellow-500",Advanced:"bg-red-500"}[t.skillLevel]||"bg-gray-500";return(0,jE.jsxs)("div",{className:"w-72 bg-gray-800 text-white min-h-screen p-5 flex flex-col",children:[(0,jE.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,jE.jsx)("img",{src:t.avatar?t.avatar:"https://i.imgur.com/6bE0a8Z.png",alt:"Avatar",className:"w-24 h-24 rounded-full mb-4 border-4 border-indigo-500"}),(0,jE.jsx)("h2",{className:"text-2xl font-bold",children:t.username}),(0,jE.jsxs)("div",{className:"flex items-center mt-2",children:[(0,jE.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(n," mr-2")}),(0,jE.jsx)("span",{className:"text-sm text-gray-300",children:t.skillLevel})]}),(0,jE.jsx)("span",{className:"text-sm text-yellow-400 mt-1",children:"\u2b50 4.8/5 Reputation"})]}),(0,jE.jsxs)("div",{className:"mb-6",children:[(0,jE.jsx)("h3",{className:"text-xs uppercase text-gray-400 font-semibold mb-3",children:"Stats"}),(0,jE.jsxs)("div",{className:"space-y-3",children:[(0,jE.jsxs)("p",{className:"flex items-center text-gray-300",children:[(0,jE.jsx)(jN,{})," Problems solved: ",(0,jE.jsx)("strong",{className:"ml-2",children:"0"})]}),(0,jE.jsxs)("p",{className:"flex items-center text-gray-300",children:[(0,jE.jsx)(jN,{})," Partners met: ",(0,jE.jsx)("strong",{className:"ml-2",children:"0"})]}),(0,jE.jsxs)("p",{className:"flex items-center text-gray-300",children:[(0,jE.jsx)(jN,{})," Total time: ",(0,jE.jsx)("strong",{className:"ml-2",children:"0h"})]}),(0,jE.jsxs)("p",{className:"flex items-center text-gray-300",children:[(0,jE.jsx)(jN,{})," Current streak: ",(0,jE.jsx)("strong",{className:"ml-2",children:"0 days"})]})]})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("h3",{className:"text-xs uppercase text-gray-400 font-semibold mb-3",children:"Friends"}),(0,jE.jsxs)("div",{className:"space-y-3",children:[(0,jE.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jE.jsxs)("span",{className:"flex items-center",children:[(0,jE.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Priya"]}),(0,jE.jsx)(St,{to:"#",className:"text-indigo-400 hover:text-indigo-300 text-sm",children:"Chat"})]}),(0,jE.jsx)("div",{className:"flex items-center justify-between",children:(0,jE.jsxs)("span",{className:"flex items-center text-gray-500",children:[(0,jE.jsx)("span",{className:"w-2 h-2 bg-gray-500 rounded-full mr-2"}),"Rahul"]})})]})]}),(0,jE.jsx)("div",{className:"flex-grow"}),(0,jE.jsx)("button",{onClick:()=>ME.signOut(),className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Sign Out"})]})},VN=()=>(0,jE.jsx)("span",{children:"\ud83e\udd1d"}),zN=()=>(0,jE.jsx)("span",{children:"\u2795"}),BN=()=>(0,jE.jsx)("span",{children:"\ud83c\udfc6"}),qN=()=>(0,jE.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,jE.jsxs)("button",{className:"flex flex-col items-center justify-center p-6 bg-indigo-600 rounded-lg text-white font-semibold shadow-lg hover:bg-indigo-700 transition-colors",children:[(0,jE.jsx)(VN,{}),(0,jE.jsx)("span",{className:"mt-2 text-lg",children:"Find Coding Partner"})]}),(0,jE.jsxs)("button",{className:"flex flex-col items-center justify-center p-6 bg-gray-700 rounded-lg text-white font-semibold shadow-lg hover:bg-gray-600 transition-colors",children:[(0,jE.jsx)(zN,{}),(0,jE.jsx)("span",{className:"mt-2 text-lg",children:"Create Room"})]}),(0,jE.jsxs)("button",{className:"flex flex-col items-center justify-center p-6 bg-gray-700 rounded-lg text-white font-semibold shadow-lg hover:bg-gray-600 transition-colors",children:[(0,jE.jsx)(BN,{}),(0,jE.jsx)("span",{className:"mt-2 text-lg",children:"Leaderboard"})]})]}),HN=()=>(0,jE.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,jE.jsx)("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.58.176-2.34.296a.75.75 0 00-.7.712c-.217 2.016-.432 4.032-.646 6.048a.75.75 0 00.7.797c.76.12 1.52.22 2.28.312v5.942a2.75 2.75 0 002.75 2.75h2.5a2.75 2.75 0 002.75-2.75V12.33a.75.75 0 00.7.797c.76.12 1.52.22 2.28.312a.75.75 0 00.7-.712c-.217-2.016-.432-4.032-.646-6.048a.75.75 0 00-.7-.797c-.76-.12-1.52-.22-2.28-.312V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 2.5a1.25 1.25 0 011.25 1.25v.443c-.795.077-1.58.176-2.34.296a.75.75 0 00-.16.01V3.75A1.25 1.25 0 0110 2.5zm-2.25 1.5v.443a.75.75 0 00-.16.01c-.76.12-1.52.22-2.28.312V3.75a1.25 1.25 0 011.25-1.25h.06a.75.75 0 00.15-.01c.76-.12 1.52-.22 2.28-.312V2.5h-.06A1.25 1.25 0 007.75 3.75z",clipRule:"evenodd"})}),WN=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"python":return"bg-blue-500";case"javascript":return"bg-yellow-500";case"java":return"bg-red-500";case"c++":return"bg-purple-500";default:return"bg-gray-500"}},GN=e=>{let{room:t,currentUserUid:n,onDeleteRoom:r}=e;const i=t.hostId===n;return(0,jE.jsxs)("div",{className:"bg-gray-800 p-5 rounded-lg shadow-lg flex justify-between items-center",children:[(0,jE.jsxs)("div",{children:[(0,jE.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:t.roomName}),(0,jE.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[(0,jE.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(WN(t.language)),children:t.language}),(0,jE.jsxs)("span",{className:"font-medium",children:[t.mode," Mode"]}),(0,jE.jsx)("span",{className:"font-medium",children:(s=t.participantProfiles,o=t.maxParticipants,"(".concat((null===s||void 0===s?void 0:s.length)||0,"/").concat(o||"N/A",")"))})]})]}),(0,jE.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jE.jsx)(St,{to:"/room/".concat(t.roomId),className:"bg-indigo-600 text-white font-semibold px-5 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"Rejoin Room"}),i&&r&&(0,jE.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),r&&r(t.roomId,t.roomName)},title:"Delete Room",className:"p-2 bg-red-800 text-white rounded-lg hover:bg-red-700 transition-colors",children:(0,jE.jsx)(HN,{})})]})]});var s,o},KN=()=>{const{currentUser:e}=VE(),[t,n]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[s,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!e)return;(async()=>{i(!0),o(null);try{const t=Sy(Ig(LE,"rooms"),Cy("participants","array-contains",e.uid),Ay("createdAt","desc")),r=await zy(t),i=[];r.forEach(e=>{i.push(m({id:e.id},e.data()))}),n(i)}catch(t){console.error("Error fetching user's rooms:",t),o("Failed to load your rooms.")}i(!1)})()},[e]);const l=async(e,t)=>{var r;if(window.confirm('Are you sure you want to delete the room "'.concat(t,'"? This action is permanent.')))try{const t=Pg(LE,"rooms",e);await(r=t,Wy(Ll(r.firestore,Mg),[new fd(r._key,ed.none())]));const i=vE(FE,"rooms/".concat(e));await wE(i),n(t=>t.filter(t=>t.id!==e))}catch(i){console.error("Error deleting room:",i),o("Failed to delete room. (Check security rules? Error: ".concat(i.message,")"))}};return(0,jE.jsx)("div",{className:"p-4 bg-gray-800 rounded-lg",children:r?(0,jE.jsx)("p",{className:"text-gray-400",children:"Loading your rooms..."}):s?(0,jE.jsx)("p",{className:"text-red-400",children:s}):0===t.length?(0,jE.jsx)("p",{className:"text-gray-400",children:"You haven't joined or created any rooms yet."}):(0,jE.jsxs)("div",{className:"space-y-4",children:[(0,jE.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Active & Recent Rooms"}),t.map(t=>(0,jE.jsx)(GN,{room:t,currentUserUid:e.uid,onDeleteRoom:l},t.id))]})})};let QN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};const YN=()=>{const{currentUser:e,userProfile:t}=VE(),n=we(),[r,i]=(0,a.useState)(""),[s,o]=(0,a.useState)("Free Code"),[l,c]=(0,a.useState)(t.preferredLanguage||"Python"),[u,h]=(0,a.useState)("Public"),[d,f]=(0,a.useState)(2),[p,m]=(0,a.useState)(!1),[g,y]=(0,a.useState)("");return(0,jE.jsxs)("div",{className:"p-8 bg-gray-800 rounded-lg max-w-2xl mx-auto",children:[(0,jE.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Create New Room"}),(0,jE.jsxs)("form",{onSubmit:async i=>{if(i.preventDefault(),r){m(!0),y("");try{const i=Sy(Ig(LE,"rooms"),Cy("hostId","==",e.uid)),o=await Ky(i);if(o.data().count>=5)return y("You have reached the 5-room limit. Please delete an old room from the 'My Rooms' tab."),void m(!1);const a=QN(10),c=QN(),h=(e=>{switch(e.toLowerCase()){case"python":return"py";case"javascript":return"js";case"java":return"java";case"c++":return"cpp";default:return"txt"}})(l),f="Main.".concat(h),p={[c]:{name:f,code:"// Welcome to ".concat(r,"!\n// Start coding in ").concat(f),output:'Click "Run Code" to see output...'}},g={[e.uid]:{activeFileId:c}},v=Pg(LE,"rooms",a);await By(v,{roomId:a,hostId:e.uid,hostUsername:t.username,roomName:r,mode:s,language:l,privacy:u,maxParticipants:d,participants:[e.uid],participantProfiles:[{uid:e.uid,username:t.username,avatar:t.avatar}],createdAt:Qy()});const b=vE(FE,"rooms/".concat(a));await _E(b,{files:p,presence:g}),n("/room/".concat(a))}catch(o){console.error("Error creating room:",o),y("Failed to create room. Please try again."),m(!1)}}else y("Please enter a room name.")},className:"space-y-6",children:[(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{htmlFor:"roomName",className:"block text-sm font-medium text-gray-300",children:"Room Name"}),(0,jE.jsx)("input",{type:"text",id:"roomName",value:r,onChange:e=>i(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Graph Algorithms Practice"})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Select Mode"}),(0,jE.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,jE.jsxs)("button",{type:"button",onClick:()=>o("Free Code"),className:"flex-1 p-4 rounded-lg transition-all ".concat("Free Code"===s?"bg-indigo-600 ring-2 ring-white":"bg-gray-700 hover:bg-gray-600"),children:[(0,jE.jsx)("h3",{className:"font-bold text-lg",children:"Free Code Mode"}),(0,jE.jsx)("p",{className:"text-sm text-gray-300",children:"Collaborative editor, practice together."})]}),(0,jE.jsxs)("button",{type:"button",onClick:()=>o("Challenge"),className:"flex-1 p-4 rounded-lg transition-all ".concat("Challenge"===s?"bg-purple-600 ring-2 ring-white":"bg-gray-700 hover:bg-gray-600"),children:[(0,jE.jsx)("h3",{className:"font-bold text-lg",children:"Challenge Mode"}),(0,jE.jsx)("p",{className:"text-sm text-gray-300",children:"Competitive coding battle!"})]})]})]}),(0,jE.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-300",children:"Language"}),(0,jE.jsxs)("select",{id:"language",value:l,onChange:e=>c(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,jE.jsx)("option",{children:"C++"}),(0,jE.jsx)("option",{children:"Java"}),(0,jE.jsx)("option",{children:"Python"}),(0,jE.jsx)("option",{children:"JavaScript"})]})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{htmlFor:"privacy",className:"block text-sm font-medium text-gray-300",children:"Privacy"}),(0,jE.jsxs)("select",{id:"privacy",value:u,onChange:e=>h(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,jE.jsx)("option",{children:"Public"}),(0,jE.jsx)("option",{children:"Private"})]})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{htmlFor:"participants",className:"block text-sm font-medium text-gray-300",children:"Participants"}),(0,jE.jsxs)("select",{id:"participants",value:d,onChange:e=>f(parseInt(e.target.value)),className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,jE.jsx)("option",{children:"2"}),(0,jE.jsx)("option",{children:"3"}),(0,jE.jsx)("option",{children:"4"})]})]})]}),g&&(0,jE.jsx)("p",{className:"text-red-400 text-center",children:g}),(0,jE.jsx)("button",{type:"submit",disabled:p,className:"w-full py-3 px-4 bg-green-600 text-white text-lg font-bold rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all disabled:bg-gray-500",children:p?"Creating Room...":"Create Room & Enter"})]})]})},XN=()=>{const e=we(),[t,n]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[s,o]=(0,a.useState)([]),[l,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{c(!0);var e;const t=Hy(Sy(Ig(LE,"rooms"),Cy("privacy","==","Public"),Ay("createdAt","desc"),(Fl("limit",e=10),ky._create("limit",e,"F"))),e=>{const t=[];e.forEach(e=>{t.push(m({id:e.id},e.data()))}),o(t),c(!1)},e=>{console.error("Error fetching public rooms:",e),i("Failed to load public rooms."),c(!1)});return()=>t()},[]),(0,jE.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg max-w-4xl mx-auto",children:[(0,jE.jsxs)("div",{className:"mb-8",children:[(0,jE.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Join a Room by ID"}),(0,jE.jsxs)("form",{onSubmit:n=>{if(n.preventDefault(),i(""),!t)return void i("Please enter a room ID or link.");let r=t;if(t.includes("/room/")){const e=t.split("/room/");r=e[e.length-1]}e("/room/".concat(r))},className:"flex gap-2",children:[(0,jE.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),className:"flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter Room Code or Paste Link..."}),(0,jE.jsx)("button",{type:"submit",className:"px-6 py-3 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2",children:"Join Room"})]}),r&&(0,jE.jsx)("p",{className:"text-red-400 mt-2",children:r})]}),(0,jE.jsx)("hr",{className:"border-gray-700 my-8"}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Browse Public Rooms"}),l&&(0,jE.jsx)("p",{className:"text-gray-400",children:"Loading rooms..."}),!l&&0===s.length&&(0,jE.jsx)("p",{className:"text-gray-400",children:"No public rooms available right now. Why not create one?"}),(0,jE.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,jE.jsx)(GN,{room:e},e.id))})]})]})},JN=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"easy":return"text-green-400 border-green-400";case"medium":return"text-yellow-400 border-yellow-400";case"hard":return"text-red-400 border-red-400";default:return"text-gray-400 border-gray-400"}},ZN=e=>{let{problem:t}=e;return(0,jE.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg flex justify-between items-center",children:[(0,jE.jsxs)("div",{children:[(0,jE.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:t.title}),(0,jE.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jE.jsx)("span",{className:"px-3 py-0.5 rounded-full text-xs font-medium border ".concat(JN(t.difficulty)),children:t.difficulty}),(0,jE.jsx)("span",{className:"text-sm text-gray-400",children:"Not attempted yet"})]})]}),(0,jE.jsxs)("div",{className:"flex gap-2",children:[(0,jE.jsx)("button",{className:"bg-gray-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-gray-500 transition-colors",children:"View Problem"}),(0,jE.jsx)("button",{className:"bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Challenge Room"})]})]})},$N=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[i,s]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{r(!0),s(null);try{const e=Sy(Ig(LE,"problems"),Ay("topic"),Ay("title")),n=await zy(e),r=[];n.forEach(e=>{r.push(m({id:e.id},e.data()))}),t(r)}catch(e){console.error("Error fetching problems:",e),s("Failed to load challenge library.")}r(!1)})()},[]);const o=e.reduce((e,t)=>{const n=t.topic||"Uncategorized";return e[n]||(e[n]=[]),e[n].push(t),e},{});return(0,jE.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg",children:[(0,jE.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Challenge Library"}),n?(0,jE.jsx)("p",{className:"text-gray-400",children:"Loading problems..."}):i?(0,jE.jsx)("p",{className:"text-red-400",children:i}):0===e.length?(0,jE.jsx)("p",{className:"text-gray-400",children:"No problems have been added to the library yet."}):(0,jE.jsx)("div",{className:"space-y-8",children:Object.entries(o).map(e=>{let[t,n]=e;return(0,jE.jsxs)("div",{children:[(0,jE.jsxs)("h3",{className:"text-2xl font-bold text-white mb-4",children:[t," (",n.length," problems)"]}),(0,jE.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,jE.jsx)(ZN,{problem:e},e.id))})]},t)})})]})},eD="My Rooms",tD="Create New Room",nD="Join Room",rD="Challenge Library",iD=()=>{const[e,t]=(0,a.useState)(eD),n=n=>{let{title:r}=n;const i=e===r;return(0,jE.jsx)("button",{onClick:()=>t(r),className:"px-6 py-3 font-semibold rounded-t-lg transition-colors\n          ".concat(i?"bg-gray-800 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:r})};return(0,jE.jsxs)("div",{className:"w-full",children:[(0,jE.jsx)(qN,{}),(0,jE.jsxs)("div",{children:[(0,jE.jsxs)("div",{className:"flex gap-2 border-b border-gray-700",children:[(0,jE.jsx)(n,{title:eD}),(0,jE.jsx)(n,{title:tD}),(0,jE.jsx)(n,{title:nD}),(0,jE.jsx)(n,{title:rD})]}),(0,jE.jsx)("div",{className:"mt-4",children:(()=>{switch(e){case eD:return(0,jE.jsx)(KN,{});case tD:return(0,jE.jsx)(YN,{});case nD:return(0,jE.jsx)(XN,{});case rD:return(0,jE.jsx)($N,{});default:return(0,jE.jsx)(KN,{})}})()})]})]})},sD=()=>(0,jE.jsxs)("div",{className:"flex h-screen bg-gray-900 text-white",children:[(0,jE.jsx)(UN,{}),(0,jE.jsx)("div",{className:"flex-1 p-10 overflow-auto",children:(0,jE.jsx)(iD,{})})]}),oD=(e,t)=>{const[n,r]=(0,a.useState)(null),[i,s]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[h,d]=(0,a.useState)([]),[f,p]=(0,a.useState)(!0),[g,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!e||!t)return s(!1),void(e||y("No room ID provided"));s(!0);const n=Pg(LE,"rooms",e);let i,o=0;const a=()=>{i&&i(),i=Hy(n,e=>{e.exists()?(r(e.data()),y(null)):(y("Room not found"),r(null)),s(!1)},e=>{console.error("Error listening to room (Attempt ".concat(o+1,"):"),e),o<3&&"permission-denied"===e.code?(o++,setTimeout(a,500*o)):(y("Failed to load room data. (".concat(e.message,")")),s(!1))})};return a(),()=>{i&&i()}},[e,t]),(0,a.useEffect)(()=>{if(!e||!n||!t)return void p(!1);p(!0);const r=AE(vE(FE,"rooms/".concat(e)),e=>{if(e.exists()){const t=e.val();l(t.files||{}),u(t.presence||{});const n=t.chat||{},r=Object.keys(n).map(e=>m({id:e},n[e])).sort((e,t)=>e.timestamp-t.timestamp);d(r)}else l({}),u({}),d([]);p(!1)},e=>{console.error("Error listening to RTDB:",e),y("Failed to load real-time data"),p(!1)});return()=>r()},[e,n,t]);return{room:n,files:o,presence:c,chat:h,loading:i||f,error:g,updateFileCode:(t,n)=>{if(!e)return;_E(vE(FE,"rooms/".concat(e,"/files/").concat(t,"/code")),n)},updateFileOutput:(t,n)=>{if(!e)return;_E(vE(FE,"rooms/".concat(e,"/files/").concat(t,"/output")),n)},updatePresence:(t,n)=>{if(!e||!t)return;_E(vE(FE,"rooms/".concat(e,"/presence/").concat(t,"/activeFileId")),n)},addNewFile:t=>{if(!e)return;if(o&&Object.keys(o).length>=5)return void alert("Error: Maximum of 5 files reached.");const n=QN(10);_E(vE(FE,"rooms/".concat(e,"/files/").concat(n)),{name:t,code:"// ".concat(t,"\n"),output:'Click "Run Code" to see output...'})},removeFile:t=>{if(!e)return;const n=o||{};if(Object.keys(n).length<=1)return void console.warn("Cannot remove the last file.");wE(vE(FE,"rooms/".concat(e,"/files/").concat(t)))},sendChatMessage:(t,n)=>{if(!e||!n.trim())return;const r=function(e,t){e=Rn(e),kS("push",e._path),ES("push",t,e._path,!0);const n=US(e._repo),r=uE(n),i=bE(e,r),s=bE(e,r);let o;return o=null!=t?_E(s,t).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(vE(FE,"rooms/".concat(e,"/chat")));_E(r,{sender:{uid:t.uid,username:t.username,avatar:t.avatar},text:n,timestamp:DE()})}}};function aD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cD(Object(n),!0).forEach(function(t){lD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dD(Object(n),!0).forEach(function(t){hD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pD(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t.apply(n,[].concat(i,r))}}}function mD(e){return{}.toString.call(e).includes("Object")}function gD(e){return"function"===typeof e}var yD=pD(function(e,t){throw new Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),vD={changes:function(e,t){return mD(t)||yD("changeType"),Object.keys(t).some(function(t){return!function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)})&&yD("changeField"),t},selector:function(e){gD(e)||yD("selectorType")},handler:function(e){gD(e)||mD(e)||yD("handlerType"),mD(e)&&Object.values(e).some(function(e){return!gD(e)})&&yD("handlersType")},initial:function(e){var t;e||yD("initialIsRequired"),mD(e)||yD("initialType"),t=e,Object.keys(t).length||yD("initialContent")}};function bD(e,t){return gD(t)?t(e.current):t}function wD(e,t){return e.current=fD(fD({},e.current),t),t}function _D(e,t,n){return gD(t)?t(e.current):Object.keys(n).forEach(function(n){var r;return null===(r=t[n])||void 0===r?void 0:r.call(t,e.current[n])}),n}var SD={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vD.initial(e),vD.handler(t);var n={current:e},r=pD(_D)(n,t),i=pD(wD)(n),s=pD(vD.changes)(e),o=pD(bD)(n);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return vD.selector(e),e(n.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}(r,i,s,o)(e)}]}};const ED=SD;var CD,xD={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},TD=(CD=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.length>=CD.length?CD.apply(this,r):function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(t,[].concat(r,i))}})(xD),AD={config:function(e){var t;return e||TD("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||TD("configType"),e.urls?(console.warn(xD.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function kD(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],kD(e[n],t[n]))}),uD(uD({},e),t)}var ID={type:"cancelation",msg:"operation is manually canceled"};function PD(e){var t=!1,n=new Promise(function(n,r){e.then(function(e){return t?r(ID):n(e)}),e.catch(r)});return n.cancel=function(){return t=!0},n}var RD,ND,DD=["monaco"],OD=ED.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),MD=(ND=2,function(e){if(Array.isArray(e))return e}(RD=OD)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t);else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(RD,ND)||function(e,t){if(e){if("string"==typeof e)return aD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aD(e,t):void 0}}(RD,ND)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),LD=MD[0],FD=MD[1];function jD(e){return document.body.appendChild(e)}function UD(e){var t=LD(function(e){return{config:e.config,reject:e.reject}}),n=function(e){var t=document.createElement("script");return e&&(t.src=e),t}("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function VD(){var e=LD(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){var n=t.m;zD(n),e.resolve(n)},function(t){e.reject(t)})}function zD(e){LD().monaco||FD({monaco:e})}var BD=new Promise(function(e,t){return FD({resolve:e,reject:t})}),qD={config:function(e){var t=AD.config(e),n=t.monaco,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,DD);FD(function(e){return{config:kD(e.config,r),monaco:n}})},init:function(){var e=LD(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(FD({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),PD(BD);if(window.monaco&&window.monaco.editor)return zD(window.monaco),e.resolve(window.monaco),PD(BD);!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}(jD,UD)(VD)}return PD(BD)},__getMonacoInstance:function(){return LD(function(e){return e.monaco})}},HD={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},WD={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var GD=function(e){let{children:t}=e;return a.createElement("div",{style:WD.container},t)},KD=GD;var QD=function(e){let{width:t,height:n,isEditorReady:r,loading:i,_ref:s,className:o,wrapperProps:l}=e;return a.createElement("section",m({style:m(m({},HD.wrapper),{},{width:t,height:n})},l),!r&&a.createElement(KD,null,i),a.createElement("div",{ref:s,style:m(m({},HD.fullWidth),!r&&HD.hide),className:o}))},YD=(0,a.memo)(QD);var XD=function(e){(0,a.useEffect)(e,[])};var JD=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,a.useRef)(!0);(0,a.useEffect)(r.current||!n?()=>{r.current=!1}:e,t)};function ZD(){}function $D(e,t,n,r){return function(e,t){return e.editor.getModel(eO(e,t))}(e,r)||function(e,t,n,r){return e.editor.createModel(t,n,r?eO(e,r):void 0)}(e,t,n,r)}function eO(e,t){return e.Uri.parse(t)}var tO=function(e){let{original:t,modified:n,language:r,originalLanguage:i,modifiedLanguage:s,originalModelPath:o,modifiedModelPath:l,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:u=!1,theme:h="light",loading:d="Loading...",options:f={},height:p="100%",width:g="100%",className:y,wrapperProps:v={},beforeMount:b=ZD,onMount:w=ZD}=e,[_,S]=(0,a.useState)(!1),[E,C]=(0,a.useState)(!0),x=(0,a.useRef)(null),T=(0,a.useRef)(null),A=(0,a.useRef)(null),k=(0,a.useRef)(w),I=(0,a.useRef)(b),P=(0,a.useRef)(!1);XD(()=>{let e=qD.init();return e.then(e=>(T.current=e)&&C(!1)).catch(e=>"cancelation"!==(null===e||void 0===e?void 0:e.type)&&console.error("Monaco initialization: error:",e)),()=>x.current?function(){var e,t,n,r;let i=null===(e=x.current)||void 0===e?void 0:e.getModel();c||null!==i&&void 0!==i&&null!==(t=i.original)&&void 0!==t&&t.dispose(),u||null!==i&&void 0!==i&&null!==(n=i.modified)&&void 0!==n&&n.dispose(),null===(r=x.current)||void 0===r||r.dispose()}():e.cancel()}),JD(()=>{if(x.current&&T.current){let e=x.current.getOriginalEditor(),n=$D(T.current,t||"",i||r||"text",o||"");n!==e.getModel()&&e.setModel(n)}},[o],_),JD(()=>{if(x.current&&T.current){let e=x.current.getModifiedEditor(),t=$D(T.current,n||"",s||r||"text",l||"");t!==e.getModel()&&e.setModel(t)}},[l],_),JD(()=>{let e=x.current.getModifiedEditor();e.getOption(T.current.editor.EditorOption.readOnly)?e.setValue(n||""):n!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[n],_),JD(()=>{var e;null===(e=x.current)||void 0===e||null===(e=e.getModel())||void 0===e||e.original.setValue(t||"")},[t],_),JD(()=>{let{original:e,modified:t}=x.current.getModel();T.current.editor.setModelLanguage(e,i||r||"text"),T.current.editor.setModelLanguage(t,s||r||"text")},[r,i,s],_),JD(()=>{var e;null===(e=T.current)||void 0===e||e.editor.setTheme(h)},[h],_),JD(()=>{var e;null===(e=x.current)||void 0===e||e.updateOptions(f)},[f],_);let R=(0,a.useCallback)(()=>{var e;if(!T.current)return;I.current(T.current);let a=$D(T.current,t||"",i||r||"text",o||""),c=$D(T.current,n||"",s||r||"text",l||"");null===(e=x.current)||void 0===e||e.setModel({original:a,modified:c})},[r,n,s,t,i,o,l]),N=(0,a.useCallback)(()=>{var e;!P.current&&A.current&&(x.current=T.current.editor.createDiffEditor(A.current,m({automaticLayout:!0},f)),R(),null!==(e=T.current)&&void 0!==e&&e.editor.setTheme(h),S(!0),P.current=!0)},[f,h,R]);return(0,a.useEffect)(()=>{_&&k.current(x.current,T.current)},[_]),(0,a.useEffect)(()=>{!E&&!_&&N()},[E,_,N]),a.createElement(YD,{width:g,height:p,isEditorReady:_,loading:d,_ref:A,className:y,wrapperProps:v})};(0,a.memo)(tO);var nO=function(e){let t=(0,a.useRef)();return(0,a.useEffect)(()=>{t.current=e},[e]),t.current},rO=new Map;var iO=function(e){let{defaultValue:t,defaultLanguage:n,defaultPath:r,value:i,language:s,path:o,theme:l="light",line:c,loading:u="Loading...",options:h={},overrideServices:d={},saveViewState:f=!0,keepCurrentModel:p=!1,width:g="100%",height:y="100%",className:v,wrapperProps:b={},beforeMount:w=ZD,onMount:_=ZD,onChange:S,onValidate:E=ZD}=e,[C,x]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!0),k=(0,a.useRef)(null),I=(0,a.useRef)(null),P=(0,a.useRef)(null),R=(0,a.useRef)(_),N=(0,a.useRef)(w),D=(0,a.useRef)(),O=(0,a.useRef)(i),M=nO(o),L=(0,a.useRef)(!1),F=(0,a.useRef)(!1);XD(()=>{let e=qD.init();return e.then(e=>(k.current=e)&&A(!1)).catch(e=>"cancelation"!==(null===e||void 0===e?void 0:e.type)&&console.error("Monaco initialization: error:",e)),()=>I.current?function(){var e,t;null!==(e=D.current)&&void 0!==e&&e.dispose(),p?f&&rO.set(o,I.current.saveViewState()):null===(t=I.current.getModel())||void 0===t||t.dispose(),I.current.dispose()}():e.cancel()}),JD(()=>{var e,a,l,c;let u=$D(k.current,t||i||"",n||s||"",o||r||"");u!==(null===(e=I.current)||void 0===e?void 0:e.getModel())&&(f&&rO.set(M,null===(a=I.current)||void 0===a?void 0:a.saveViewState()),null!==(l=I.current)&&void 0!==l&&l.setModel(u),f&&(null===(c=I.current)||void 0===c||c.restoreViewState(rO.get(o))))},[o],C),JD(()=>{var e;null===(e=I.current)||void 0===e||e.updateOptions(h)},[h],C),JD(()=>{!I.current||void 0===i||(I.current.getOption(k.current.editor.EditorOption.readOnly)?I.current.setValue(i):i!==I.current.getValue()&&(F.current=!0,I.current.executeEdits("",[{range:I.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),I.current.pushUndoStop(),F.current=!1))},[i],C),JD(()=>{var e,t;let n=null===(e=I.current)||void 0===e?void 0:e.getModel();n&&s&&(null===(t=k.current)||void 0===t||t.editor.setModelLanguage(n,s))},[s],C),JD(()=>{var e;void 0!==c&&(null===(e=I.current)||void 0===e||e.revealLine(c))},[c],C),JD(()=>{var e;null===(e=k.current)||void 0===e||e.editor.setTheme(l)},[l],C);let j=(0,a.useCallback)(()=>{if(P.current&&k.current&&!L.current){var e;N.current(k.current);let a=o||r,u=$D(k.current,i||t||"",n||s||"",a||"");I.current=null===(e=k.current)||void 0===e?void 0:e.editor.create(P.current,m({model:u,automaticLayout:!0},h),d),f&&I.current.restoreViewState(rO.get(a)),k.current.editor.setTheme(l),void 0!==c&&I.current.revealLine(c),x(!0),L.current=!0}},[t,n,r,i,s,o,h,d,f,l,c]);return(0,a.useEffect)(()=>{C&&R.current(I.current,k.current)},[C]),(0,a.useEffect)(()=>{!T&&!C&&j()},[T,C,j]),O.current=i,(0,a.useEffect)(()=>{var e,t;C&&S&&(null!==(e=D.current)&&void 0!==e&&e.dispose(),D.current=null===(t=I.current)||void 0===t?void 0:t.onDidChangeModelContent(e=>{F.current||S(I.current.getValue(),e)}))},[C,S]),(0,a.useEffect)(()=>{if(C){let e=k.current.editor.onDidChangeMarkers(e=>{var t;let n=null===(t=I.current.getModel())||void 0===t?void 0:t.uri;if(n&&e.find(e=>e.path===n.path)){let e=k.current.editor.getModelMarkers({resource:n});null===E||void 0===E||E(e)}});return()=>{null===e||void 0===e||e.dispose()}}return()=>{}},[C,E]),a.createElement(YD,{width:g,height:y,isEditorReady:C,loading:u,_ref:P,className:v,wrapperProps:b})},sO=(0,a.memo)(iO);const oO=["children","className","collapsedSize","collapsible","defaultSize","forwardedRef","id","maxSize","minSize","onCollapse","onExpand","onResize","order","style","tagName"],aO=["autoSaveId","children","className","direction","forwardedRef","id","onLayout","keyboardResizeBy","storage","style","tagName"],lO=["children","className","disabled","hitAreaMargins","id","onBlur","onClick","onDragging","onFocus","onPointerDown","onPointerUp","style","tabIndex","tagName"],cO=(0,a.createContext)(null);cO.displayName="PanelGroupContext";const uO="data-panel-group",hO="data-panel-group-direction",dO="data-panel-group-id",fO="data-panel",pO="data-panel-collapsible",mO="data-panel-id",gO="data-panel-size",yO="data-resize-handle",vO="data-resize-handle-active",bO="data-panel-resize-handle-enabled",wO="data-panel-resize-handle-id",_O="data-resize-handle-state",SO=a.useLayoutEffect,EO=l["useId".toString()],CO="function"===typeof EO?EO:()=>null;let xO=0;function TO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=CO(),n=(0,a.useRef)(e||t||null);return null===n.current&&(n.current=""+xO++),null!==e&&void 0!==e?e:n.current}function AO(e){let{children:t,className:n="",collapsedSize:r,collapsible:i,defaultSize:s,forwardedRef:o,id:l,maxSize:c,minSize:h,onCollapse:d,onExpand:f,onResize:p,order:g,style:y,tagName:v="div"}=e,b=u(e,oO);const w=(0,a.useContext)(cO);if(null===w)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:_,expandPanel:S,getPanelSize:E,getPanelStyle:C,groupId:x,isPanelCollapsed:T,reevaluatePanelConstraints:A,registerPanel:k,resizePanel:I,unregisterPanel:P}=w,R=TO(l),N=(0,a.useRef)({callbacks:{onCollapse:d,onExpand:f,onResize:p},constraints:{collapsedSize:r,collapsible:i,defaultSize:s,maxSize:c,minSize:h},id:R,idIsFromProps:void 0!==l,order:g});(0,a.useRef)({didLogMissingDefaultSizeWarning:!1}),SO(()=>{const{callbacks:e,constraints:t}=N.current,n=m({},t);N.current.id=R,N.current.idIsFromProps=void 0!==l,N.current.order=g,e.onCollapse=d,e.onExpand=f,e.onResize=p,t.collapsedSize=r,t.collapsible=i,t.defaultSize=s,t.maxSize=c,t.minSize=h,n.collapsedSize===t.collapsedSize&&n.collapsible===t.collapsible&&n.maxSize===t.maxSize&&n.minSize===t.minSize||A(N.current,n)}),SO(()=>{const e=N.current;return k(e),()=>{P(e)}},[g,R,k,P]),(0,a.useImperativeHandle)(o,()=>({collapse:()=>{_(N.current)},expand:e=>{S(N.current,e)},getId:()=>R,getSize:()=>E(N.current),isCollapsed:()=>T(N.current),isExpanded:()=>!T(N.current),resize:e=>{I(N.current,e)}}),[_,S,E,T,R,I]);const D=C(N.current,s);return(0,a.createElement)(v,m(m({},b),{},{children:t,className:n,id:R,style:m(m({},D),y),[dO]:x,[fO]:"",[pO]:i||void 0,[mO]:R,[gO]:parseFloat(""+D.flexGrow).toFixed(1)}))}const kO=(0,a.forwardRef)((e,t)=>(0,a.createElement)(AO,m(m({},e),{},{forwardedRef:t})));let IO;function PO(){return IO}AO.displayName="Panel",kO.displayName="forwardRef(Panel)";let RO=null,NO=!0,DO=null,OO=-1,MO=null;function LO(e,t,n){var r,i;if(!NO)return;const s=function(e,t,n){const r=0!==(t&QO),i=0!==(t&YO),s=0!==(t&XO),o=0!==(t&JO);if(DO)return DO({exceedsHorizontalMaximum:i,exceedsHorizontalMinimum:r,exceedsVerticalMaximum:o,exceedsVerticalMinimum:s,intersectsHorizontalDragHandle:"horizontal"===e||"intersection"===e,intersectsVerticalDragHandle:"vertical"===e||"intersection"===e,isPointerDown:n});if(t){if(r)return s?"se-resize":o?"ne-resize":"e-resize";if(i)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t,n);if(RO!==s){if(RO=s,null===MO){MO=document.createElement("style");const e=PO();e&&MO.setAttribute("nonce",e),document.head.appendChild(MO)}var o;if(OO>=0)null===(o=MO.sheet)||void 0===o||o.removeRule(OO);OO=null!==(r=null===(i=MO.sheet)||void 0===i?void 0:i.insertRule("*{cursor: ".concat(s," !important;}")))&&void 0!==r?r:-1}}function FO(e){return"keydown"===e.type}function jO(e){return e.type.startsWith("pointer")}function UO(e){return e.type.startsWith("mouse")}function VO(e){if(jO(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(UO(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function zO(e,t,n){return n?e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y:e.x<=t.x+t.width&&e.x+e.width>=t.x&&e.y<=t.y+t.height&&e.y+e.height>=t.y}const BO=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function qO(e){const t=getComputedStyle(e);return"fixed"===t.position||(!("auto"===t.zIndex||"static"===t.position&&!function(e){var t;const n=getComputedStyle(null!==(t=KO(e))&&void 0!==t?t:e).display;return"flex"===n||"inline-flex"===n}(e))||(+t.opacity<1||("transform"in t&&"none"!==t.transform||("webkitTransform"in t&&"none"!==t.webkitTransform||("mixBlendMode"in t&&"normal"!==t.mixBlendMode||("filter"in t&&"none"!==t.filter||("webkitFilter"in t&&"none"!==t.webkitFilter||("isolation"in t&&"isolate"===t.isolation||(!!BO.test(t.willChange)||"touch"===t.webkitOverflowScrolling)))))))))}function HO(e){let t=e.length;for(;t--;){const n=e[t];if(pM(n,"Missing node"),qO(n))return n}return null}function WO(e){return e&&Number(getComputedStyle(e).zIndex)||0}function GO(e){const t=[];for(;e;)t.push(e),e=KO(e);return t}function KO(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const QO=1,YO=2,XO=4,JO=8,ZO="coarse"===function(){if("function"===typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let $O=[],eM=!1,tM=new Map,nM=new Map;const rM=new Set;function iM(e){const{target:t}=e,{x:n,y:r}=VO(e);eM=!0,lM({target:t,x:n,y:r}),dM(),$O.length>0&&(fM("down",e),uM(),e.preventDefault(),aM(t)||e.stopImmediatePropagation())}function sM(e){const{x:t,y:n}=VO(e);if(eM&&"pointerleave"!==e.type&&0===e.buttons&&(eM=!1,fM("up",e)),!eM){const{target:r}=e;lM({target:r,x:t,y:n})}fM("move",e),uM(),$O.length>0&&e.preventDefault()}function oM(e){const{target:t}=e,{x:n,y:r}=VO(e);nM.clear(),eM=!1,$O.length>0&&(e.preventDefault(),aM(t)||e.stopImmediatePropagation()),fM("up",e),lM({target:t,x:n,y:r}),uM(),dM()}function aM(e){let t=e;for(;t;){if(t.hasAttribute(yO))return!0;t=t.parentElement}return!1}function lM(e){let{target:t,x:n,y:r}=e;$O.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),rM.forEach(e=>{const{element:t,hitAreaMargins:s}=e,o=t.getBoundingClientRect(),{bottom:a,left:l,right:c,top:u}=o,h=ZO?s.coarse:s.fine;if(n>=l-h&&n<=c+h&&r>=u-h&&r<=a+h){if(null!==i&&document.contains(i)&&t!==i&&!t.contains(i)&&!i.contains(t)&&function(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:GO(e),b:GO(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;pM(r,"Stacking order can only be calculated for elements with a common ancestor");const i=WO(HO(n.a)),s=WO(HO(n.b));if(i===s){const e=r.childNodes,t={a:n.a.at(-1),b:n.b.at(-1)};let i=e.length;for(;i--;){const n=e[i];if(n===t.a)return 1;if(n===t.b)return-1}}return Math.sign(i-s)}(i,t)>0){let e=i,n=!1;for(;e&&!e.contains(t);){if(zO(e.getBoundingClientRect(),o,!0)){n=!0;break}e=e.parentElement}if(n)return}$O.push(e)}})}function cM(e,t){nM.set(e,t)}function uM(){let e=!1,t=!1;$O.forEach(n=>{const{direction:r}=n;"horizontal"===r?e=!0:t=!0});let n=0;nM.forEach(e=>{n|=e}),e&&t?LO("intersection",n,eM):e?LO("horizontal",n,eM):t?LO("vertical",n,eM):null!==MO&&(document.head.removeChild(MO),RO=null,MO=null,OO=-1)}let hM;function dM(){var e;null===(e=hM)||void 0===e||e.abort(),hM=new AbortController;const t={capture:!0,signal:hM.signal};rM.size&&(eM?($O.length>0&&tM.forEach((e,n)=>{const{body:r}=n;e>0&&(r.addEventListener("contextmenu",oM,t),r.addEventListener("pointerleave",sM,t),r.addEventListener("pointermove",sM,t))}),tM.forEach((e,n)=>{const{body:r}=n;r.addEventListener("pointerup",oM,t),r.addEventListener("pointercancel",oM,t)})):tM.forEach((e,n)=>{const{body:r}=n;e>0&&(r.addEventListener("pointerdown",iM,t),r.addEventListener("pointermove",sM,t))}))}function fM(e,t){rM.forEach(n=>{const{setResizeHandlerState:r}=n,i=$O.includes(n);r(e,i,t)})}function pM(e,t){if(!e)throw console.error(t),Error(t)}function mM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function gM(e,t){return 0===mM(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:10)}function yM(e,t,n){return 0===mM(e,t,n)}function vM(e){let{panelConstraints:t,panelIndex:n,size:r}=e;const i=t[n];pM(null!=i,"Panel constraints not found for index ".concat(n));let{collapsedSize:s=0,collapsible:o,maxSize:a=100,minSize:l=0}=i;if(mM(r,l)<0)if(o){r=mM(r,(s+l)/2)<0?s:l}else r=l;return r=Math.min(a,r),r=parseFloat(r.toFixed(10)),r}function bM(e){let{delta:t,initialLayout:n,panelConstraints:r,pivotIndices:i,prevLayout:s,trigger:o}=e;if(yM(t,0))return n;const a=[...n],[l,c]=i;pM(null!=l,"Invalid first pivot index"),pM(null!=c,"Invalid second pivot index");let u=0;if("keyboard"===o){{const e=t<0?c:l,i=r[e];pM(i,"Panel constraints not found for index ".concat(e));const{collapsedSize:s=0,collapsible:o,minSize:a=0}=i;if(o){const r=n[e];if(pM(null!=r,"Previous layout not found for panel index ".concat(e)),yM(r,s)){const e=a-r;mM(e,Math.abs(t))>0&&(t=t<0?0-e:e)}}}{const e=t<0?l:c,i=r[e];pM(i,"No panel constraints found for index ".concat(e));const{collapsedSize:s=0,collapsible:o,minSize:a=0}=i;if(o){const r=n[e];if(pM(null!=r,"Previous layout not found for panel index ".concat(e)),yM(r,a)){const e=r-s;mM(e,Math.abs(t))>0&&(t=t<0?0-e:e)}}}}{const e=t<0?1:-1;let i=t<0?c:l,s=0;for(;;){const t=n[i];pM(null!=t,"Previous layout not found for panel index ".concat(i));if(s+=vM({panelConstraints:r,panelIndex:i,size:100})-t,i+=e,i<0||i>=r.length)break}const o=Math.min(Math.abs(t),Math.abs(s));t=t<0?0-o:o}{let e=t<0?l:c;for(;e>=0&&e<r.length;){const i=Math.abs(t)-Math.abs(u),s=n[e];pM(null!=s,"Previous layout not found for panel index ".concat(e));const o=vM({panelConstraints:r,panelIndex:e,size:s-i});if(!yM(s,o)&&(u+=s-o,a[e]=o,u.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?e--:e++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!yM(e[r],t[r],n))return!1;return!0}(s,a))return s;{const e=t<0?c:l,i=n[e];pM(null!=i,"Previous layout not found for panel index ".concat(e));const s=i+u,o=vM({panelConstraints:r,panelIndex:e,size:s});if(a[e]=o,!yM(o,s)){let e=s-o;let n=t<0?c:l;for(;n>=0&&n<r.length;){const i=a[n];pM(null!=i,"Previous layout not found for panel index ".concat(n));const s=vM({panelConstraints:r,panelIndex:n,size:i+e});if(yM(i,s)||(e-=s-i,a[n]=s),yM(e,0))break;t>0?n--:n++}}}return yM(a.reduce((e,t)=>t+e,0),100)?a:s}function wM(e){let{layout:t,panelsArray:n,pivotIndices:r}=e,i=0,s=100,o=0,a=0;const l=r[0];pM(null!=l,"No pivot index found"),n.forEach((e,t)=>{const{constraints:n}=e,{maxSize:r=100,minSize:c=0}=n;t===l?(i=c,s=r):(o+=c,a+=r)});return{valueMax:Math.min(s,100-o),valueMin:Math.max(i,100-a),valueNow:t[l]}}function _M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(t.querySelectorAll("[".concat(wO,'][data-panel-group-id="').concat(e,'"]')))}function SM(e,t){const n=_M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).findIndex(e=>e.getAttribute(wO)===t);return null!==n&&void 0!==n?n:null}function EM(e,t,n){const r=SM(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function CM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(((n=t)instanceof HTMLElement||"object"===typeof n&&null!==n&&"tagName"in n&&"getAttribute"in n)&&t.dataset.panelGroupId==e)return t;var n;const r=t.querySelector('[data-panel-group][data-panel-group-id="'.concat(e,'"]'));return r||null}function xM(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector("[".concat(wO,'="').concat(e,'"]'));return t||null}function TM(e){let{committedValuesRef:t,eagerValuesRef:n,groupId:r,layout:i,panelDataArray:s,panelGroupElement:o,setLayout:l}=e;(0,a.useRef)({didWarnAboutMissingResizeHandle:!1}),SO(()=>{if(!o)return;const e=_M(r,o);for(let t=0;t<s.length-1;t++){const{valueMax:n,valueMin:r,valueNow:o}=wM({layout:i,panelsArray:s,pivotIndices:[t,t+1]}),a=e[t];if(null==a);else{const e=s[t];pM(e,'No panel data found for index "'.concat(t,'"')),a.setAttribute("aria-controls",e.id),a.setAttribute("aria-valuemax",""+Math.round(n)),a.setAttribute("aria-valuemin",""+Math.round(r)),a.setAttribute("aria-valuenow",null!=o?""+Math.round(o):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[r,i,s,o]),(0,a.useEffect)(()=>{if(!o)return;const e=n.current;pM(e,"Eager values not found");const{panelDataArray:t}=e;pM(null!=CM(r,o),'No group found for id "'.concat(r,'"'));const s=_M(r,o);pM(s,'No resize handles found for group id "'.concat(r,'"'));const a=s.map(e=>{const n=e.getAttribute(wO);pM(n,"Resize handle element has no handle id attribute");const[s,a]=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document;var i,s,o,a;const l=xM(t,r),c=_M(e,r),u=l?c.indexOf(l):-1;return[null!==(i=null===(s=n[u])||void 0===s?void 0:s.id)&&void 0!==i?i:null,null!==(o=null===(a=n[u+1])||void 0===a?void 0:a.id)&&void 0!==o?o:null]}(r,n,t,o);if(null==s||null==a)return()=>{};const c=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const a=t.findIndex(e=>e.id===s);if(a>=0){const e=t[a];pM(e,"No panel data found for index ".concat(a));const s=i[a],{collapsedSize:c=0,collapsible:u,minSize:h=0}=e.constraints;if(null!=s&&u){const e=bM({delta:yM(s,c)?h-c:c-s,initialLayout:i,panelConstraints:t.map(e=>e.constraints),pivotIndices:EM(r,n,o),prevLayout:i,trigger:"keyboard"});i!==e&&l(e)}}break}}};return e.addEventListener("keydown",c),()=>{e.removeEventListener("keydown",c)}});return()=>{a.forEach(e=>e())}},[o,t,n,r,i,s,l])}function AM(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function kM(e,t){const n="horizontal"===e,{x:r,y:i}=VO(t);return n?r:i}function IM(e,t,n,r,i,s){if(FO(e)){const t="horizontal"===n;let r=0;r=e.shiftKey?100:null!=i?i:10;let s=0;switch(e.key){case"ArrowDown":s=t?0:r;break;case"ArrowLeft":s=t?-r:0;break;case"ArrowRight":s=t?r:0;break;case"ArrowUp":s=t?0:-r;break;case"End":s=100;break;case"Home":s=-100}return s}return null==r?0:function(e,t,n,r,i){const s="horizontal"===n,o=xM(t,i);pM(o,'No resize handle element found for id "'.concat(t,'"'));const a=o.getAttribute(dO);pM(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=kM(n,e),u=CM(a,i);pM(u,'No group element found for id "'.concat(a,'"'));const h=u.getBoundingClientRect();return(c-l)/(s?h.width:h.height)*100}(e,t,n,r,s)}function PM(e,t,n){t.forEach((t,r)=>{const i=e[r];pM(i,"Panel data not found for index ".concat(r));const{callbacks:s,constraints:o,id:a}=i,{collapsedSize:l=0,collapsible:c}=o,u=n[a];if(null==u||t!==u){n[a]=t;const{onCollapse:e,onExpand:r,onResize:i}=s;i&&i(t,u),c&&(e||r)&&(!r||null!=u&&!gM(u,l)||gM(t,l)||r(),!e||null!=u&&gM(u,l)||!gM(t,l)||e())}})}function RM(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function NM(e){try{if("undefined"===typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)}}catch(mv){console.error(mv),e.getItem=()=>null,e.setItem=()=>{}}}function DM(e){return"react-resizable-panels:".concat(e)}function OM(e){return e.map(e=>{const{constraints:t,id:n,idIsFromProps:r,order:i}=e;return r?n:i?"".concat(i,":").concat(JSON.stringify(t)):JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function MM(e,t){try{const n=DM(e),r=t.getItem(n);if(r){const e=JSON.parse(r);if("object"===typeof e&&null!=e)return e}}catch(mv){}return null}function LM(e,t,n,r,i){var s;const o=DM(e),a=OM(t),l=null!==(s=MM(e,i))&&void 0!==s?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(mv){console.error(mv)}}function FM(e){let{layout:t,panelConstraints:n}=e;const r=[...t],i=r.reduce((e,t)=>e+t,0);if(r.length!==n.length)throw Error("Invalid ".concat(n.length," panel layout: ").concat(r.map(e=>"".concat(e,"%")).join(", ")));if(!yM(i,100)&&r.length>0)for(let o=0;o<n.length;o++){const e=r[o];pM(null!=e,"No layout data found for index ".concat(o));const t=100/i*e;r[o]=t}let s=0;for(let o=0;o<n.length;o++){const e=r[o];pM(null!=e,"No layout data found for index ".concat(o));const t=vM({panelConstraints:n,panelIndex:o,size:e});e!=t&&(s+=e-t,r[o]=t)}if(!yM(s,0))for(let o=0;o<n.length;o++){const e=r[o];pM(null!=e,"No layout data found for index ".concat(o));const t=vM({panelConstraints:n,panelIndex:o,size:e+s});if(e!==t&&(s-=t-e,r[o]=t,yM(s,0)))break}return r}const jM={getItem:e=>(NM(jM),jM.getItem(e)),setItem:(e,t)=>{NM(jM),jM.setItem(e,t)}},UM={};function VM(e){let{autoSaveId:t=null,children:n,className:r="",direction:i,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:c=null,storage:h=jM,style:d,tagName:f="div"}=e,p=u(e,aO);const g=TO(o),y=(0,a.useRef)(null),[v,b]=(0,a.useState)(null),[w,_]=(0,a.useState)([]),S=function(){const[e,t]=(0,a.useState)(0);return(0,a.useCallback)(()=>t(e=>e+1),[])}(),E=(0,a.useRef)({}),C=(0,a.useRef)(new Map),x=(0,a.useRef)(0),T=(0,a.useRef)({autoSaveId:t,direction:i,dragState:v,id:g,keyboardResizeBy:c,onLayout:l,storage:h}),A=(0,a.useRef)({layout:w,panelDataArray:[],panelDataArrayChanged:!1});(0,a.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,a.useImperativeHandle)(s,()=>({getId:()=>T.current.id,getLayout:()=>{const{layout:e}=A.current;return e},setLayout:e=>{const{onLayout:t}=T.current,{layout:n,panelDataArray:r}=A.current,i=FM({layout:e,panelConstraints:r.map(e=>e.constraints)});AM(n,i)||(_(i),A.current.layout=i,t&&t(i),PM(r,i,E.current))}}),[]),SO(()=>{T.current.autoSaveId=t,T.current.direction=i,T.current.dragState=v,T.current.id=g,T.current.onLayout=l,T.current.storage=h}),TM({committedValuesRef:T,eagerValuesRef:A,groupId:g,layout:w,panelDataArray:A.current.panelDataArray,setLayout:_,panelGroupElement:y.current}),(0,a.useEffect)(()=>{const{panelDataArray:e}=A.current;if(t){if(0===w.length||w.length!==e.length)return;let n=UM[t];null==n&&(n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}(LM,100),UM[t]=n);const r=[...e],i=new Map(C.current);n(t,r,i,w,h)}},[t,w,h]),(0,a.useEffect)(()=>{});const k=(0,a.useCallback)(e=>{const{onLayout:t}=T.current,{layout:n,panelDataArray:r}=A.current;if(e.constraints.collapsible){const i=r.map(e=>e.constraints),{collapsedSize:s=0,panelSize:o,pivotIndices:a}=qM(r,e,n);if(pM(null!=o,'Panel size not found for panel "'.concat(e.id,'"')),!gM(o,s)){C.current.set(e.id,o);const l=bM({delta:BM(r,e)===r.length-1?o-s:s-o,initialLayout:n,panelConstraints:i,pivotIndices:a,prevLayout:n,trigger:"imperative-api"});RM(n,l)||(_(l),A.current.layout=l,t&&t(l),PM(r,l,E.current))}}},[]),I=(0,a.useCallback)((e,t)=>{const{onLayout:n}=T.current,{layout:r,panelDataArray:i}=A.current;if(e.constraints.collapsible){const s=i.map(e=>e.constraints),{collapsedSize:o=0,panelSize:a=0,minSize:l=0,pivotIndices:c}=qM(i,e,r),u=null!==t&&void 0!==t?t:l;if(gM(a,o)){const t=C.current.get(e.id),o=null!=t&&t>=u?t:u,l=bM({delta:BM(i,e)===i.length-1?a-o:o-a,initialLayout:r,panelConstraints:s,pivotIndices:c,prevLayout:r,trigger:"imperative-api"});RM(r,l)||(_(l),A.current.layout=l,n&&n(l),PM(i,l,E.current))}}},[]),P=(0,a.useCallback)(e=>{const{layout:t,panelDataArray:n}=A.current,{panelSize:r}=qM(n,e,t);return pM(null!=r,'Panel size not found for panel "'.concat(e.id,'"')),r},[]),R=(0,a.useCallback)((e,t)=>{const{panelDataArray:n}=A.current,r=BM(n,e);return function(e){let{defaultSize:t,dragState:n,layout:r,panelData:i,panelIndex:s,precision:o=3}=e;const a=r[s];let l;return l=null==a?void 0!=t?t.toFixed(o):"1":1===i.length?"1":a.toFixed(o),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:null!==n?"none":void 0}}({defaultSize:t,dragState:v,layout:w,panelData:n,panelIndex:r})},[v,w]),N=(0,a.useCallback)(e=>{const{layout:t,panelDataArray:n}=A.current,{collapsedSize:r=0,collapsible:i,panelSize:s}=qM(n,e,t);return pM(null!=s,'Panel size not found for panel "'.concat(e.id,'"')),!0===i&&gM(s,r)},[]),D=(0,a.useCallback)(e=>{const{layout:t,panelDataArray:n}=A.current,{collapsedSize:r=0,collapsible:i,panelSize:s}=qM(n,e,t);return pM(null!=s,'Panel size not found for panel "'.concat(e.id,'"')),!i||mM(s,r)>0},[]),O=(0,a.useCallback)(e=>{const{panelDataArray:t}=A.current;t.push(e),t.sort((e,t)=>{const n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r}),A.current.panelDataArrayChanged=!0,S()},[S]);SO(()=>{if(A.current.panelDataArrayChanged){A.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:t,storage:n}=T.current,{layout:r,panelDataArray:i}=A.current;let s=null;if(e){const t=function(e,t,n){var r,i;return null!==(i=(null!==(r=MM(e,n))&&void 0!==r?r:{})[OM(t)])&&void 0!==i?i:null}(e,i,n);t&&(C.current=new Map(Object.entries(t.expandToSizes)),s=t.layout)}null==s&&(s=function(e){let{panelDataArray:t}=e;const n=Array(t.length),r=t.map(e=>e.constraints);let i=0,s=100;for(let o=0;o<t.length;o++){const e=r[o];pM(e,"Panel constraints not found for index ".concat(o));const{defaultSize:t}=e;null!=t&&(i++,n[o]=t,s-=t)}for(let o=0;o<t.length;o++){const e=r[o];pM(e,"Panel constraints not found for index ".concat(o));const{defaultSize:a}=e;if(null!=a)continue;const l=s/(t.length-i);i++,n[o]=l,s-=l}return n}({panelDataArray:i}));const o=FM({layout:s,panelConstraints:i.map(e=>e.constraints)});AM(r,o)||(_(o),A.current.layout=o,t&&t(o),PM(i,o,E.current))}}),SO(()=>{const e=A.current;return()=>{e.layout=[]}},[]);const M=(0,a.useCallback)(e=>{let t=!1;const n=y.current;if(n){"rtl"===window.getComputedStyle(n,null).getPropertyValue("direction")&&(t=!0)}return function(n){n.preventDefault();const r=y.current;if(!r)return()=>null;const{direction:i,dragState:s,id:o,keyboardResizeBy:a,onLayout:l}=T.current,{layout:c,panelDataArray:u}=A.current,{initialLayout:h}=null!==s&&void 0!==s?s:{},d=EM(o,e,r);let f=IM(n,e,i,s,a,r);const p="horizontal"===i;p&&t&&(f=-f);const m=bM({delta:f,initialLayout:null!==h&&void 0!==h?h:c,panelConstraints:u.map(e=>e.constraints),pivotIndices:d,prevLayout:c,trigger:FO(n)?"keyboard":"mouse-or-touch"}),g=!RM(c,m);(jO(n)||UO(n))&&x.current!=f&&(x.current=f,cM(e,g||0===f?0:p?f<0?QO:YO:f<0?XO:JO)),g&&(_(m),A.current.layout=m,l&&l(m),PM(u,m,E.current))}},[]),L=(0,a.useCallback)((e,t)=>{const{onLayout:n}=T.current,{layout:r,panelDataArray:i}=A.current,s=i.map(e=>e.constraints),{panelSize:o,pivotIndices:a}=qM(i,e,r);pM(null!=o,'Panel size not found for panel "'.concat(e.id,'"'));const l=bM({delta:BM(i,e)===i.length-1?o-t:t-o,initialLayout:r,panelConstraints:s,pivotIndices:a,prevLayout:r,trigger:"imperative-api"});RM(r,l)||(_(l),A.current.layout=l,n&&n(l),PM(i,l,E.current))},[]),F=(0,a.useCallback)((e,t)=>{const{layout:n,panelDataArray:r}=A.current,{collapsedSize:i=0,collapsible:s}=t,{collapsedSize:o=0,collapsible:a,maxSize:l=100,minSize:c=0}=e.constraints,{panelSize:u}=qM(r,e,n);null!=u&&(s&&a&&gM(u,i)?gM(i,o)||L(e,o):u<c?L(e,c):u>l&&L(e,l))},[L]),j=(0,a.useCallback)((e,t)=>{const{direction:n}=T.current,{layout:r}=A.current;if(!y.current)return;const i=xM(e,y.current);pM(i,'Drag handle element not found for id "'.concat(e,'"'));const s=kM(n,t);b({dragHandleId:e,dragHandleRect:i.getBoundingClientRect(),initialCursorPosition:s,initialLayout:r})},[]),U=(0,a.useCallback)(()=>{b(null)},[]),V=(0,a.useCallback)(e=>{const{panelDataArray:t}=A.current,n=BM(t,e);n>=0&&(t.splice(n,1),delete E.current[e.id],A.current.panelDataArrayChanged=!0,S())},[S]),z=(0,a.useMemo)(()=>({collapsePanel:k,direction:i,dragState:v,expandPanel:I,getPanelSize:P,getPanelStyle:R,groupId:g,isPanelCollapsed:N,isPanelExpanded:D,reevaluatePanelConstraints:F,registerPanel:O,registerResizeHandle:M,resizePanel:L,startDragging:j,stopDragging:U,unregisterPanel:V,panelGroupElement:y.current}),[k,v,i,I,P,R,g,N,D,F,O,M,L,j,U,V]),B={display:"flex",flexDirection:"horizontal"===i?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return(0,a.createElement)(cO.Provider,{value:z},(0,a.createElement)(f,m(m({},p),{},{children:n,className:r,id:o,ref:y,style:m(m({},B),d),[uO]:"",[hO]:i,[dO]:g})))}const zM=(0,a.forwardRef)((e,t)=>(0,a.createElement)(VM,m(m({},e),{},{forwardedRef:t})));function BM(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function qM(e,t,n){const r=BM(e,t),i=r===e.length-1?[r-1,r]:[r,r+1],s=n[r];return m(m({},t.constraints),{},{panelSize:s,pivotIndices:i})}function HM(e){let{children:t=null,className:n="",disabled:r=!1,hitAreaMargins:i,id:s,onBlur:o,onClick:l,onDragging:c,onFocus:h,onPointerDown:d,onPointerUp:f,style:p={},tabIndex:g=0,tagName:y="div"}=e,v=u(e,lO);var b,w;const _=(0,a.useRef)(null),S=(0,a.useRef)({onClick:l,onDragging:c,onPointerDown:d,onPointerUp:f});(0,a.useEffect)(()=>{S.current.onClick=l,S.current.onDragging=c,S.current.onPointerDown=d,S.current.onPointerUp=f});const E=(0,a.useContext)(cO);if(null===E)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:C,groupId:x,registerResizeHandle:T,startDragging:A,stopDragging:k,panelGroupElement:I}=E,P=TO(s),[R,N]=(0,a.useState)("inactive"),[D,O]=(0,a.useState)(!1),[M,L]=(0,a.useState)(null),F=(0,a.useRef)({state:R});SO(()=>{F.current.state=R}),(0,a.useEffect)(()=>{if(r)L(null);else{const e=T(P);L(()=>e)}},[r,P,T]);const j=null!==(b=null===i||void 0===i?void 0:i.coarse)&&void 0!==b?b:15,U=null!==(w=null===i||void 0===i?void 0:i.fine)&&void 0!==w?w:5;(0,a.useEffect)(()=>{if(r||null==M)return;const e=_.current;pM(e,"Element ref not attached");let t=!1;return function(e,t,n,r,i){var s;const{ownerDocument:o}=t,a={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:i},l=null!==(s=tM.get(o))&&void 0!==s?s:0;return tM.set(o,l+1),rM.add(a),dM(),function(){var t;nM.delete(e),rM.delete(a);const n=null!==(t=tM.get(o))&&void 0!==t?t:1;if(tM.set(o,n-1),dM(),1===n&&tM.delete(o),$O.includes(a)){const e=$O.indexOf(a);e>=0&&$O.splice(e,1),uM(),i("up",!0,null)}}}(P,e,C,{coarse:j,fine:U},(e,n,r)=>{if(n)switch(e){case"down":{N("drag"),t=!1,pM(r,'Expected event to be defined for "down" action'),A(P,r);const{onDragging:e,onPointerDown:n}=S.current;null===e||void 0===e||e(!0),null===n||void 0===n||n();break}case"move":{const{state:e}=F.current;t=!0,"drag"!==e&&N("hover"),pM(r,'Expected event to be defined for "move" action'),M(r);break}case"up":{N("hover"),k();const{onClick:e,onDragging:n,onPointerUp:r}=S.current;null===n||void 0===n||n(!1),null===r||void 0===r||r(),t||null===e||void 0===e||e();break}}else N("inactive")})},[j,C,r,U,T,P,M,A,k]),function(e){let{disabled:t,handleId:n,resizeHandler:r,panelGroupElement:i}=e;(0,a.useEffect)(()=>{if(t||null==r||null==i)return;const e=xM(n,i);if(null==e)return;const s=t=>{if(!t.defaultPrevented)switch(t.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":t.preventDefault(),r(t);break;case"F6":{t.preventDefault();const r=e.getAttribute(dO);pM(r,'No group element found for id "'.concat(r,'"'));const s=_M(r,i),o=SM(r,n,i);pM(null!==o,'No resize element found for id "'.concat(n,'"')),s[t.shiftKey?o>0?o-1:s.length-1:o+1<s.length?o+1:0].focus();break}}};return e.addEventListener("keydown",s),()=>{e.removeEventListener("keydown",s)}},[i,t,n,r])}({disabled:r,handleId:P,resizeHandler:M,panelGroupElement:I});return(0,a.createElement)(y,m(m({},v),{},{children:t,className:n,id:s,onBlur:()=>{O(!1),null===o||void 0===o||o()},onFocus:()=>{O(!0),null===h||void 0===h||h()},ref:_,role:"separator",style:m(m({},{touchAction:"none",userSelect:"none"}),p),tabIndex:g,[hO]:C,[dO]:x,[yO]:"",[vO]:"drag"===R?"pointer":D?"keyboard":void 0,[bO]:!r,[wO]:P,[_O]:R}))}VM.displayName="PanelGroup",zM.displayName="forwardRef(PanelGroup)",HM.displayName="PanelResizeHandle";const WM=()=>(0,jE.jsx)("span",{className:"font-bold",children:"+"}),GM=e=>{let{files:t,activeFileId:n,onSelectFile:r,onAddNewFile:i,language:s,onCloseFile:o}=e;const a=t?Object.entries(t):[],l=a.length>1;return(0,jE.jsxs)("div",{className:"flex items-center bg-gray-900 border-b border-gray-700 flex-shrink-0",children:[a.map(e=>{let[t,i]=e;const s=t===n;return(0,jE.jsxs)("button",{onClick:()=>r(t),className:"flex items-center gap-2 px-4 py-2 text-sm relative top-px ".concat(s?"bg-gray-800 text-white font-semibold border-t border-x border-gray-700 rounded-t-md":"text-gray-400 hover:bg-gray-700"),children:[(0,jE.jsx)("span",{children:i.name}),l&&(0,jE.jsx)("span",{onClick:e=>{e.stopPropagation(),o(t)},className:"text-gray-500 hover:text-white hover:bg-gray-600 rounded-full w-5 h-5 flex items-center justify-center text-lg leading-none pb-0.5",title:"Close ".concat(i.name),children:"\xd7"})]},t)}),a.length<5&&(0,jE.jsx)("button",{onClick:()=>{const e=prompt("Enter new file name (without extension):");if(e){const t=(e=>{switch(e.toLowerCase()){case"python":return"py";case"javascript":return"js";case"java":return"java";case"c++":return"cpp";default:return"txt"}})(s);i("".concat(e,".").concat(t))}},className:"flex items-center justify-center px-2.5 py-2.5 text-md relative top-px text-gray-400 hover:bg-gray-800 w-5 h-5 rounded-full flex",title:"Add new file (max 5)",children:(0,jE.jsx)(WM,{})})]})},KM=n.p+"static/media/hidden.22c6a09acdf28a7b5e22.png",QM=e=>{let{isFollowing:t}=e;return(0,jE.jsx)("img",{src:t?KM:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA5/AAAOfwHiF5reAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAvdQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVynFdwAAAPx0Uk5TAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzU2Nzg5Ojs8PT4/QEJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+OZw2vAAAFcZJREFUGBntwXl8lOW5BuB7ZrIChiXKKglCAQnIlmAjIhwRjshmg0gVo6UCKiCUTbayBUFRUKTsiIVqRdSAikWBKpRyZKdQUJYTlkDYISQhyZDM3H+cU+vPlsqS75uZ931n5rkuCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQIZtEVq9+VlNy6fZee6f2HjJ48ffbs6ZNHD+mf3rNL+9bJSXdVrxgNEXIiE1LTBk1bum5/roe35Mndv27ptEFpqQmREEEtvmWX/pMWrd591ktbvGd3r140qX+XlvEQwSUu9dk3152i35xa9+azqXEQ5ottmT599TEGxLHV09NbxkKYydWkV0bmIQ8DzHMoM6NXExeESaLbjP0inwrlfzG2TTSECSp0mLKxmBoUb5zSoQKETlW6vb61hBqVbH29WxUIHWo+Pmevlwbw7p3zeE0IlZytXztAoxx4rbUTQomYzovP0EBnFneOgQiwyk99VEBjFXz0VGWIgEkYtL6EhitZPygBIgCajt/JILFzfFMIv2o2I4tBJWtGMwg/qTJwB4PQ9hcqQfjM2XF5MYNU0R/bOyB8US/jOIPa0YmJEDaVS//ay6DnXfvLGAjrUhflMURcmpMMYUn1kd8ypPxtcDxEWTV+x82QUzivPkRZtFvtZUjyfPxziFtwPb6NIWxTNwfEjZUflMUQ913faIjrq5ZxgWHg9NgqED/VcGERw0TBW3UgrtV6pZdhpHR5MsS/dNzMsPPnthD/dO9XDEtrWkAASZkMV97l9RHuEpaUMoyVLKiFcHb7zGKGucLpVRCuKoy/TMHcMeURjqIGnaH43ukBkQg3zqeOUPwoq7cTYaXLHopr7OmM8HH3eoqfWNcQ4aHcVDfFdbhfjkUY6HaU4gaOdEaou+tTiptYmYhQFjWukOKmroyKRMh66ADFLe1vh9BU8wOKMnm3GkJPxNA8msJ7dseqOVOnTJ44ftyYUSOHDx0ybu7KrSdKaYzcAU6EmPv30ACX189+6ckH6kbjepzVW3buN3HRVjcNsD0FoaTyO15qVrR5Vu+GDpRBVMqApd96qZlnXhxCRseT1Ork2/2aR8CSig+OzjxJrY62Q2goN5c6/S0jxQF7ksbvoUbemTEIAamHqM3VtYMS4ZMGY3ZSn30tEewiXy6lJp7VvSrCD+qO3Epdrv7WhaDWZBc1OTUlEX6TOOwANdnSAMHLObyYWni/TIuAXzm6bqAeVwY6EKTqbKAWZ1+thwBIWV5KLb68E0GpTx51yBkQhQBJnJlHHS49geBT7RPqcH5ELAKo4vBs6rAiHkHm0XPU4PKEOARYxHPnqEFOJwSTmMXUoHB6PBSoNKuEGvwuCkGj7i6q511QA4okfUkNtiQgSHS9RPX2t4ZCXQ9TvfMdEQxcr3ipnHtCFJSKHpVP5TwTnTBeta+o3l8aQbkay6jemngY7v4cKpfb3wEdul+gcsdawWjDSqjcqhrQpPZGKuceAHPFfUzlSoZCH9ckD5V7rzwMdc9BKnfiPmjVNpvK7bsbRkq/QuXW3gHN4ldRufyeME/0AirnmeSEfgOLqdysSBgmcTuVO98RRmh+nMptrgWjtDpN5XbVhiHu/DuVO9EcBvlFIZX7Og7GqLyJyuV3gjGGe6lcZgwMErOSypW+ADNEzKd6i10wimsh1ZvphAFuW0P1XoFxJlG9zHLQrvYeKucdCgM956FyW6tBs+QcKleSDiM9WkzljiZBq64FVM6bDkOleahc7oPQaLCH6g2FsZ6nelf7QBfXbGrwCgw2mRq87IAWFT6jBothtEXU4P1oaFBrJzXIdMForlXUYFM8lGuYTQ2+joHhYjdRg4OJUKzZGWqwKw7Gq7yPGhyvD6XuvUgNztdGEKidTQ1O3wOF2uVTA09HBIUWxdTgQgqUebiQOkxCkHiROlxuA0XS3NRhrRPBYhV1uNIBSqSXUocTdyBoxGdTB3d3KPC8lzqU3Icg8kApdSh5EgE3gnoMRVCZQC08/RBgk6nHKgQX1wbqMRQBNZN65NZAkLnzPPUYj8BxLqQm/RF0ulCT1xAoEe9Rk784EHx+T03mOhAQkZnUxN0I/hVz79Nj5326O+fshUt5BYU5Oz5dOKn/gxXhX9XzqMlSJwLA9QF1mQA/qt934c6rvA7vd8sGtoqC/4ygLosd8DvHO9RlfxT8peqLW3lTl9/tHgM/iTxAXd6E382mLt7W8I/yT3xewlvLX94jBn7RidpkwM+mUZsF8AdXxz8UsKzOTLgd/vAZtRkJvxpLbQprwHfRL52mJYXzG8J39d3U5gX40WDqMx2+S8uiZd6VDeCzV6mNNx1+82svtbkcD1+1+Jq2XH09Dj66LYfalKbBT3p5qM8E+KjaYg/tOvNrJ3zzNPVxPwy/6FpCfc7HwSfRo/Loi22N4BNXFvUpbAs/eKiYGo2AT+7Loo+u9IVPXqRGea3gs/uvUKOcWPiidzF9t6IifFDhEjW62BQ+Sr5MnQbAB44p9IsjqfDBK9TpdAP4pPF56nQ2CvbFfkg/cfeEfbWuUqfjifDBz05Rq1dhX81t9BvPANj3B2p1uAZsu/0wtfLWg20tTtCfJsO25tRrVwXYFLOZen0J2x69Qv9a4IRd66nX5y7Y4lhBzdJgVzcP/W0h7OpEzebBlunU7FQEbGpRQP/LgE2O/dRsBGzoT92mwKYa2QyEgbBpCDXz9oBlD5dSM08i7Cm3jQHh6Ql7EqhbUSosapZH3VbDHsdHDBD3fbBnC3U7Ww+W1DpB7XrBnqkMmGOVYMsIanegCiy4bTe1u1oRtjzNAPoIttSlfhuiUWYRf6J+a2HL/W4GUn/YspP6vedAWc2nAQbBjqjDDKjCxrBjLA0wBWU0kiZIhB0jGGA7nbChIU3QB2XymJcG+BvsqHqZgdYPduylAa62RxmkFtEEGbBjIQPubCXYMJEmyG2MW6p3jkZIgQ3NPAy8N2BDExrhWHXcQoV9NMJJB2z4MxUoaQQbztAI30Th5j6kGd6GDY9Sic9gwyc0w3zc1Egaoh+sizpMNRrDunE0RB/cxIOlNERzWDeCiiyBdR1oiKJk3FDCORqiKAKWOY5TEXcNWFbJS0Mcux03ELOdptgM6x6gMlNh3QGaYp0L17eExpgF6xZQmYvlYdkyGuNVXNfzNEdvWBZ1ker0hmUDaY40XEeqm+ZoCMu6UaFMWJZCc+Q3wk9UO0lzXHbAshVUqKgCrIoqpjm+i8N/iNhIg6yHZXFFVKknLPuGBsl04FqzaJLZsOwZKrUCli2kScbgGr1plJdg2VoqVRADqybQJJ4O+DfNCmmUJ2FVNQ/VagOr+tIoF+rgR1WyaJYHYNUvqNgwWPUIzbIzFj9wrKFh6sKqaVTsA1jVgoZZih88R8N4o2HVWip2BFZVo2kew/eqX6JhzsKyi1TtDljkLKFhciriH96laXbAqp9RuUdgVTZNMxf/L6GUplkFqx6mcoNh1Raaxl0VwFQaZw6s6kflXoVVK2mcMUDEWRpnKqyaTOWWwaq5NM5xB1Jonimw6h0qtxZWjaN5mmIYzTMZVq2lcvtg1W9ongHIpHkmwqrdVO4irBpG8yzHLppnPKzaS+W8sGoEzbMd2TTPOFi1j8qVwKqXaJ6jKKJ5xsKq76hcEawaTfMUoIDmGQ2rDlK5fFg1luYpwlGa5yVYdZjK5cKqcTRPNrbTPCNgVRaVOw+rxtM8u7Cc5hkGq7ZTuVOwaiLNk4kBNM9vYNUnVG43rJpM8wxDU5pnHKxaQOU+hVVTaJ4UOI7TOHNh1QQqNw9WTaVxzkYAY2iclbCqH5UbC6vm0DhTAVR10zRbYFVnKvc0rPqEpilNwP+bS9Nkw6r6VK4VrNpF07yLf6iYQ8OUOGHVRSrmjoZV52mYS9Xxvcdommqw6gsqtg1WlaNpnsMPltIwLWBVBhWbA6sa0DBrHPhB7E6a5RFY1YWKPQOr2tMsWVXwozoXaJS+sKo6FasDq35FoxQ2w7/p4KFJJsCy/VRqMywbT6P0xjXG0CQLYVkGlRoAyxbRJLNwLUcmDfINLGtBlUrugGV/pUE2RuA/xH1HcxRHwbIsKvQ5LIsopDlOVsNPNMqnOVJg2etU6ElY1pzmcKfiOtJojoGwLJXqXCkPy/rSHM/jul6lMZbBuj1U5o+wbiGNsQTX51pHUxyAdc9QmUdg3S6aYnsMbuD2YzSEtxIsi8qhIuciYFlsCQ1xLgE3lFxEQ3SAdWOoyERYdx8NUfogbqIPDTEO1lW5QiWyy8G6wTTESNzUfJrhE9jwBpV4Aja8TzN8iJuL+oZGOAMbKp+nApthg+sCjbCvAm6h+jEaoQlseI6B502BDW1phHP1cEuNc2mCibDBuYsB93vYMYMmKEpFGbS/SgPshR1tGGj5NWDHIRrA+xjKpA9N0BB2vMcAGwM7GtEEI1FGU2iAsbCj8nEG1JEY2DGKBpiPsnK8R/12wpY2pQwg9wOwZTP1+1MEyix6A/WrC1smMoCegS1VPdRu922woMoBajcCtrj+woCZBnv6ULsTtWBJvbPUbQvsSTjLAPnYAXs2ULe8ZrAotYi6JcCe5HwGxPZysCeJupU+DMt6eKnZENjU3s0AOFETNr1F3frDhhHUbL8DNj3uod8VtIBN5XOp2XTYMo+adYJdg+hvnu6w61lqtsIBW1yfU6/1sG2Ah35V0B227aBem2NgU4Vd1Ks5bOtRTD/Kbg7bUqjX4dthW43D1OoPsK9dLv1maw3Yt4RanfoZfJB4nDpdrQX7mubQT1bEwr7KhdTpfGP4pMFp6vQKfFBjHf0iwwEfZFCny8nwUdOL1OhSBfjAObqEPit+Er64I58aXbkfPmuVR41ehE9Sj9BHh1LhkxnUqPgh+EHbQuqT5YJPKi3z0geXR0TBJ7WKqE9JV/jFw27q8zR8lLqNdnkWVoWP5lMfTy/4SVoptcm5DT5y/Oo0bfm6OXxV9yq18f4afpPupTavwmdx0y7Tsqw0+G4Z9RkMP3qB2rjrw3e3DTlCS06OiobvkjzUZiz8aiS1+Qz+4Hrsf1hWlxb/lxP+8Cm1mQY/y6A2neAfTSbu5a0VffhoNPyjB7WZDb97k7ociIS/NByzw8ubKP3y6Tj4S6Uc6vKOA37nWExdRsCPKj80dtUpXseFL17uXhV+tIC6fOBCADiXUpO86vCz2g89M2bOym1Z/3vwu317d69dMrnvf9eFn7XxUpPMSASEYy41+T2CT/S31OS9CATKa9SkC4LOJGqy0InAGU89zt+JIJPkph4zEVBDqccGF4JK5DfUYzICrJ+HWkxAUHmDeoxAwD1ZQh1KH0AQ6UEtvM9Dge5u6pAdj6DRII86lKZDiQ5XqMMqBItye6mDOw2KtLlMHV5EkFhGHQofhjIpF6hBcQsEhf7UIb8dFLrnNDXIro0gkFxMDS7eC6XqH6cG+yrDeHVOUoMzzaBY4kFqsCkWhqt6kBpkN4Ry8ZuowSoXjBa3gxrsrAUNot+nBotgspivqMFnFaCF42VqMBnmcmVSg9ku6NLnKtV7HsZ6m+p5BkOjB3OpnCcNhppO9Qq6Qquko1Su+FEYaTrVy0mGZtW2UjnPczCP622qt6c2tCuXSfUmwTQxmVRvzW0wgHMm1VvoglHivqJ68yNghhdKqdzKGBik6g4q5x0OY3TKp3KbKsMYdQ5SucJfwCDNT1C5v98JQySfpHKnW8EotTZTuePNYYT+xVRueyIMEzmLyhUPhH7lllG9BdEwT898KrcqHpo12EvlrqTDSHfvo3LZbaFVjzwqd/AeGKr8e1TOM8kFbSLfoHofx8FcA9xUbmNtaJL0DZUrGQajtTpG5S50hw7Rk9xULud+GC5+DdVbVgPKtfmW6n1VDcZzTvRQufxR0VCq0gIvlfO+4kIw6Hie6h3uCoV65FC9S10RJBK2UIMvk6BI0qfUYFddBI2o31GDklmVoEDdZR5qsDgGwaRTDjU491wEAqzW/KvU4NyjCDLxK6hD9vCKCKA7ZhRRh0+qIfg8cYk65M1MRIBUzsinDnl9EJTu/JJalC5PQQCkLCmkFhvqIEg5Bl6hHhu6OuBX5Z/dQT2KhzsRvBpsoSYHhiXCb5LeyqUmu5ogqLl+e5W6bB1ZF35Qtc8G6lL6ciSCXct91GfnmAbwSaNRmz3U5lAqQkDMTC812jM+Cfa42s44RJ3mlkNoaHeUWp3MHP1gRVgSe9/g9y9Qq5MdETLi5nmomffbpQNSolAGEc37LtxVQs2871RGKEnZTgO4ty6a2K9zy+pOXE+5Bu1/NX7RXwtpgD33I8Q4B+TSGKUntq6cO27I0OEjR40ZN37i5ClT53yy6zyNkTc0AqGn2rsUZfJBTYSmdvspbunAQwhZkaOuUNxU4bgohLLElRQ38eldCHWdj1DcwNFuCAOxL7sprsM9tRzCQ8N1FD+x/m6Ej857KK6xpwvCirN3FsWPjjzlRLiJHHCa4ntnBkUhHJUfk0vBy+MrIFxVmV7IMFc883aEs1oLShjGSpckINzVX+5luMpMggBarGFY+upeiH9q+2eGnc0dIf4leXkpw4h3ZWuIa9V5q4BhomhhQ4ifqjL2NMPAhYxqENcX3fc7hrisQeUhbszRbRND2LbHXRC38POPPQxJ3tXtIMqi/rxChhz3O40hyip+8N8YUr4dWR3CkuQ5lxgi8halQlgX88u1XgY979fp5SBsSpx4lEHteEY9CF842v+xiEGqeHlHJ4TPKr2wnUFox8AqEH7SbEYWg0rWjGYQftV0/E4GiZ3jm0IEQMKg9SU0XMn6QQkQAVP5qY8KaKyCj56qDBFgMZ0Xn6GBzizuHAOhhLP1awdolAOvtXZCqFTz8Tl7vTSAd++cx2tC6FCl2+tbS6hRydbXu1WB0KlChykbi6lB8cYpHSpAmCC6zdgv8qlQ/hdj20RDmMTVpFdG5iEPA8xzKDOjVxMXhJliW6ZPX32MAXFs9fT0lrEQ5otLffbNdafoN6fWvflsahxEcIlv2aX/pEWrd5/10hbv2d2rF03q36VlPERQi0xITRs0bem6/bke3pInd/+6pdMGpaUmREKEnOiK1e9KSm7dvkvP9P5DRk+ePnv29Mmjh/RP79mlfevkpLuqV4yGEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQogg9n88BoNqqgPiCwAAAABJRU5ErkJggg==",alt:t?"Unfollow user":"Follow user",className:"w-5 h-5"})},YM=e=>{let{msg:t,isSender:n}=e;return(0,jE.jsxs)("div",{className:"flex items-start gap-2.5 ".concat(n?"flex-row-reverse":""),children:[(0,jE.jsx)("img",{className:"w-8 h-8 rounded-full",src:t.sender.avatar||"https://i.imgur.com/6bE0a8Z.png",alt:t.sender.username}),(0,jE.jsxs)("div",{className:"flex flex-col p-3 rounded-xl ".concat(n?"bg-indigo-600 rounded-tr-none":"bg-gray-700 rounded-tl-none"),children:[(0,jE.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,jE.jsx)("span",{className:"text-sm font-semibold text-white",children:n?"You":t.sender.username}),(0,jE.jsx)("span",{className:"text-xs font-normal text-gray-400",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]}),(0,jE.jsx)("p",{className:"text-sm font-normal text-white",children:t.text})]})]})},XM=()=>(0,jE.jsx)("span",{title:"Mic is on",children:"\ud83c\udfa4"}),JM=()=>(0,jE.jsx)("span",{title:"Mic is muted",children:"\ud83d\udd07"}),ZM=e=>{let{room:t,presence:n,chat:r,followingUserId:i,onFollowUser:s,onSendMessage:o,isMuted:l,onToggleMute:c,isSpeaking:u}=e;const{currentUser:h,userProfile:d}=VE(),[f,p]=(0,a.useState)(""),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r]);return(0,jE.jsxs)("div",{className:"w-80 flex-shrink-0 bg-gray-800 border-l border-gray-700 p-4 flex flex-col",children:[(0,jE.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Participants"}),(0,jE.jsx)("div",{className:"mb-4 space-y-3",children:t.participantProfiles.map(e=>{const r=e.uid===h.uid,o=i===e.uid,a=n&&void 0!==n[e.uid]&&null!==n[e.uid],c=u[e.uid]&&(!r||!l);return(0,jE.jsxs)("div",{className:"flex items-center justify-between ".concat(a?"":"opacity-50"),children:[(0,jE.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jE.jsx)("img",{src:e.avatar?e.avatar:"https://i.imgur.com/6bE0a8Z.png",alt:e.username,className:"w-8 h-8 rounded-full transition-all ".concat(c?"ring-4 ring-green-500":"")}),(0,jE.jsxs)("span",{children:[e.username," ",e.uid===t.hostId&&"(Host)"]})]}),!r&&a&&(0,jE.jsx)("button",{onClick:()=>s(e.uid),className:"p-1 rounded-full ".concat(o?"bg-indigo-600":"hover:bg-gray-700"),title:o?"Stop following":"Follow ".concat(e.username),children:(0,jE.jsx)(QM,{isFollowing:o})})]},e.uid)})}),(0,jE.jsx)("div",{className:"mb-4",children:(0,jE.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-semibold ".concat(l?"bg-red-600 hover:bg-red-700":"bg-gray-700 hover:bg-gray-600"),children:[l?(0,jE.jsx)(JM,{}):(0,jE.jsx)(XM,{}),l?"Unmute":"Mute"]})}),(0,jE.jsx)("hr",{className:"border-gray-700 my-4"}),(0,jE.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Chat"}),(0,jE.jsxs)("div",{className:"flex-1 space-y-4 overflow-y-auto mb-4 pr-2",children:[r.map(e=>(0,jE.jsx)(YM,{msg:e,isSender:e.sender.uid===h.uid},e.id)),(0,jE.jsx)("div",{ref:m})]}),(0,jE.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),f.trim()){const e={uid:h.uid,username:d.username,avatar:d.avatar};o(e,f),p("")}},className:"flex gap-2",children:[(0,jE.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type a message..."}),(0,jE.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700",children:"Send"})]})]})},$M=e=>{let{activeFile:t,language:n,updateFileOutput:r}=e;const[i,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[h,d]=(0,a.useState)("output");return(0,jE.jsxs)("div",{className:"h-full flex-shrink-0 bg-gray-900 border-t border-gray-700 flex flex-col",children:[(0,jE.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-700",children:[(0,jE.jsxs)("div",{className:"flex",children:[(0,jE.jsx)("button",{onClick:()=>d("output"),className:"px-4 py-2 text-sm font-medium ".concat("output"===h?"text-white border-b-2 border-indigo-500":"text-gray-400 hover:text-white"),children:"Output"}),(0,jE.jsx)("button",{onClick:()=>d("input"),className:"px-4 py-2 text-sm font-medium ".concat("input"===h?"text-white border-b-2 border-indigo-500":"text-gray-400 hover:text-white"),children:"Input (stdin)"})]}),(0,jE.jsx)("button",{onClick:async()=>{if(!t)return;s(!0),l(!1),d("output"),r(t.id,"Running code...");const{language:e,version:i,mainFile:o}=(e=>{switch(e.toLowerCase()){case"python":default:return{language:"python",version:"3.10.0",mainFile:"main.py"};case"javascript":return{language:"javascript",version:"18.15.0",mainFile:"main.js"};case"java":return{language:"java",version:"15.0.2",mainFile:"Main.java"};case"c++":return{language:"cpp",version:"10.2.0",mainFile:"main.cpp"}}})(n);try{const n=await fetch("https://emkc.org/api/v2/piston/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:e,version:i,files:[{name:o,content:t.code}],stdin:c,args:[],compile_timeout:1e4,run_timeout:3e3})}),s=await n.json();s.run.stderr?(l(!0),r(t.id,s.run.stderr)):(l(!1),r(t.id,s.run.stdout||"(No output)"))}catch(a){console.error(a),l(!0),r(t.id,"Failed to run code. Check console.")}s(!1)},disabled:i||!t,className:"bg-green-600 text-white px-4 py-1 rounded-md text-sm font-medium hover:bg-green-700 disabled:bg-gray-500 mr-2",children:i?"Running...":"Run Code"})]}),(0,jE.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,jE.jsx)("div",{className:"output"===h?"block":"hidden",children:(0,jE.jsx)("pre",{className:"p-4 text-white whitespace-pre-wrap font-mono text-sm ".concat(o?"text-red-400":""),children:t?t.output:"Loading..."})}),(0,jE.jsx)("div",{className:"h-full ".concat("input"===h?"block":"hidden"),children:(0,jE.jsx)("textarea",{id:"stdin",value:c,onChange:e=>u(e.target.value),className:"w-full h-full bg-gray-800 text-white p-4 focus:outline-none font-mono text-sm",placeholder:"Enter all program input here before running..."})})]})]})};class eL{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return function(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const e=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(e,r),r+=i.byteLength}return n}(e).buffer}}function tL(e){return new rL(e).unpack()}function nL(e){const t=new iL,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class rL{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;let t;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){const e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range ".concat(this.index," ").concat(e," ").concat(this.length));const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let n,r,i=0,s="";for(;i<e;)n=t[i],n<160?(r=n,i++):(192^n)<32?(r=(31&n)<<6|63&t[i+1],i+=2):(224^n)<16?(r=(15&n)<<12|(63&t[i+1])<<6|63&t[i+2],i+=3):(r=(7&n)<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=4),s+=String.fromCodePoint(r);return this.index+=e,s}unpack_array(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=this.unpack();return t}unpack_map(e){const t={};for(let n=0;n<e;n++){t[this.unpack()]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32();return(0===e>>31?1:-1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){const e=this.unpack_uint32(),t=(e>>20&2047)-1023;return(0===e>>31?1:-1)*((1048575&e|1048576)*2**(t-20)+this.unpack_uint32()*2**(t-52))}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class iL{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if("string"===typeof e)this.pack_string(e);else if("number"===typeof e)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===typeof e)!0===e?this._bufferBuilder.append(195):!1===e&&this._bufferBuilder.append(194);else if(void 0===e)this._bufferBuilder.append(192);else{if("object"!==typeof e)throw new Error('Type "'.concat(typeof e,'" not yet supported'));if(null===e)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const t=this.pack_array(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const t=e;this.pack_bin(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(e=>{this.pack_bin(new Uint8Array(e)),this._bufferBuilder.flush()});if(t!=Object&&!t.toString().startsWith("class"))throw new Error('Type "'.concat(t.toString(),'" not yet supported'));{const t=this.pack_object(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}}}}this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(219),this.pack_uint32(t)}this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),n=t.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(217),this.pack_uint32(n)}this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(221),this.pack_uint32(t)}const n=r=>{if(r<t){const t=this.pack(e[r]);return t instanceof Promise?t.then(()=>n(r+1)):n(r+1)}};return n(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this._bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this._bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){let t=0;e<0&&(t=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),r=e/2**n-1,i=Math.floor(r*2**52),s=2**32,o=t<<31|n+1023<<20|i/s&1048575,a=i%s;this._bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(a)}pack_object(e){const t=Object.keys(e),n=t.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(223),this.pack_uint32(n)}const r=n=>{if(n<t.length){const i=t[n];if(e.hasOwnProperty(i)){this.pack(i);const t=this.pack(e[i]);if(t instanceof Promise)return t.then(()=>r(n+1))}return r(n+1)}};return r(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){const t=4294967295&e;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t)}pack_uint64(e){const t=e/2**32,n=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&n)>>>24),this._bufferBuilder.append((16711680&n)>>>16),this._bufferBuilder.append((65280&n)>>>8),this._bufferBuilder.append(255&n)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((16711680&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){const t=Math.floor(e/2**32),n=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&n)>>>24),this._bufferBuilder.append((16711680&n)>>>16),this._bufferBuilder.append((65280&n)>>>8),this._bufferBuilder.append(255&n)}constructor(){this._bufferBuilder=new eL,this._textEncoder=new TextEncoder}}let sL=!0,oL=!0;function aL(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function lL(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const s=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,s),i.apply(this,[e,s])};const s=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(n))return s.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function cL(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(sL=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function uL(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(oL=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function hL(){if("object"===typeof window){if(sL)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function dL(e,t){oL&&console.warn(e+" is deprecated, please use "+t+" instead.")}function fL(e){return"[object Object]"===Object.prototype.toString.call(e)}function pL(e){return fL(e)?Object.keys(e).reduce(function(t,n){const r=fL(e[n]),i=r?pL(e[n]):e[n],s=r&&!Object.keys(i).length;return void 0===i||s?t:Object.assign(t,{[n]:i})},{}):e}function mL(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?mL(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(t=>{mL(e,e.get(t),n)})}))}function gL(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const s=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)}),s.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&mL(e,n,i)})}),i}const yL=hL;function vL(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"===typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){let s=e.video.facingMode;s=s&&("object"===typeof s?s:{ideal:s});const o=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let o=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!o&&n.length&&t.includes("back")&&(o=n[n.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=r(e.video),yL("chrome: "+JSON.stringify(e)),i(e)})}e.video=r(e.video)}return yL("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,e=>{n.webkitGetUserMedia(e,t,e=>{r&&r(s(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(s(e))))}}}function bL(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function wL(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else lL(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function _L(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function SL(e){if(!("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>gL(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),lL(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>gL(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function EL(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function CL(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return EL(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[t=>{const n=s(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>s(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]});const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function xL(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]})}function TL(e,t){lL(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}function AL(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){dL("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"===typeof n&&"object"===typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"===typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function kL(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function IL(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function PL(e,t){if("object"!==typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,s]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(ND){if("TypeError"!==ND.name)throw ND;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(i,s)}}function RL(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function NL(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),lL(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function DL(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){dL("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function OL(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ML(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}function LL(e){if("object"!==typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function FL(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function jL(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function UL(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function VL(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function zL(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function BL(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(qL(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function qL(e){return e&&void 0!==e.video?Object.assign({},e,{video:pL(e.video)}):e}function HL(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];void 0===r.urls&&r.url?(dL("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function WL(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function GL(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function KL(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var QL=n(824),YL=n.n(QL);function XL(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),r=YL().parseCandidate(e.candidate);for(const e in r)e in n||Object.defineProperty(n,e,{value:r[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,lL(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function JL(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||lL(e,"icecandidate",e=>{if(e.candidate){const t=YL().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function ZL(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=YL().splitSections(e.sdp);return t.shift(),t.some(e=>{const t=YL().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=YL().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>i}),this._sctp=s}return n.apply(this,arguments)}}function $L(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},lL(e,"datachannel",e=>(t(e.channel,e.target),e))}function eF(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function tF(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function nF(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function rF(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!==typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then(e=>n.apply(this,[e]))})}const iF=function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=hL,a=function(e){const t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const e=n.userAgentData.brands.find(e=>"Chromium"===e.brand);if(e)return{browser:"chrome",version:parseInt(e.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(aL(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(aL(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=parseInt(aL(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=aL(n.userAgent,/Version\/(\d+(\.?\d+))/,1)}return t}(e),l={browserDetails:a,commonShim:o,extractVersion:aL,disableLog:cL,disableWarnings:uL,sdp:QL};switch(a.browser){case"chrome":if(!r||!xL||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),l;if(null===a.version)return n("Chrome shim can not determine version, not shimming."),l;n("adapter.js shimming chrome."),l.browserShim=r,nF(e,a),rF(e),vL(e,a),bL(e),xL(e,a),wL(e),CL(e,a),_L(e),SL(e),TL(e,a),XL(e),JL(e),eF(e),ZL(e,a),$L(e),tF(e,a);break;case"firefox":if(!i||!PL||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),l;n("adapter.js shimming firefox."),l.browserShim=i,nF(e,a),rF(e),AL(e,a),PL(e,a),IL(e),DL(e),RL(e),NL(e),OL(e),ML(e),LL(e),FL(e),jL(e),XL(e),eF(e),ZL(e,a),$L(e);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),l;n("adapter.js shimming safari."),l.browserShim=s,nF(e,a),rF(e),HL(e),GL(e),zL(e),UL(e),VL(e),WL(e),BL(e),KL(e),XL(e),JL(e),ZL(e,a),$L(e),tF(e,a);break;default:n("Unsupported browser!")}return l}({window:"undefined"===typeof window?void 0:window}),sF=iF;var oF,aF,lF,cF=4294967295;function uF(e,t,n){var r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function hF(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var dF=("undefined"===typeof process||"never"!==(null===(oF=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/CodeCollab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STORAGE_BUCKET:"codecollab-51e34.firebasestorage.app",REACT_APP_AUTH_DOMAIN:"codecollab-51e34.firebaseapp.com",REACT_APP_PROJECT_ID:"codecollab-51e34",REACT_APP_APP_ID:"1:843472885618:web:39e387dd0fdc16c5ff6feb",REACT_APP_API_KEY:"AIzaSyBsa4EXmMMdQjMccbG17wBPMd9iQsb4KJY",REACT_APP_MESSAGING_SENDER_ID:"843472885618"})||void 0===oF?void 0:oF.TEXT_ENCODING))&&"undefined"!==typeof TextEncoder&&"undefined"!==typeof TextDecoder;function fF(e){for(var t=e.length,n=0,r=0;r<t;){var i=e.charCodeAt(r++);if(0!==(4294967168&i))if(0===(4294965248&i))n+=2;else{if(i>=55296&&i<=56319&&r<t){var s=e.charCodeAt(r);56320===(64512&s)&&(++r,i=((1023&i)<<10)+(1023&s)+65536)}n+=0===(4294901760&i)?3:4}else n++}return n}var pF=dF?new TextEncoder:void 0,mF=dF?"undefined"!==typeof process&&"force"!==(null===(aF=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/CodeCollab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STORAGE_BUCKET:"codecollab-51e34.firebasestorage.app",REACT_APP_AUTH_DOMAIN:"codecollab-51e34.firebaseapp.com",REACT_APP_PROJECT_ID:"codecollab-51e34",REACT_APP_APP_ID:"1:843472885618:web:39e387dd0fdc16c5ff6feb",REACT_APP_API_KEY:"AIzaSyBsa4EXmMMdQjMccbG17wBPMd9iQsb4KJY",REACT_APP_MESSAGING_SENDER_ID:"843472885618"})||void 0===aF?void 0:aF.TEXT_ENCODING)?200:0:cF;var gF=(null===pF||void 0===pF?void 0:pF.encodeInto)?function(e,t,n){pF.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(pF.encode(e),n)};function yF(e,t,n){for(var r=t,i=r+n,s=[],o="";r<i;){var a=e[r++];if(0===(128&a))s.push(a);else if(192===(224&a)){var l=63&e[r++];s.push((31&a)<<6|l)}else if(224===(240&a)){l=63&e[r++];var c=63&e[r++];s.push((31&a)<<12|l<<6|c)}else if(240===(248&a)){var u=(7&a)<<18|(l=63&e[r++])<<12|(c=63&e[r++])<<6|63&e[r++];u>65535&&(u-=65536,s.push(u>>>10&1023|55296),u=56320|1023&u),s.push(u)}else s.push(a);s.length>=4096&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return s.length>0&&(o+=String.fromCharCode.apply(String,s)),o}var vF=dF?new TextDecoder:null,bF=dF?"undefined"!==typeof process&&"force"!==(null===(lF=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/CodeCollab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STORAGE_BUCKET:"codecollab-51e34.firebasestorage.app",REACT_APP_AUTH_DOMAIN:"codecollab-51e34.firebaseapp.com",REACT_APP_PROJECT_ID:"codecollab-51e34",REACT_APP_APP_ID:"1:843472885618:web:39e387dd0fdc16c5ff6feb",REACT_APP_API_KEY:"AIzaSyBsa4EXmMMdQjMccbG17wBPMd9iQsb4KJY",REACT_APP_MESSAGING_SENDER_ID:"843472885618"})||void 0===lF?void 0:lF.TEXT_DECODER)?200:0:cF;var wF=function(e,t){this.type=e,this.data=t},_F=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SF=function(e){function t(n){var r=e.call(this,n)||this,i=Object.create(t.prototype);return Object.setPrototypeOf(r,i),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return _F(t,e),t}(Error);var EF={type:-1,encode:function(e){return e instanceof Date?function(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var i=new Uint8Array(4);return(t=new DataView(i.buffer)).setUint32(0,n),i}var s=n/4294967296,o=4294967295&n;return i=new Uint8Array(8),(t=new DataView(i.buffer)).setUint32(0,r<<2|3&s),t.setUint32(4,o),i}return i=new Uint8Array(12),(t=new DataView(i.buffer)).setUint32(0,r),uF(t,4,n),i}(function(e){var t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),i=Math.floor(r/1e9);return{sec:n+i,nsec:r-1e9*i}}(e)):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:hF(t,4),nsec:t.getUint32(0)};default:throw new SF("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},CF=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(EF)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var i=1+t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){if(null!=(r=this.builtInEncoders[n]))if(null!=(i=r(e,t)))return new wF(-1-n,i)}for(n=0;n<this.encoders.length;n++){var r,i;if(null!=(r=this.encoders[n]))if(null!=(i=r(e,t)))return new wF(n,i)}return e instanceof wF?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new wF(t,e)},e.defaultCodec=new e,e}();function xF(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}!function(){function e(e,t,n,r,i,s,o,a){void 0===e&&(e=CF.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=i,this.forceFloat32=s,this.ignoreUndefined=o,this.forceIntegerToFloat=a,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"===typeof e?this.encodeBoolean(e):"number"===typeof e?this.encodeNumber(e):"string"===typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>mF){var t=fF(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),gF(e,this.bytes,this.pos),this.pos+=t}else{t=fF(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,i=n,s=0;s<r;){var o=e.charCodeAt(s++);if(0!==(4294967168&o)){if(0===(4294965248&o))t[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){var a=e.charCodeAt(s);56320===(64512&a)&&(++s,o=((1023&o)<<10)+(1023&a)+65536)}0===(4294901760&o)?(t[i++]=o>>12&15|224,t[i++]=o>>6&63|128):(t[i++]=o>>18&7|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128)}t[i++]=63&o|128}else t[i++]=o}}(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!==typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=xF(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var r=0,i=e;r<i.length;r++){var s=i[r];this.doEncode(s,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,i=t;r<i.length;r++){void 0!==e[i[r]]&&n++}return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var i=0,s=n;i<s.length;i++){var o=s[i],a=e[o];this.ignoreUndefined&&void 0===a||(this.encodeString(o),this.doEncode(a,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),uF(this.view,this.pos,e),this.pos+=8}}();function TF(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var AF=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var r=0,i=this.caches[n-1];r<i.length;r++){for(var s=i[r],o=s.bytes,a=0;a<n;a++)if(o[a]!==e[t+a])continue e;return s.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var i=yF(e,t,n),s=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(s,i),i},e}(),kF=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(ND){s(ND)}}function a(e){try{l(r.throw(e))}catch(ND){s(ND)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},IF=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(ND){s=[6,ND],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},PF=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}},RF=function(e){return this instanceof RF?(this.v=e,this):new RF(e)},NF=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{!function(e){e.value instanceof RF?Promise.resolve(e.value.v).then(l,c):u(s[0][2],e)}(i[e](t))}catch(ND){u(s[0][3],ND)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}},DF=function(e){var t=typeof e;return"string"===t||"number"===t},OF=new DataView(new ArrayBuffer(0)),MF=new Uint8Array(OF.buffer),LF=function(){try{OF.getInt8(0)}catch(ND){return ND.constructor}throw new Error("never reached")}(),FF=new LF("Insufficient data"),jF=new AF;!function(){function e(e,t,n,r,i,s,o,a){void 0===e&&(e=CF.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=cF),void 0===r&&(r=cF),void 0===i&&(i=cF),void 0===s&&(s=cF),void 0===o&&(o=cF),void 0===a&&(a=jF),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=i,this.maxMapLength=s,this.maxExtLength=o,this.keyDecoder=a,this.totalPos=0,this.pos=0,this.view=OF,this.bytes=MF,this.headByte=-1,this.stack=[]}e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=xF(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=xF(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=xF(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return IF(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})},e.prototype.decodeAsync=function(e){var t,n,r,i;return kF(this,void 0,void 0,function(){var s,o,a,l,c,u,h,d;return IF(this,function(f){switch(f.label){case 0:s=!1,f.label=1;case 1:f.trys.push([1,6,7,12]),t=PF(e),f.label=2;case 2:return[4,t.next()];case 3:if((n=f.sent()).done)return[3,5];if(a=n.value,s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{o=this.doDecodeSync(),s=!0}catch(ND){if(!(ND instanceof LF))throw ND}this.totalPos+=this.pos,f.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return l=f.sent(),r={error:l},[3,12];case 7:return f.trys.push([7,,10,11]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,9];case 8:f.sent(),f.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(s){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,o]}throw u=(c=this).headByte,h=c.pos,d=c.totalPos,new RangeError("Insufficient data in parsing ".concat(TF(u)," at ").concat(d," (").concat(h," in the current buffer)"))}})})},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return NF(this,arguments,function(){var n,r,i,s,o,a,l,c,u;return IF(this,function(h){switch(h.label){case 0:n=t,r=-1,h.label=1;case 1:h.trys.push([1,13,14,19]),i=PF(e),h.label=2;case 2:return[4,RF(i.next())];case 3:if((s=h.sent()).done)return[3,12];if(o=s.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),n&&(r=this.readArraySize(),n=!1,this.complete()),h.label=4;case 4:h.trys.push([4,9,,10]),h.label=5;case 5:return[4,RF(this.doDecodeSync())];case 6:return[4,h.sent()];case 7:return h.sent(),0===--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((a=h.sent())instanceof LF))throw a;return[3,10];case 10:this.totalPos+=this.pos,h.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return l=h.sent(),c={error:l},[3,19];case 14:return h.trys.push([14,,17,18]),s&&!s.done&&(u=i.return)?[4,RF(u.call(i))]:[3,16];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(c)throw c.error;return[7];case 18:return[7];case 19:return[2]}})})},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!==(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!==(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){n=this.lookU8();t=this.decodeUtf8String(n,1)}else if(218===e){n=this.lookU16();t=this.decodeUtf8String(n,2)}else if(219===e){n=this.lookU32();t=this.decodeUtf8String(n,4)}else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e){r=this.lookU16();t=this.decodeBinary(r,2)}else if(198===e){r=this.lookU32();t=this.decodeBinary(r,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){r=this.lookU8();t=this.decodeExtension(r,1)}else if(200===e){r=this.lookU16();t=this.decodeExtension(r,2)}else{if(201!==e)throw new SF("Unrecognized type byte: ".concat(TF(e)));r=this.lookU32();t=this.decodeExtension(r,4)}this.complete();for(var i=this.stack;i.length>0;){var s=i[i.length-1];if(0===s.type){if(s.array[s.position]=t,s.position++,s.position!==s.size)continue e;i.pop(),t=s.array}else{if(1===s.type){if(!DF(t))throw new SF("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new SF("The key __proto__ is not allowed");s.key=t,s.type=2;continue e}if(s.map[s.key]=t,s.readCount++,s.readCount!==s.size){s.key=null,s.type=1;continue e}i.pop(),t=s.map}}return t}},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new SF("Unrecognized array type byte: ".concat(TF(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new SF("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new SF("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new SF("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw FF;var r,i=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,i,e):e>bF?function(e,t,n){var r=e.subarray(t,t+n);return vF.decode(r)}(this.bytes,i,e):yF(this.bytes,i,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new SF("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw FF;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new SF("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=hF(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e}}();var UF;function VF(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class zF{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],n=e.byteLength,r=Math.ceil(n/this.chunkedMTU);let i=0,s=0;for(;s<n;){const o=Math.min(n,s+this.chunkedMTU),a=e.slice(s,o),l={__peerData:this._dataCount,n:i,data:a,total:r};t.push(l),s=o,i++}return this._dataCount++,t}}}function BF(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const qF=sF.default||sF,HF=new class{isWebRTCSupported(){return"undefined"!==typeof RTCPeerConnection}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&(!this.isIOS&&t>=this.minSafariVersion))}getBrowser(){return qF.browserDetails.browser}getVersion(){return qF.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=qF.browserDetails.version||0;if("chrome"===e&&t<this.minChromeVersion)return!1;if("firefox"===e&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch(ND){}finally{n&&n.close()}return r}toString(){return"Supports:\n    browser:".concat(this.getBrowser(),"\n    version:").concat(this.getVersion(),"\n    isIOS:").concat(this.isIOS,"\n    isWebRTCSupported:").concat(this.isWebRTCSupported(),"\n    isBrowserSupported:").concat(this.isBrowserSupported(),"\n    isUnifiedPlanSupported:").concat(this.isUnifiedPlanSupported())}constructor(){this.isIOS="undefined"!==typeof navigator&&["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},WF=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),GF=()=>Math.random().toString(36).slice(2),KF={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};const QF=new class extends zF{noop(){}blobToArrayBuffer(e,t){const n=new FileReader;return n.onload=function(e){e.target&&t(e.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer}isSecure(){return"https:"===location.protocol}constructor(){super(...arguments),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=KF,this.browser=HF.getBrowser(),this.browserVersion=HF.getVersion(),this.pack=nL,this.unpack=tL,this.supports=function(){const e={browser:HF.isBrowserSupported(),webRTC:HF.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;let t;try{let n;t=new RTCPeerConnection(KF),e.audioVideo=!0;try{n=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!n.ordered;try{n.binaryType="blob",e.binaryBlob=!HF.isIOS}catch(ND){}}catch(ND){}finally{n&&n.close()}}catch(ND){}finally{t&&t.close()}return e}(),this.validateId=WF,this.randomToken=GF}};var YF,XF=new class{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._logLevel>=3&&this._print(3,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._logLevel>=2&&this._print(2,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._logLevel>=1&&this._print(1,...t)}setLogFunction(e){this._print=e}_print(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=["PeerJS: ",...n];for(const s in i)i[s]instanceof Error&&(i[s]="("+i[s].name+") "+i[s].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}},JF=Object.prototype.hasOwnProperty,ZF="~";function $F(){}function ej(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function tj(e,t,n,r,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new ej(n,r||e,i),o=ZF?ZF+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function nj(e,t){0===--e._eventsCount?e._events=new $F:delete e._events[t]}function rj(){this._events=new $F,this._eventsCount=0}Object.create&&($F.prototype=Object.create(null),(new $F).__proto__||(ZF=!1)),rj.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)JF.call(e,t)&&n.push(ZF?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},rj.prototype.listeners=function(e){var t=ZF?ZF+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},rj.prototype.listenerCount=function(e){var t=ZF?ZF+e:e,n=this._events[t];return n?n.fn?1:n.length:0},rj.prototype.emit=function(e,t,n,r,i,s){var o=ZF?ZF+e:e;if(!this._events[o])return!1;var a,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,s),!0}for(l=1,a=new Array(u-1);l<u;l++)a[l-1]=arguments[l];c.fn.apply(c.context,a)}else{var h,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!a)for(h=1,a=new Array(u-1);h<u;h++)a[h-1]=arguments[h];c[l].fn.apply(c[l].context,a)}}return!0},rj.prototype.on=function(e,t,n){return tj(this,e,t,n,!1)},rj.prototype.once=function(e,t,n){return tj(this,e,t,n,!0)},rj.prototype.removeListener=function(e,t,n,r){var i=ZF?ZF+e:e;if(!this._events[i])return this;if(!t)return nj(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||nj(this,i);else{for(var o=0,a=[],l=s.length;o<l;o++)(s[o].fn!==t||r&&!s[o].once||n&&s[o].context!==n)&&a.push(s[o]);a.length?this._events[i]=1===a.length?a[0]:a:nj(this,i)}return this},rj.prototype.removeAllListeners=function(e){var t;return e?(t=ZF?ZF+e:e,this._events[t]&&nj(this,t)):(this._events=new $F,this._eventsCount=0),this},rj.prototype.off=rj.prototype.removeListener,rj.prototype.addListener=rj.prototype.on,rj.prefixed=ZF,rj.EventEmitter=rj,YF=rj;var ij={};VF(ij,"ConnectionType",()=>sj),VF(ij,"PeerErrorType",()=>oj),VF(ij,"BaseConnectionErrorType",()=>aj),VF(ij,"DataConnectionErrorType",()=>lj),VF(ij,"SerializationType",()=>cj),VF(ij,"SocketEventType",()=>uj),VF(ij,"ServerMessageType",()=>hj);var sj=function(e){return e.Data="data",e.Media="media",e}({}),oj=function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e}({}),aj=function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e}({}),lj=function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e}({}),cj=function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e}({}),uj=function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e}({}),hj=function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e}({});const dj="1.5.5";class fj extends YF.EventEmitter{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5e3;super(),this.pingInterval=s,this._disconnected=!0,this._messagesQueue=[];const o=e?"wss://":"ws://";this._baseUrl=o+t+":"+n+r+"peerjs?key="+i}start(e,t){this._id=e;const n="".concat(this._baseUrl,"&id=").concat(e,"&token=").concat(t);!this._socket&&this._disconnected&&(this._socket=new WebSocket(n+"&version="+dj),this._disconnected=!1,this._socket.onmessage=e=>{let t;try{t=JSON.parse(e.data),XF.log("Server message received:",t)}catch(ND){return void XF.log("Invalid server message",e.data)}this.emit(uj.Message,t)},this._socket.onclose=e=>{this._disconnected||(XF.log("Socket closed.",e),this._cleanup(),this._disconnected=!0,this.emit(uj.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),XF.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void XF.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:hj.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&1===this._socket.readyState}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(uj.Error,"Invalid message");if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class pj{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===sj.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const n=this.connection,r={ordered:!!e.reliable},i=t.createDataChannel(n.label,r);n._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){XF.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,n=this.connection.connectionId,r=this.connection.type,i=this.connection.provider;XF.log("Listening for ICE candidates."),e.onicecandidate=e=>{e.candidate&&e.candidate.candidate&&(XF.log("Received ICE candidates for ".concat(t,":"),e.candidate),i.socket.send({type:hj.Candidate,payload:{candidate:e.candidate,type:r,connectionId:n},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":XF.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(aj.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":XF.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(aj.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":XF.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},XF.log("Listening for data channel"),e.ondatachannel=e=>{XF.log("Received data channel");const r=e.channel;i.getConnection(t,n)._initializeDataChannel(r)},XF.log("Listening for remote stream"),e.ontrack=e=>{XF.log("Received remote stream");const r=e.streams[0],s=i.getConnection(t,n);if(s.type===sj.Media){const e=s;this._addStreamToMediaConnection(r,e)}}}cleanup(){XF.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t="closed"!==e.signalingState;let n=!1;const r=this.connection.dataChannel;r&&(n=!!r.readyState&&"closed"!==r.readyState),(t||n)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);XF.log("Created offer."),this.connection.options.sdpTransform&&"function"===typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),XF.log("Set localDescription:",r,"for:".concat(this.connection.peer));let n={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===sj.Data){const e=this.connection;n=m(m({},n),{},{label:e.label,reliable:e.reliable,serialization:e.serialization})}t.socket.send({type:hj.Offer,payload:n,dst:this.connection.peer})}catch(n){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=n&&(t.emitError(oj.WebRTC,n),XF.log("Failed to setLocalDescription, ",n))}}catch(r){t.emitError(oj.WebRTC,r),XF.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createAnswer();XF.log("Created answer."),this.connection.options.sdpTransform&&"function"===typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),XF.log("Set localDescription:",r,"for:".concat(this.connection.peer)),t.socket.send({type:hj.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(n){t.emitError(oj.WebRTC,n),XF.log("Failed to setLocalDescription, ",n)}}catch(r){t.emitError(oj.WebRTC,r),XF.log("Failed to create answer, ",r)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const n=this.connection.peerConnection,r=this.connection.provider;XF.log("Setting remote description",t);const i=this;try{await n.setRemoteDescription(t),XF.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),"OFFER"===e&&await i._makeAnswer()}catch(s){r.emitError(oj.WebRTC,s),XF.log("Failed to setRemoteDescription, ",s)}}async handleCandidate(e){XF.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),XF.log("Added ICE candidate for:".concat(this.connection.peer))}catch(t){this.connection.provider.emitError(oj.WebRTC,t),XF.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(XF.log("add tracks from stream ".concat(e.id," to peer connection")),!t.addTrack)return XF.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{t.addTrack(n,e)})}_addStreamToMediaConnection(e,t){XF.log("add stream ".concat(e.id," to media connection ").concat(t.connectionId)),t.addStream(e)}}class mj extends YF.EventEmitter{emitError(e,t){XF.error("Error:",t),this.emit("error",new gj("".concat(e),t))}}class gj extends Error{constructor(e,t){"string"===typeof t?super(t):(super(),Object.assign(this,t)),this.type=e}}class yj extends mj{get open(){return this._open}constructor(e,t,n){super(),this.peer=e,this.provider=t,this.options=n,this._open=!1,this.metadata=n.metadata}}class vj extends yj{get type(){return sj.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,n){super(e,t,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||vj.ID_PREFIX+QF.randomToken(),this._negotiator=new pj(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{XF.log("DC#".concat(this.connectionId," dc connection success")),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{XF.log("DC#".concat(this.connectionId," dc closed for:"),this.peer),this.close()}}addStream(e){XF.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,n=e.payload;switch(e.type){case hj.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case hj.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:XF.warn("Unrecognized message type:".concat(t," from peer:").concat(this.peer))}}answer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._localStream)return void XF.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(m(m({},this.options._payload),{},{_stream:e}));const n=this.provider._getMessages(this.connectionId);for(const r of n)this.handleMessage(r);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}vj.ID_PREFIX="mc_";class bj{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:n,port:r,path:i,key:s}=this._options,o=new URL("".concat(t,"://").concat(n,":").concat(r).concat(i).concat(s,"/").concat(e));return o.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),o.searchParams.set("version",dj),fetch(o.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(200!==e.status)throw new Error("Error. Status:".concat(e.status));return e.text()}catch(mv){XF.error("Error retrieving ID",mv);let t="";throw"/"===this._options.path&&this._options.host!==QF.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(200!==e.status){if(401===e.status){let e="";throw e=this._options.host===QF.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+e)}throw new Error("Error. Status:".concat(e.status))}return e.json()}catch(mv){throw XF.error("Error retrieving list peers",mv),new Error("Could not get list peers from the server."+mv)}}}class wj extends yj{get type(){return sj.Data}constructor(e,t,n){super(e,t,n),this.connectionId=this.options.connectionId||wj.ID_PREFIX+GF(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new pj(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{XF.log("DC#".concat(this.connectionId," dc connection success")),this._open=!0,this.emit("open")},this.dataChannel.onmessage=e=>{XF.log("DC#".concat(this.connectionId," dc onmessage:"),e.data)},this.dataChannel.onclose=()=>{XF.log("DC#".concat(this.connectionId," dc closed for:"),this.peer),this.close()}}close(e){null!==e&&void 0!==e&&e.flush?this.send({__peerData:{type:"close"}}):(this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close")))}send(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.open)return this._send(e,t);this.emitError(lj.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}async handleMessage(e){const t=e.payload;switch(e.type){case hj.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case hj.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:XF.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}}}(UF=wj).ID_PREFIX="dc_",UF.MAX_BUFFERED_AMOUNT=8388608;class _j extends wj{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",e=>this._handleDataMessage(e))}_bufferedSend(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>wj.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(ND){return XF.error("DC#:".concat(this.connectionId," Error when sending:"),ND),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open)return;if(0===this._buffer.length)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){null!==e&&void 0!==e&&e.flush?this.send({__peerData:{type:"close"}}):(this._buffer=[],this._bufferSize=0,super.close())}constructor(){super(...arguments),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Sj extends _j{close(e){super.close(e),this._chunkedData={}}constructor(e,t,n){super(e,t,n),this.chunker=new zF,this.serialization=cj.Binary,this._chunkedData={}}_handleDataMessage(e){let{data:t}=e;const n=tL(t),r=n.__peerData;if(r)return"close"===r.type?void this.close():void this._handleChunk(n);this.emit("data",n)}_handleChunk(e){const t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];const e=BF(n.data);this._handleDataMessage({data:e})}}_send(e,t){const n=nL(e);if(n instanceof Promise)return this._send_blob(n);!t&&n.byteLength>this.chunker.chunkedMTU?this._sendChunks(n):this._bufferedSend(n)}async _send_blob(e){const t=await e;t.byteLength>this.chunker.chunkedMTU?this._sendChunks(t):this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);XF.log("DC#".concat(this.connectionId," Try to send ").concat(t.length," chunks..."));for(const n of t)this.send(n,!0)}}class Ej extends _j{_handleDataMessage(e){let{data:t}=e;super.emit("data",t)}_send(e,t){this._bufferedSend(e)}constructor(){super(...arguments),this.serialization=cj.None}}class Cj extends _j{_handleDataMessage(e){let{data:t}=e;const n=this.parse(this.decoder.decode(t)),r=n.__peerData;r&&"close"===r.type?this.close():this.emit("data",n)}_send(e,t){const n=this.encoder.encode(this.stringify(e));n.byteLength>=QF.chunkedMTU?this.emitError(lj.MessageToBig,"Message too big for JSON channel"):this._bufferedSend(n)}constructor(){super(...arguments),this.serialization=cj.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class xj extends mj{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,n]of this._connections)e[t]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){let n;super(),this._serializers={raw:Ej,json:Cj,binary:Sj,"binary-utf8":Sj,default:Sj},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(n=e.toString()),t=m({debug:0,host:QF.CLOUD_HOST,port:QF.CLOUD_PORT,path:"/",key:xj.DEFAULT_KEY,token:QF.randomToken(),config:QF.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{}},t),this._options=t,this._serializers=m(m({},this._serializers),this.options.serializers),"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==QF.CLOUD_HOST?this._options.secure=QF.isSecure():this._options.host==QF.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&XF.setLogFunction(this._options.logFunction),XF.logLevel=this._options.debug||0,this._api=new bj(t),this._socket=this._createServerConnection(),QF.supports.audioVideo||QF.supports.data?!n||QF.validateId(n)?n?this._initialize(n):this._api.retrieveId().then(e=>this._initialize(e)).catch(e=>this._abort(oj.ServerError,e)):this._delayedAbort(oj.InvalidID,'ID "'.concat(n,'" is invalid')):this._delayedAbort(oj.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new fj(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(uj.Message,e=>{this._handleMessage(e)}),e.on(uj.Error,e=>{this._abort(oj.SocketError,e)}),e.on(uj.Disconnected,()=>{this.disconnected||(this.emitError(oj.Network,"Lost connection to server."),this.disconnect())}),e.on(uj.Close,()=>{this.disconnected||this._abort(oj.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,n=e.payload,r=e.src;switch(t){case hj.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case hj.Error:this._abort(oj.ServerError,n.msg);break;case hj.IdTaken:this._abort(oj.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case hj.InvalidKey:this._abort(oj.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case hj.Leave:XF.log("Received leave message from ".concat(r)),this._cleanupPeer(r),this._connections.delete(r);break;case hj.Expire:this.emitError(oj.PeerUnavailable,"Could not connect to peer ".concat(r));break;case hj.Offer:{const e=n.connectionId;let t=this.getConnection(r,e);if(t&&(t.close(),XF.warn("Offer received for existing Connection ID:".concat(e))),n.type===sj.Media){const i=new vj(r,this,{connectionId:e,_payload:n,metadata:n.metadata});t=i,this._addConnection(r,t),this.emit("call",i)}else{if(n.type!==sj.Data)return void XF.warn("Received malformed connection type:".concat(n.type));{const i=new this._serializers[n.serialization](r,this,{connectionId:e,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});t=i,this._addConnection(r,t),this.emit("connection",i)}}const i=this._getMessages(e);for(const n of i)t.handleMessage(n);break}default:{if(!n)return void XF.warn("You received a malformed message from ".concat(r," of type ").concat(t));const i=n.connectionId,s=this.getConnection(r,i);s&&s.peerConnection?s.handleMessage(e):i?this._storeMessage(i,e):XF.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=m({serialization:"default"},t),this.disconnected)return XF.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(oj.Disconnected,"Cannot connect to new Peer after disconnecting from server.");const n=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,n),n}call(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.disconnected)return XF.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(oj.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(!t)return void XF.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");const r=new vj(e,this,m(m({},n),{},{_stream:t}));return this._addConnection(e,r),r}_addConnection(e,t){XF.log("add connection ".concat(t.type,":").concat(t.connectionId," to peerId:").concat(e)),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const n=this._connections.get(e);if(!n)return null;for(const r of n)if(r.connectionId===t)return r;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){XF.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(XF.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const n of t)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;XF.log("Disconnect peer with ID:".concat(e)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)XF.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"));XF.error("In a hurry? We're still trying to make the initial connection!")}}listAllPeers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>{};this._api.listAllPeers().then(t=>e(t)).catch(e=>this._abort(oj.ServerError,e))}}xj.DEFAULT_KEY="peerjs";var Tj=xj;const Aj=e=>{let{stream:t}=e;const n=(0,a.useRef)(null);return(0,a.useEffect)(()=>{n.current&&t&&(n.current.srcObject=t)},[t]),(0,jE.jsx)("audio",{ref:n,autoPlay:!0,playsInline:!0})},kj=e=>{let{room:t,files:n,presence:r,chat:i,updateFileCode:s,updateFileOutput:o,updatePresence:l,addNewFile:c,removeFile:u,sendChatMessage:h}=e;const{currentUser:d}=VE(),[f,p]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(null),w=(0,a.useRef)(!1),_=(0,a.useRef)(null),S=t.participants||[],{remoteStreams:E,isMuted:C,toggleMute:x,isSpeaking:T}=((e,t)=>{const{currentUser:n}=VE(),[r,i]=(0,a.useState)(null),[s,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)({}),[u,h]=(0,a.useState)({}),d=n.uid,f=(0,a.useRef)(null),p=(0,a.useRef)(null),g=(0,a.useRef)(null),y=(0,a.useRef)(null),v=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,a.useRef)({}),_=(e,t)=>{try{const n=new(window.AudioContext||window.webkitAudioContext),r=n.createAnalyser();r.fftSize=512;const i=new Uint8Array(r.frequencyBinCount),s=n.createMediaStreamSource(e);s.connect(r);const o={id:0},a=()=>{r.getByteFrequencyData(i);let e=i.reduce((e,t)=>e+t,0)/i.length;c(n=>m(m({},n),{},{[t]:e>20})),o.id=requestAnimationFrame(a)};a(),w.current[t]={context:n,animFrameId:o,source:s,analyser:r}}catch(n){console.error("Error setting up remote analyser:",n)}},S=e=>{const t=w.current[e];t&&(cancelAnimationFrame(t.animFrameId.id),t.context.close().catch(console.error),c(t=>{const n=m({},t);return delete n[e],n}),delete w.current[e])};(0,a.useEffect)(()=>(navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>{i(e),b.current=e;const t=new(window.AudioContext||window.webkitAudioContext);p.current=t;const n=t.createAnalyser();n.fftSize=512,g.current=n;const r=new Uint8Array(n.frequencyBinCount);y.current=r,t.createMediaStreamSource(e).connect(n);const s=()=>{if(g.current){g.current.getByteFrequencyData(y.current);let e=y.current.reduce((e,t)=>e+t,0)/y.current.length;c(t=>m(m({},t),{},{[d]:e>20}))}v.current=requestAnimationFrame(s)};s()}).catch(e=>{console.error("Failed to get mic permissions:",e)}),()=>{v.current&&cancelAnimationFrame(v.current),p.current&&"closed"!==p.current.state&&p.current.close().catch(console.error),b.current&&(b.current.getTracks().forEach(e=>e.stop()),b.current=null),Object.keys(w.current).forEach(S)}),[d]);const E=t.join(",");return(0,a.useEffect)(()=>{if(!r)return;const e=new Tj(d,{host:"0.peerjs.com",port:443,path:"/peerjs",secure:!0});return f.current=e,e.on("call",e=>{e.answer(r),e.on("stream",t=>{h(n=>m(m({},n),{},{[e.peer]:t})),_(t,e.peer)}),e.on("close",()=>{h(t=>{const n=m({},t);return delete n[e.peer],n}),S(e.peer)})}),t.forEach(t=>{if(t!==d){const n=e.call(t,r);n&&(n.on("stream",e=>{h(n=>m(m({},n),{},{[t]:e})),_(e,t)}),n.on("close",()=>{h(e=>{const n=m({},e);return delete n[t],n}),S(t)}))}}),()=>{f.current&&f.current.destroy()}},[e,d,E,r]),{remoteStreams:u,isMuted:s,toggleMute:(0,a.useCallback)(()=>{b.current&&o(e=>{const t=!e;return b.current.getAudioTracks().forEach(e=>{e.enabled=!t}),t})},[]),isSpeaking:l}})(t.roomId,S,S.join(",")),A=((e,t)=>{const[n,r]=(0,a.useState)(null);return(0,a.useCallback)(function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n&&clearTimeout(n);const a=setTimeout(()=>{e(...s)},t);r(a)},[e,t,n])})((e,t)=>{s(e,t)},100);(0,a.useEffect)(()=>{if(!f&&n&&Object.keys(n).length>0){const e=Object.keys(n)[0];p(e),b(n[e].code),l(d.uid,e)}if(f&&n&&n[f]){const e=n[f].code;g||w.current||e===v||b(e)}},[n,f,d.uid,l,g,v]),(0,a.useEffect)(()=>{if(g&&r&&r[g]){const e=r[g].activeFileId;e!==f&&p(e),n&&n[e]&&n[e].code!==v&&b(n[e].code)}},[g,r,n,f,v]),(0,a.useEffect)(()=>{if(n&&f&&!n[f]){console.warn("Active file ".concat(f," was deleted. Switching to a new file."));const e=Object.keys(n);if(e.length>0){const t=e[0];y(null),w.current=!1,p(t),b(n[t].code),null!==d&&void 0!==d&&d.uid&&l(d.uid,t)}else p(null),b(null)}},[n,f,d,l]);const k=e=>{y(null),w.current=!1,p(e),b(n[e].code),l(d.uid,e)};if(!n||!f||!n[f]||null===v)return(0,jE.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-10",children:"Loading files..."});const I=m({id:f},n[f]);return(0,jE.jsxs)("div",{className:"flex flex-col h-screen bg-gray-900 text-white",children:[(0,jE.jsx)("div",{style:{position:"absolute",top:"-1000px",left:"-1000px"},children:Object.entries(E).map(e=>{let[t,n]=e;return(0,jE.jsx)(Aj,{stream:n},t)})}),(0,jE.jsx)("div",{className:"flex-shrink-0 bg-gray-800 p-4 shadow-md z-10",children:(0,jE.jsx)("h1",{className:"text-2xl font-bold",children:t.roomName})}),(0,jE.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,jE.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,jE.jsx)(GM,{files:n,activeFileId:f,onSelectFile:k,onAddNewFile:c,onCloseFile:e=>{if(n&&Object.keys(n).length<=1)alert("You cannot close the last file.");else{if(e===f){const t=Object.keys(n).find(t=>t!==e);t&&k(t)}u(e)}},language:t.language}),(0,jE.jsxs)(zM,{direction:"vertical",children:[(0,jE.jsx)(kO,{defaultSize:70,minSize:20,children:(0,jE.jsxs)("div",{className:"bg-gray-800 h-full",children:[" ",(0,jE.jsx)(sO,{height:"100%",theme:"vs-dark",language:t.language.toLowerCase(),value:v,onChange:e=>{g&&y(null),w.current=!0,b(e),f&&A(f,e)},onMount:(e,t)=>{_.current=e,e.onDidFocusEditorText(()=>{g&&y(null)}),e.onDidBlurEditorText(()=>{w.current=!1})},options:{fontSize:14,minimap:{enabled:!1},wordWrap:"on"}})]})}),(0,jE.jsx)(HM,{className:"h-2 bg-gray-900 hover:bg-indigo-600 transition-colors"}),(0,jE.jsx)(kO,{defaultSize:30,minSize:10,children:(0,jE.jsx)($M,{activeFile:m(m({},I),{},{code:n[f].code}),language:t.language,updateFileOutput:o})})]})]}),(0,jE.jsx)(ZM,{room:t,presence:r,chat:i,followingUserId:g,onFollowUser:e=>{if(w.current=!1,g===e)y(null);else if(y(e),r&&r[e]){const t=r[e].activeFileId;p(t),n&&n[t]&&b(n[t].code)}},onSendMessage:h,isMuted:C,onToggleMute:x,isSpeaking:T})]})]})},Ij=e=>{let{roomName:t}=e;return(0,jE.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-8",children:[(0,jE.jsxs)("h1",{className:"text-4xl font-bold mb-4",children:["Challenge Room: ",t]}),(0,jE.jsx)("p",{className:"text-xl text-gray-300 mb-8",children:"Waiting for host to start the challenge..."}),(0,jE.jsxs)("div",{className:"w-full max-w-lg bg-gray-800 rounded-lg p-6",children:[(0,jE.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Get Ready!"}),(0,jE.jsx)("p",{className:"text-gray-400",children:"The host is selecting a problem. The challenge will begin soon."})]})]})},Pj=e=>{let{room:t,problems:n}=e;const[r,i]=(0,a.useState)("All"),[s,o]=(0,a.useState)("All"),[l,c]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),d=(0,a.useMemo)(()=>{const e=new Set(n.map(e=>e.topic));return["All",...Array.from(e)]},[n]),f=(0,a.useMemo)(()=>n.filter(e=>{const t="All"===r||e.difficulty===r,n="All"===s||e.topic===s;return t&&n}),[n,r,s]);return(0,jE.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-8",children:[(0,jE.jsxs)("h1",{className:"text-4xl font-bold mb-4",children:["Challenge Room: ",t.roomName]}),(0,jE.jsx)("p",{className:"text-xl text-green-400 mb-8",children:"You are the host. Select a problem to begin."}),(0,jE.jsxs)("div",{className:"w-full max-w-lg bg-gray-800 rounded-lg p-6 mb-6",children:[(0,jE.jsxs)("h2",{className:"text-2xl font-semibold mb-4",children:["Participants (",t.participantProfiles.length,"/",t.maxParticipants,")"]}),(0,jE.jsx)("ul",{className:"space-y-2",children:t.participantProfiles.map(e=>(0,jE.jsxs)("li",{className:"flex items-center gap-3",children:[(0,jE.jsx)("img",{src:e.avatar||"https://i.imgur.com/6bE0a8Z.png",alt:e.username,className:"w-8 h-8 rounded-full"}),(0,jE.jsxs)("span",{children:[e.username," ",e.uid===t.hostId&&"(Host)"]})]},e.uid))})]}),(0,jE.jsxs)("div",{className:"w-full max-w-lg bg-gray-800 rounded-lg p-6",children:[(0,jE.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Challenge Settings"}),(0,jE.jsxs)("div",{className:"space-y-4",children:[(0,jE.jsxs)("div",{className:"flex gap-4",children:[(0,jE.jsxs)("div",{className:"flex-1",children:[(0,jE.jsx)("label",{htmlFor:"difficulty",className:"block text-sm font-medium text-gray-300",children:"Difficulty"}),(0,jE.jsxs)("select",{id:"difficulty",value:r,onChange:e=>i(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,jE.jsx)("option",{children:"All"}),(0,jE.jsx)("option",{children:"Easy"}),(0,jE.jsx)("option",{children:"Medium"}),(0,jE.jsx)("option",{children:"Hard"})]})]}),(0,jE.jsxs)("div",{className:"flex-1",children:[(0,jE.jsx)("label",{htmlFor:"topic",className:"block text-sm font-medium text-gray-300",children:"Topic"}),(0,jE.jsx)("select",{id:"topic",value:s,onChange:e=>o(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:d.map(e=>(0,jE.jsx)("option",{children:e},e))})]})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{htmlFor:"problem",className:"block text-sm font-medium text-gray-300",children:"Choose Problem"}),(0,jE.jsxs)("select",{id:"problem",value:l,onChange:e=>c(e.target.value),disabled:0===f.length,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-600 disabled:text-gray-400",children:[(0,jE.jsx)("option",{value:"",children:0===f.length?"No problems match filters":"Select a problem..."}),f.map(e=>(0,jE.jsx)("option",{value:e.id,children:e.title},e.id))]})]})]}),(0,jE.jsx)("button",{onClick:async()=>{if(!l)return void alert("Please select a problem first.");h(!0);const e=n.find(e=>e.id===l);if(!e)return alert("Error: Could not find selected problem."),void h(!1);try{const n=vE(FE,"rooms/".concat(t.roomId,"/challenge"));await SE(n,{state:"countdown",problemId:e.id,problemTitle:e.title,problemDifficulty:e.difficulty,problemTopic:e.topic,description:e.description||"",examples:e.examples||[],constraints:e.constraints||[],followUp:e.followUp||"",topics:e.topics||[],hint:e.hint||"",sampleTestCases:e.sampleTestCases||[],functionName:e.functionName,functionSignature:e.functionSignature,functionTemplate:e.functionTemplate,startTime:Date.now()+1e4})}catch(r){console.error("Failed to start challenge:",r),alert("Error starting challenge. See console for details."),h(!1)}},disabled:!l||u,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg text-lg mt-6 disabled:bg-gray-500 disabled:cursor-not-allowed",children:u?"Starting...":"Start Challenge"})]})]})},Rj=e=>{let{room:t,isHost:n}=e;const[r,i]=(0,a.useState)([]),[s,o]=(0,a.useState)(!0),[l,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!n)return void o(!1);(async()=>{o(!0);try{const e=Sy(Ig(LE,"problems"),Ay("topic"),Ay("title")),t=await zy(e),n=[];t.forEach(e=>{n.push(m({id:e.id},e.data()))}),i(n)}catch(e){console.error("Error fetching problems:",e),c("Failed to load challenge library.")}o(!1)})()},[n]),s?(0,jE.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-10",children:"Loading Problem Library..."}):l?(0,jE.jsxs)("div",{className:"min-h-screen bg-gray-900 text-red-400 p-10",children:["Error: ",l]}):n?(0,jE.jsx)(Pj,{room:t,problems:r}):(0,jE.jsx)(Ij,{roomName:t.roomName})},Nj=e=>{let{challengeData:t}=e;const[n,r]=(0,a.useState)(10);(0,a.useEffect)(()=>{const e=(null===t||void 0===t?void 0:t.startTime)||Date.now()+1e4,n=()=>{const t=e-Date.now(),n=Math.ceil(t/1e3);r(n>0?n:0)};n();const i=setInterval(n,500);return()=>clearInterval(i)},[t]);const i=(null===t||void 0===t?void 0:t.problemTitle)||"Problem",s="(".concat((null===t||void 0===t?void 0:t.problemDifficulty)||"N/A"," - ").concat((null===t||void 0===t?void 0:t.problemTopic)||"N/A",")");return(0,jE.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white",children:[(0,jE.jsx)("h1",{className:"text-6xl font-bold mb-4 animate-pulse",children:"CHALLENGE STARTING!"}),(0,jE.jsxs)("p",{className:"text-3xl mb-8",children:['Problem: "',i,'" ',(0,jE.jsx)("span",{className:"text-xl text-gray-400",children:s})]}),(0,jE.jsx)("div",{className:"text-9xl font-bold",children:n})]})},Dj=["title","titleId"];function Oj(e,t){let{title:n,titleId:r}=e,i=u(e,Dj);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),a.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const Mj=a.forwardRef(Oj),Lj=["title","titleId"];function Fj(e,t){let{title:n,titleId:r}=e,i=u(e,Lj);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{d:"M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z"}),a.createElement("path",{fillRule:"evenodd",d:"M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z",clipRule:"evenodd"}))}const jj=a.forwardRef(Fj),Uj=["title","titleId"];function Vj(e,t){let{title:n,titleId:r}=e,i=u(e,Uj);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const zj=a.forwardRef(Vj),Bj="https://emkc.org/api/v2/piston/execute",qj=e=>{switch(e.toLowerCase()){case"python":default:return{language:"python",version:"3.10.0",mainFile:"main.py"};case"javascript":return{language:"javascript",version:"18.15.0",mainFile:"main.js"};case"java":return{language:"java",version:"15.0.2",mainFile:"Main.java"};case"c++":return{language:"cpp",version:"10.2.0",mainFile:"main.cpp"}}},Hj={ARRAY_INT_TARGET_INT:{python:(e,t)=>"\nimport json\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    array_line = input()\n    target_line = input()\n    target = int(target_line.strip())\n    nums = json.loads(array_line)\n    result = ').concat(t,'(nums, target)\n    if result and len(result) == 2:\n        print(f"[{result[0]}, {result[1]}]")\n'),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\nimport java.util.stream.Collectors;\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String arrayLine = sc.nextLine();\n        String targetLine = sc.nextLine();\n        \n        int target = Integer.parseInt(targetLine.trim());\n        arrayLine = arrayLine.substring(1, arrayLine.length() - 1);\n        int[] nums = Arrays.stream(arrayLine.split(","))\n                           .map(String::trim)\n                           .mapToInt(Integer::parseInt)\n                           .toArray();\n        \n        Main solution = new Main();\n        int[] result = solution.').concat(t,'(nums, target);\n        \n        if (result != null && result.length == 2) {\n            System.out.println("[" + result[0] + ", " + result[1] + "]");\n        }\n        sc.close();\n    }\n}\n')},STRING_RETURN_BOOLEAN:{python:(e,t)=>"\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    s = input()\n    result = ').concat(t,'(s)\n    print(str(result).lower()) # Prints "true" or "false"\n'),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String s = sc.nextLine();\n        Main solution = new Main();\n        boolean result = solution.').concat(t,"(s);\n        System.out.println(result);\n        sc.close();\n    }\n}\n")},ARRAY_INT_RETURN_INT:{python:(e,t)=>"\nimport json\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    array_line = input()\n    nums = json.loads(array_line)\n    result = ').concat(t,"(nums)\n    print(result)\n"),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String arrayLine = sc.nextLine();\n        arrayLine = arrayLine.substring(1, arrayLine.length() - 1);\n        int[] nums = Arrays.stream(arrayLine.split(","))\n                           .map(String::trim)\n                           .mapToInt(Integer::parseInt)\n                           .toArray();\n        \n        Main solution = new Main();\n        int result = solution.').concat(t,"(nums);\n        System.out.println(result);\n        sc.close();\n    }\n}\n")},LINKED_LIST_RETURN_LINKED_LIST:{python:(e,t)=>"\n# Definition for singly-linked list.\nclass ListNode:\n    def __init__(self, val=0, next=None):\n        self.val = val\n        self.next = next\n\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- HELPER FUNCTIONS ---\ndef stringToLinkedList(input):\n    if not input or input == "[]": return None\n    parts = input[1:-1].split(\',\')\n    head = ListNode(int(parts[0]))\n    current = head\n    for part in parts[1:]:\n        current.next = ListNode(int(part.strip()))\n        current = current.next\n    return head\n\ndef linkedListToString(head):\n    if not head: return "[]"\n    parts = []\n    current = head\n    while current:\n        parts.append(str(current.val))\n        current = current.next\n    return "[" + ",".join(parts) + "]"\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    line = input()\n    head = stringToLinkedList(line)\n    result_head = ').concat(t,"(head)\n    print(linkedListToString(result_head))\n"),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\n// Definition for singly-linked list.\nclass ListNode {\n    int val;\n    ListNode next;\n    ListNode(int x) { val = x; }\n}\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- HELPER FUNCTIONS ---\n    public static ListNode stringToLinkedList(String input) {\n        if (input == null || input.equals("[]")) return null;\n        input = input.substring(1, input.length() - 1);\n        String[] parts = input.split(",");\n        if (parts.length == 0 || parts[0].isEmpty()) return null;\n        \n        ListNode head = new ListNode(Integer.parseInt(parts[0].trim()));\n        ListNode current = head;\n        for (int i = 1; i < parts.length; i++) {\n            current.next = new ListNode(Integer.parseInt(parts[i].trim()));\n            current = current.next;\n        }\n        return head;\n    }\n\n    public static String linkedListToString(ListNode head) {\n        if (head == null) return "[]";\n        StringBuilder sb = new StringBuilder();\n        sb.append("[");\n        ListNode current = head;\n        while (current != null) {\n            sb.append(current.val);\n            if (current.next != null) sb.append(",");\n            current = current.next;\n        }\n        sb.append("]");\n        return sb.toString();\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String line = sc.nextLine();\n        ListNode head = stringToLinkedList(line);\n        Main solution = new Main();\n        ListNode resultHead = solution.').concat(t,"(head);\n        System.out.println(linkedListToString(resultHead));\n        sc.close();\n    }\n}\n")},LINKED_LIST_RETURN_BOOLEAN:{python:(e,t)=>"\n# Definition for singly-linked list.\nclass ListNode:\n    def __init__(self, val=0, next=None):\n        self.val = val\n        self.next = next\n\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- HELPER FUNCTIONS ---\ndef stringToLinkedList(input, pos):\n    if not input or input == "[]": return None\n    parts = input[1:-1].split(\',\')\n    head = ListNode(int(parts[0]))\n    current = head\n    cycleNode = None\n    if pos == 0: cycleNode = head\n    \n    for i, part in enumerate(parts[1:], 1):\n        current.next = ListNode(int(part.strip()))\n        current = current.next\n        if i == pos: cycleNode = current\n            \n    if cycleNode: current.next = cycleNode # Create cycle\n    return head\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    line = input()\n    pos_line = input()\n    pos = int(pos_line)\n    head = stringToLinkedList(line, pos)\n    result = ').concat(t,"(head)\n    print(str(result).lower())\n"),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\nclass ListNode {\n    int val;\n    ListNode next;\n    ListNode(int x) { val = x; }\n}\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- HELPER FUNCTIONS ---\n    public static ListNode stringToLinkedList(String input, int pos) {\n        if (input == null || input.equals("[]")) return null;\n        input = input.substring(1, input.length() - 1);\n        String[] parts = input.split(",");\n        if (parts.length == 0 || parts[0].isEmpty()) return null;\n        \n        ListNode head = new ListNode(Integer.parseInt(parts[0].trim()));\n        ListNode current = head;\n        ListNode cycleNode = null;\n        if (pos == 0) cycleNode = head;\n\n        for (int i = 1; i < parts.length; i++) {\n            current.next = new ListNode(Integer.parseInt(parts[i].trim()));\n            current = current.next;\n            if (i == pos) cycleNode = current;\n        }\n        if (cycleNode != null) current.next = cycleNode; // Create cycle\n        return head;\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String line = sc.nextLine();\n        String posLine = sc.nextLine();\n        int pos = Integer.parseInt(posLine);\n        \n        ListNode head = stringToLinkedList(line, pos);\n        Main solution = new Main();\n        boolean result = solution.').concat(t,"(head);\n        System.out.println(result);\n        sc.close();\n    }\n}\n")},TREE_RETURN_INT:{python:(e,t)=>"\nimport json\nfrom collections import deque\n\n# Definition for a binary tree node.\nclass TreeNode:\n    def __init__(self, val=0, left=None, right=None):\n        self.val = val\n        self.left = left\n        self.right = right\n\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- HELPER FUNCTIONS ---\ndef stringToTree(input):\n    if not input or input == "[]":\n        return None\n    \n    parts = input[1:-1].split(\',\')\n    if not parts[0] or parts[0] == "null":\n        return None\n        \n    root = TreeNode(int(parts[0]))\n    queue = deque([root])\n    i = 1\n    while queue and i < len(parts):\n        node = queue.popleft()\n        \n        if parts[i] and parts[i].strip() != "null":\n            node.left = TreeNode(int(parts[i]))\n            queue.append(node.left)\n        i += 1\n        \n        if i < len(parts) and parts[i] and parts[i].strip() != "null":\n            node.right = TreeNode(int(parts[i]))\n            queue.append(node.right)\n        i += 1\n    return root\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    line = input()\n    root = stringToTree(line)\n    result = ').concat(t,"(root)\n    print(result)\n"),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\n// Definition for a binary tree node.\nclass TreeNode {\n    int val;\n    TreeNode left;\n    TreeNode right;\n    TreeNode(int x) { val = x; }\n}\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- HELPER FUNCTIONS ---\n    public static TreeNode stringToTree(String input) {\n        if (input == null || input.equals("[]")) return null;\n        input = input.substring(1, input.length() - 1);\n        String[] parts = input.split(",");\n        if (parts.length == 0 || parts[0].equals("null")) return null;\n\n        TreeNode root = new TreeNode(Integer.parseInt(parts[0].trim()));\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.add(root);\n        int i = 1;\n        while (!queue.isEmpty() && i < parts.length) {\n            TreeNode node = queue.poll();\n            \n            if (i < parts.length && !parts[i].trim().equals("null")) {\n                node.left = new TreeNode(Integer.parseInt(parts[i].trim()));\n                queue.add(node.left);\n            }\n            i++;\n            \n            if (i < parts.length && !parts[i].trim().equals("null")) {\n                node.right = new TreeNode(Integer.parseInt(parts[i].trim()));\n                queue.add(node.right);\n            }\n            i++;\n        }\n        return root;\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String line = sc.nextLine();\n        TreeNode root = stringToTree(line);\n        Main solution = new Main();\n        int result = solution.').concat(t,"(root);\n        System.out.println(result);\n        sc.close();\n    }\n}\n")},TREE_RETURN_TREE:{python:(e,t)=>"\nimport json\nfrom collections import deque\n\n# Definition for a binary tree node.\nclass TreeNode:\n    def __init__(self, val=0, left=None, right=None):\n        self.val = val\n        self.left = left\n        self.right = right\n\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- HELPER FUNCTIONS ---\ndef stringToTree(input):\n    if not input or input == "[]": return None\n    parts = input[1:-1].split(\',\')\n    if not parts[0] or parts[0] == "null": return None\n    root = TreeNode(int(parts[0]))\n    queue = deque([root])\n    i = 1\n    while queue and i < len(parts):\n        node = queue.popleft()\n        if i < len(parts) and parts[i] and parts[i].strip() != "null":\n            node.left = TreeNode(int(parts[i]))\n            queue.append(node.left)\n        i += 1\n        if i < len(parts) and parts[i] and parts[i].strip() != "null":\n            node.right = TreeNode(int(parts[i]))\n            queue.append(node.right)\n        i += 1\n    return root\n\ndef treeToString(root):\n    if not root: return "[]"\n    output = []\n    queue = deque([root])\n    while queue:\n        node = queue.popleft()\n        if node:\n            output.append(str(node.val))\n            queue.append(node.left)\n            queue.append(node.right)\n        else:\n            output.append("null")\n    # Trim trailing nulls\n    while output and output[-1] == "null":\n        output.pop()\n    return "[" + ",".join(output) + "]"\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    line = input()\n    root = stringToTree(line)\n    result_root = ').concat(t,"(root)\n    print(treeToString(result_root))\n"),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\nclass TreeNode {\n    int val;\n    TreeNode left;\n    TreeNode right;\n    TreeNode(int x) { val = x; }\n}\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- HELPER FUNCTIONS ---\n    public static TreeNode stringToTree(String input) {\n        if (input == null || input.equals("[]")) return null;\n        input = input.substring(1, input.length() - 1);\n        String[] parts = input.split(",");\n        if (parts.length == 0 || parts[0].equals("null")) return null;\n        TreeNode root = new TreeNode(Integer.parseInt(parts[0].trim()));\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.add(root);\n        int i = 1;\n        while (!queue.isEmpty() && i < parts.length) {\n            TreeNode node = queue.poll();\n            if (i < parts.length && !parts[i].trim().equals("null")) {\n                node.left = new TreeNode(Integer.parseInt(parts[i].trim()));\n                queue.add(node.left);\n            }\n            i++;\n            if (i < parts.length && !parts[i].trim().equals("null")) {\n                node.right = new TreeNode(Integer.parseInt(parts[i].trim()));\n                queue.add(node.right);\n            }\n            i++;\n        }\n        return root;\n    }\n\n    public static String treeToString(TreeNode root) {\n        if (root == null) return "[]";\n        List<String> output = new ArrayList<>();\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.add(root);\n        while (!queue.isEmpty()) {\n            TreeNode node = queue.poll();\n            if (node != null) {\n                output.add(String.valueOf(node.val));\n                queue.add(node.left);\n                queue.add(node.right);\n            } else {\n                output.add("null");\n            }\n        }\n        // Trim trailing nulls\n        while (output.size() > 0 && output.get(output.size() - 1).equals("null")) {\n            output.remove(output.size() - 1);\n        }\n        return "[" + String.join(",", output) + "]";\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String line = sc.nextLine();\n        TreeNode root = stringToTree(line);\n        Main solution = new Main();\n        TreeNode resultRoot = solution.').concat(t,"(root);\n        System.out.println(treeToString(resultRoot));\n        sc.close();\n    }\n}\n")},INT_RETURN_INT:{python:(e,t)=>"\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    n = int(input())\n    result = ').concat(t,"(n)\n    print(result)\n"),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        Main solution = new Main();\n        int result = solution.').concat(t,"(n);\n        System.out.println(result);\n        sc.close();\n    }\n}\n")},ARRAY_INT_RETURN_BOOLEAN:{python:(e,t)=>"\nimport json\n# User's function definition\n".concat(e,'\n    # --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n    pass\n\n# --- TEST HARNESS ---\nif __name__ == "__main__":\n    array_line = input()\n    nums = json.loads(array_line)\n    result = ').concat(t,'(nums)\n    print(str(result).lower()) # "true" or "false"\n'),java:(e,t)=>"\nimport java.util.*;\nimport java.io.*;\n\npublic class Main {\n    // User's function definition\n    ".concat(e,'\n        // --- WRITE YOUR ALGORITHM IN THE FUNCTION ABOVE ---\n        throw new UnsupportedOperationException("Not implemented yet");\n    }\n\n    // --- TEST HARNESS ---\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String arrayLine = sc.nextLine();\n        \n        int[] nums;\n        arrayLine = arrayLine.substring(1, arrayLine.length() - 1);\n        if (arrayLine.isEmpty()) {\n            nums = new int[0];\n        } else {\n            nums = Arrays.stream(arrayLine.split(","))\n                           .map(String::trim)\n                           .mapToInt(Integer::parseInt)\n                           .toArray();\n        }\n        \n        Main solution = new Main();\n        boolean result = solution.').concat(t,"(nums);\n        System.out.println(result);\n        sc.close();\n    }\n}\n")}},Wj=["title","titleId"];function Gj(e,t){let{title:n,titleId:r}=e,i=u(e,Wj);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const Kj=a.forwardRef(Gj),Qj=["title","titleId"];function Yj(e,t){let{title:n,titleId:r}=e,i=u(e,Qj);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const Xj=a.forwardRef(Yj),Jj=["title","titleId"];function Zj(e,t){let{title:n,titleId:r}=e,i=u(e,Jj);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,a.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const $j=a.forwardRef(Zj),eU=e=>"string"!==typeof e?"":e.replace(/\s/g,""),tU=e=>{let{result:t,index:n}=e,r=zj,i="text-gray-400",s="Running...";return"Passed"===t.status?(r=Kj,i="text-green-500",s="Passed"):"Wrong Answer"===t.status?(r=Xj,i="text-red-500",s="Wrong Answer"):"Error"===t.status&&(r=$j,i="text-yellow-500",s="Runtime Error"),(0,jE.jsxs)("div",{className:"p-2 rounded-md ".concat("Running"===t.status?"bg-gray-800":"bg-gray-700"),children:[(0,jE.jsxs)("p",{className:"flex items-center gap-2 font-semibold ".concat(i),children:[(0,jE.jsx)(r,{className:"w-5 h-5"}),"Case ",n+1,": ",s]}),"Passed"!==t.status&&"Running"!==t.status&&(0,jE.jsxs)("div",{className:"mt-2 text-xs font-mono pl-7 space-y-1",children:[(0,jE.jsxs)("p",{children:[(0,jE.jsx)("span",{className:"font-bold",children:"Input:"})," ",t.input.replace(/\\n/g," ")]}),(0,jE.jsxs)("p",{children:[(0,jE.jsx)("span",{className:"font-bold",children:"Expected:"})," ",t.expected]}),(0,jE.jsxs)("p",{children:[(0,jE.jsx)("span",{className:"font-bold",children:"Your Output:"})," ",t.output||"(No output)"]})]})]})},nU=e=>{let{code:t,language:n,sampleTestCases:r}=e;const[i,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)([]);return(0,jE.jsxs)("div",{className:"h-full bg-gray-900 border-t border-gray-700 p-4 flex flex-col",children:[(0,jE.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,jE.jsx)("h3",{className:"text-lg font-semibold",children:"Test Results"}),(0,jE.jsx)("button",{onClick:async()=>{s(!0);const e=Array.isArray(r)?r:[],i=e.map(e=>({status:"Running",input:e.input,expected:e.expectedOutput,output:""}));l(i);const{language:o,version:a,mainFile:c}=qj(n),u=[];for(const n of e){const{input:e,expectedOutput:r}=n,s=e.replace(/\\n/g,"\n");try{const n=await fetch(Bj,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:o,version:a,files:[{name:c,content:t}],stdin:s})}),i=await n.json();i.run.stderr?u.push({status:"Error",input:e,expected:r,output:i.run.stderr}):eU(i.run.stdout)===eU(r)?u.push({status:"Passed",input:e,expected:r,output:i.run.stdout}):u.push({status:"Wrong Answer",input:e,expected:r,output:i.run.stdout})}catch(h){console.error(h),u.push({status:"Error",input:e,expected:r,output:"Failed to run code. Check console."})}l([...u,...i.slice(u.length)])}s(!1)},disabled:i||!r||0===r.length,className:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 text-sm disabled:bg-gray-500",children:i?"Running...":"Run Tests"})]}),(0,jE.jsxs)("div",{className:"flex-1 overflow-auto space-y-2",children:[0===o.length&&(0,jE.jsx)("p",{className:"text-gray-400",children:'Click "Run Tests" to see sample case results.'}),o.map((e,t)=>(0,jE.jsx)(tU,{result:e,index:t},t))]})]})},rU=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))},iU=e=>{let{roomId:t,participantProfiles:n}=e;const{currentUser:r}=VE(),[i,s]=(0,a.useState)({});(0,a.useEffect)(()=>{if(!t)return;const e=AE(vE(FE,"rooms/".concat(t,"/challenge/submissions")),e=>{e.exists()?s(e.val()):s({})});return()=>e()},[t]);const o=(0,a.useMemo)(()=>Object.entries(i).map(e=>{let[t,n]=e;return{uid:t,username:n.username,finishTime:n.finishTime}}).sort((e,t)=>e.finishTime-t.finishTime),[i]),l=(0,a.useMemo)(()=>n.filter(e=>!i[e.uid]),[n,i]);return(0,jE.jsxs)("div",{className:"bg-gray-800 border-l border-gray-700 p-6 flex flex-col h-full overflow-auto",children:[(0,jE.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Live Standings"}),(0,jE.jsxs)("div",{className:"mb-6",children:[(0,jE.jsx)("h3",{className:"text-green-400 font-semibold mb-2",children:"Finished"}),(0,jE.jsxs)("div",{className:"space-y-2",children:[0===o.length&&(0,jE.jsx)("p",{className:"text-gray-500 text-sm",children:"(None yet)"}),o.map((e,t)=>(0,jE.jsxs)("div",{className:"flex justify-between items-center text-white",children:[(0,jE.jsxs)("span",{className:"flex items-center gap-2",children:[0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":" ",e.username," ",e.uid===r.uid?"(You)":""]}),(0,jE.jsx)("span",{className:"font-mono text-lg",children:rU(e.finishTime)})]},e.uid))]})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("h3",{className:"text-gray-400 font-semibold mb-2",children:"Still Solving..."}),(0,jE.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,jE.jsxs)("p",{className:"text-gray-500",children:[e.username," ",e.uid===r.uid?"(You)":""]},e.uid))})]})]})},sU=e=>{let{challengeData:t}=e;const{description:n,examples:r=[],constraints:i=[],followUp:s,hint:o}=t||{},[l,c]=(0,a.useState)(!1);return(0,jE.jsxs)("div",{className:"flex flex-col h-full bg-gray-800 p-6 overflow-auto border-r border-gray-700",children:[(0,jE.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,jE.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Problem Statement"}),o&&(0,jE.jsx)("button",{onClick:()=>{c(e=>!e)},title:l?"Hide hint":"Show hint",className:"p-1.5 rounded-full ".concat(l?"bg-yellow-400 text-gray-900":"bg-gray-700 text-gray-400 hover:text-white hover:bg-gray-600"),children:(0,jE.jsx)(Mj,{className:"w-5 h-5"})})]}),(0,jE.jsx)("div",{className:"prose prose-invert prose-pre:bg-gray-700 text-gray-300 mb-6",dangerouslySetInnerHTML:{__html:n||"<p>Loading problem...</p>"}}),l&&o&&(0,jE.jsxs)("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg border border-yellow-500",children:[(0,jE.jsx)("p",{className:"font-semibold text-yellow-400",children:"Hint:"}),(0,jE.jsx)("p",{className:"text-gray-300 text-sm",dangerouslySetInnerHTML:{__html:o}})]}),r.map((e,t)=>(0,jE.jsxs)("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg border border-gray-600",children:[(0,jE.jsxs)("p",{className:"font-semibold text-white",children:["Example ",t+1,":"]}),(0,jE.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md mt-2 whitespace-pre-wrap text-sm font-mono text-gray-200",children:[(0,jE.jsxs)("p",{children:[(0,jE.jsx)("strong",{children:"Input:"})," ",e.input]}),(0,jE.jsxs)("p",{children:[(0,jE.jsx)("strong",{children:"Output:"})," ",e.output]}),e.explanation&&(0,jE.jsx)("p",{dangerouslySetInnerHTML:{__html:"<strong>Explanation:</strong> ".concat(e.explanation)}})]})]},t)),(0,jE.jsxs)("div",{className:"mb-6",children:[(0,jE.jsx)("p",{className:"font-semibold text-white mb-2",children:"Constraints:"}),(0,jE.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-300 text-sm",children:i.map((e,t)=>(0,jE.jsx)("li",{dangerouslySetInnerHTML:{__html:e}},t))})]}),s&&(0,jE.jsxs)("div",{children:[(0,jE.jsx)("p",{className:"font-semibold text-white mb-2",children:"Follow-up:"}),(0,jE.jsx)("p",{className:"text-gray-300 text-sm",children:s})]})]})},oU=e=>"string"!==typeof e?"":e.replace(/\s/g,""),aU=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))},lU=e=>{let{firstFinisherTime:t}=e;const[n,r]=(0,a.useState)(600);return(0,a.useEffect)(()=>{const e=t+6e5,n=()=>{const t=e-Date.now(),n=Math.max(0,Math.floor(t/1e3));r(n)};n();const i=setInterval(n,1e3);return()=>clearInterval(i)},[t]),(0,jE.jsxs)("span",{className:"flex items-center gap-1 font-mono text-lg text-yellow-400 animate-pulse",children:[(0,jE.jsx)(jj,{className:"w-5 h-5"}),"Time left: ",aU(n)]})},cU=e=>{let{room:t,challengeData:n,isHost:r}=e;const{currentUser:i,userProfile:s}=VE(),[o,l]=(0,a.useState)(()=>{const{language:e}=t,{functionSignature:r,functionTemplate:i,functionName:s}=n,o=null===i||void 0===i?void 0:i[e.toLowerCase()];return r&&o&&s?((e,t,n,r)=>{var i;const s=e.toLowerCase(),o=null===(i=Hj[t])||void 0===i?void 0:i[s];return o?o(n,r):'// Error: No harness found for signature "'.concat(t,'" in language "').concat(s,'".\n// Please ask the admin to create one.\n\n').concat(n,"\n  // Write your code here\n}")})(e,r,o,s):"// Error: Could not generate problem scaffold. Problem data is missing.\n// Please contact the admin."}),[c,u]=(0,a.useState)(0),[h,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(""),[m,g]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{null!==n&&void 0!==n&&n.firstFinisherTime&&v(n.firstFinisherTime);const e=AE(vE(FE,"rooms/".concat(t.roomId,"/challenge/firstFinisherTime")),e=>{e.exists()&&v(e.val())});return()=>e()},[t.roomId,n]),(0,a.useEffect)(()=>{const e=(null===n||void 0===n?void 0:n.startTime)||Date.now(),t=setInterval(()=>{if(!m){const t=Date.now(),n=Math.floor((t-e)/1e3);u(n>0?n:0)}},1e3);return()=>clearInterval(t)},[n,m]);return(0,jE.jsxs)("div",{className:"flex flex-col h-screen bg-gray-900 text-white",children:[(0,jE.jsxs)("div",{className:"flex-shrink-0 bg-gray-800 p-3 flex justify-between items-center shadow-md z-10",children:[(0,jE.jsxs)("h1",{className:"text-xl font-bold",children:["Challenge: ",(null===n||void 0===n?void 0:n.problemTitle)||"Loading..."]}),f&&(0,jE.jsx)("p",{className:"text-red-400 text-sm",children:f}),m&&(0,jE.jsx)("p",{className:"text-green-400 text-lg font-bold",children:"\ud83c\udf89 You finished!"}),(0,jE.jsxs)("div",{className:"flex items-center gap-4",children:[y?(0,jE.jsx)(lU,{firstFinisherTime:y}):(0,jE.jsxs)("span",{className:"flex items-center gap-1 font-mono text-lg",children:[(0,jE.jsx)(zj,{className:"w-5 h-5"}),aU(c)]}),(0,jE.jsx)("button",{onClick:async()=>{if(h||m)return;d(!0),p("");const e=(null===n||void 0===n?void 0:n.hiddenTestCases)||[];0===e.length&&console.warn("No hidden test cases found in challengeData.");const{language:r,version:a,mainFile:l}=qj(t.language);for(const t of e){const{input:e,expectedOutput:n}=t,i=e.replace(/\\n/g,"\n");try{const e=await fetch(Bj,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:r,version:a,files:[{name:l,content:o}],stdin:i})}),t=await e.json();if(t.run.stderr)return p("Submission failed: Runtime Error."),void d(!1);if(oU(t.run.stdout)!==oU(n))return p("Submission failed: Wrong Answer."),void d(!1)}catch(y){return p("An error occurred during submission."),void d(!1)}}g(!0),d(!1);const u=vE(FE,"rooms/".concat(t.roomId,"/challenge/submissions/").concat(i.uid));await _E(u,{username:s.username,avatar:s.avatar,finishTime:c,submittedAt:Date.now()});const f=vE(FE,"rooms/".concat(t.roomId,"/challenge/firstFinisherTime"));(await EE(f)).exists()||await _E(f,Date.now())},disabled:h||m,className:"px-4 py-2 text-white font-semibold rounded-lg text-sm\n              ".concat(m?"bg-green-800":h?"bg-gray-500 animate-pulse":"bg-green-600 hover:bg-green-700"),children:m?"Submitted":h?"Submitting...":"Submit"})]})]}),(0,jE.jsx)("div",{className:"flex flex-1 overflow-hidden",children:(0,jE.jsxs)(zM,{direction:"horizontal",children:[(0,jE.jsx)(kO,{defaultSize:35,minSize:20,children:(0,jE.jsx)(sU,{challengeData:n})}),(0,jE.jsx)(HM,{className:"w-2 bg-gray-900 hover:bg-indigo-600 transition-colors"}),(0,jE.jsx)(kO,{defaultSize:50,minSize:30,children:(0,jE.jsxs)(zM,{direction:"vertical",children:[(0,jE.jsx)(kO,{defaultSize:70,minSize:20,children:(0,jE.jsxs)("div",{className:"bg-gray-800 h-full",children:[" ",(0,jE.jsx)(sO,{height:"100%",theme:"vs-dark",language:t.language.toLowerCase(),value:o,onChange:e=>{l(e),p("")},options:{readOnly:m,fontSize:14,minimap:{enabled:!1},wordWrap:"on"}})]})}),(0,jE.jsx)(HM,{className:"h-2 bg-gray-900 hover:bg-indigo-600 transition-colors"}),(0,jE.jsx)(kO,{defaultSize:30,minSize:10,children:(0,jE.jsx)(nU,{code:o,language:t.language,sampleTestCases:(null===n||void 0===n?void 0:n.sampleTestCases)||[]})})]})}),(0,jE.jsx)(HM,{className:"w-2 bg-gray-900 hover:bg-indigo-600 transition-colors"}),(0,jE.jsx)(kO,{defaultSize:15,minSize:12,children:(0,jE.jsx)(iU,{roomId:t.roomId,participantProfiles:t.participantProfiles})})]})})]})},uU=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))},hU=(e,t)=>{if(!t)return{badge:"\u274c",points:"+0 pts",color:"text-gray-400",title:"Did Not Finish"};switch(e){case 0:return{badge:"\ud83e\udd47",points:"+100 pts",color:"text-yellow-400",title:"1st Place"};case 1:return{badge:"\ud83e\udd48",points:"+60 pts",color:"text-gray-300",title:"2nd Place"};case 2:return{badge:"\ud83e\udd49",points:"+40 pts",color:"text-orange-400",title:"3rd Place"};default:return{badge:"\u2705",points:"+10 pts",color:"text-green-400",title:"Finished"}}},dU=e=>{let{room:t,challengeData:n}=e;const{currentUser:r}=VE(),i=we(),{rankedUsers:s,dnfUsers:o}=(0,a.useMemo)(()=>{const e=(null===n||void 0===n?void 0:n.submissions)||{},r=t.participantProfiles||[],i=Object.entries(e).map(e=>{let[t,n]=e;return{uid:t,username:n.username,finishTime:n.finishTime}}).sort((e,t)=>e.finishTime-t.finishTime),s=new Set(i.map(e=>e.uid)),o=r.filter(e=>!s.has(e.uid));return{rankedUsers:i,dnfUsers:o}},[n,t]),l=(null===n||void 0===n?void 0:n.problemTitle)||"Challenge";return(0,jE.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-8",children:[(0,jE.jsx)("h1",{className:"text-5xl font-bold mb-4",children:"CHALLENGE COMPLETE!"}),(0,jE.jsxs)("p",{className:"text-2xl text-gray-300 mb-8",children:['Problem: "',l,'"']}),(0,jE.jsxs)("div",{className:"w-full max-w-2xl bg-gray-800 rounded-lg p-6",children:[(0,jE.jsx)("h2",{className:"text-3xl font-semibold mb-6 text-center",children:"Final Standings"}),(0,jE.jsxs)("div",{className:"space-y-4",children:[s.map((e,t)=>{const{badge:n,points:i,color:s,title:o}=hU(t,!0),a=e.uid===r.uid;return(0,jE.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-700 rounded-lg",children:[(0,jE.jsx)("div",{children:(0,jE.jsxs)("span",{className:"text-2xl font-bold ".concat(s),children:[n," ",o,": ",e.username," ",a?"(You)":""]})}),(0,jE.jsxs)("div",{className:"text-right",children:[(0,jE.jsx)("span",{className:"text-lg font-mono",children:uU(e.finishTime)}),(0,jE.jsx)("span",{className:"block text-sm font-semibold ".concat(s),children:i})]})]},e.uid)}),o.map(e=>{const{badge:t,points:n,color:i}=hU(null,!1),s=e.uid===r.uid;return(0,jE.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-700 rounded-lg opacity-60",children:[(0,jE.jsxs)("span",{className:"text-xl font-semibold ".concat(i),children:[t," ",e.username," ",s?"(You)":""]}),(0,jE.jsx)("span",{className:"text-sm font-semibold ".concat(i),children:n})]},e.uid)})]}),(0,jE.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,jE.jsx)("button",{onClick:()=>alert("This would restart the challenge (coming soon!)"),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg",children:"Challenge Again"}),(0,jE.jsx)("button",{onClick:()=>i("/dashboard"),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 rounded-lg",children:"Back to Dashboard"})]})]})]})},fU=e=>{let{room:t}=e;const{currentUser:n}=VE(),[r,i]=(0,a.useState)("lobby"),[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null);if((0,a.useEffect)(()=>{const e=AE(vE(FE,"rooms/".concat(t.roomId,"/challenge")),e=>{if(e.exists()){const t=e.val();o(t),"active"!==r&&"results"!==r&&i(t.state||"lobby")}else o(null),i("lobby");c(!1)},e=>{console.error("Error listening to challenge state:",e),h("Failed to load challenge state."),c(!1)});return()=>e()},[t.roomId,r]),(0,a.useEffect)(()=>{if("countdown"===r&&null!==s&&void 0!==s&&s.startTime){const e=s.startTime-Date.now(),t=setTimeout(()=>{i("active")},e>0?e:0);return()=>clearTimeout(t)}},[r,s]),(0,a.useEffect)(()=>{if("active"===r&&null!==s&&void 0!==s&&s.firstFinisherTime){const e=s.firstFinisherTime+6e5-Date.now(),t=setTimeout(()=>{i("results")},e>0?e:0);return()=>clearTimeout(t)}},[r,s]),l)return(0,jE.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-10",children:"Loading challenge..."});if(u)return(0,jE.jsxs)("div",{className:"min-h-screen bg-gray-900 text-red-400 p-10",children:["Error: ",u]});switch(r){case"lobby":default:return(0,jE.jsx)(Rj,{room:t,isHost:t.hostId===n.uid});case"countdown":return(0,jE.jsx)(Nj,{challengeData:s});case"active":return(0,jE.jsx)(cU,{room:t,challengeData:s,isHost:t.hostId===n.uid});case"results":return(0,jE.jsx)(dU,{room:t,challengeData:s})}},pU=()=>{const{roomId:e}=_e(),{currentUser:t,userProfile:n,loading:r}=VE(),{room:i,files:s,presence:o,chat:l,loading:c,error:u,updateFileCode:h,updateFileOutput:d,updatePresence:f,addNewFile:p,removeFile:m,sendChatMessage:g}=oD(e,t),y=r||c,v=(0,a.useRef)(null),b=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(y||!i||!t||!n||!s||0===Object.keys(s).length)return;const r=t.uid,o=Pg(LE,"rooms",e),a=vE(FE,"rooms/".concat(e,"/presence/").concat(r));if(!i.participants.includes(r)){const e={uid:r,username:n.username,avatar:n.avatar||null};qy(o,{participants:Yy(r),participantProfiles:Yy(e)}).catch(e=>console.error("Error adding participant:",e))}AE(a,e=>{if(null===v.current){const e={activeFileId:Object.keys(s)[0],joinedAt:DE()};_E(a,e).then(()=>{v.current=function(e){return e=Rn(e),new pE(e._repo,e._path)}(a),v.current.update({leftAt:DE()})})}},{onlyOnce:!0});return()=>{(()=>{if(b.current)return;b.current=!0,v.current&&v.current.cancel(),wE(a);const e={uid:r,username:n.username,avatar:n.avatar||null};qy(o,{participants:Xy(r),participantProfiles:Xy(e)}).catch(e=>console.error("Error removing participant:",e))})()}},[y,i,s,t,n,e]),(0,a.useEffect)(()=>{if(y||!i||!o||t.uid!==i.hostId)return;const n=Pg(LE,"rooms",e);Object.entries(o).forEach(t=>{let[r,s]=t;if(s.leftAt){console.log("Host cleaning up disconnected user: ".concat(r));const t=i.participantProfiles.find(e=>e.uid===r);wE(vE(FE,"rooms/".concat(e,"/presence/").concat(r))),t&&qy(n,{participants:Xy(r),participantProfiles:Xy(t)})}})},[o,i,y,t,e]),y?(0,jE.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,jE.jsx)("h1",{className:"text-3xl font-bold",children:"Joining Room..."})}):u||!i?(console.error("RoomPage Error:",u),(0,jE.jsx)(je,{to:"/dashboard"})):"Free Code"===i.mode?(0,jE.jsx)(kj,{room:i,files:s,presence:o,chat:l,updateFileCode:h,updateFileOutput:d,updatePresence:f,addNewFile:p,removeFile:m,sendChatMessage:g}):"Challenge"===i.mode?(0,jE.jsx)(fU,{room:i}):(0,jE.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,jE.jsxs)("h1",{className:"text-3xl font-bold",children:["Unknown Room Mode: ",i.mode]})})},mU=()=>{const{currentUser:e,updateProfile:t}=VE(),n=we(),[r,i]=(0,a.useState)(e.displayName||""),[s,o]=(0,a.useState)("Python"),[l,c]=(0,a.useState)("Beginner"),[u,h]=(0,a.useState)(!1),[d,f]=(0,a.useState)("");return(0,jE.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4",children:(0,jE.jsxs)("div",{className:"w-full max-w-lg p-8 bg-gray-800 rounded-xl shadow-lg",children:[(0,jE.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Complete Your Profile"}),(0,jE.jsx)("p",{className:"text-center text-gray-300 mb-8",children:"Welcome! We just need a few more details to get you started."}),(0,jE.jsxs)("form",{onSubmit:async i=>{i.preventDefault(),h(!0),f("");const o={username:r,preferredLanguage:s,skillLevel:l,isProfileComplete:!0};await t(e.uid,o)?n("/dashboard"):(f("Failed to update profile. Please try again."),h(!1))},className:"space-y-6",children:[(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300",children:"Username"}),(0,jE.jsx)("input",{type:"text",id:"username",value:r,onChange:e=>i(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-300",children:"Preferred Language"}),(0,jE.jsxs)("select",{id:"language",value:s,onChange:e=>o(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,jE.jsx)("option",{children:"C++"}),(0,jE.jsx)("option",{children:"Java"}),(0,jE.jsx)("option",{children:"Python"}),(0,jE.jsx)("option",{children:"JavaScript"})]})]}),(0,jE.jsxs)("div",{children:[(0,jE.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Skill Level"}),(0,jE.jsx)("div",{className:"flex gap-4 mt-2",children:["Beginner","Intermediate","Advanced"].map(e=>(0,jE.jsx)("button",{type:"button",onClick:()=>c(e),className:"flex-1 py-2 px-4 rounded-md transition-colors ".concat(l===e?"bg-indigo-600 text-white font-semibold":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e},e))})]}),d&&(0,jE.jsx)("p",{className:"text-red-400 text-center",children:d}),(0,jE.jsx)("button",{type:"submit",disabled:u,className:"w-full py-3 px-4 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all disabled:bg-gray-500",children:u?"Saving...":"Save and Continue"})]})]})})},gU=()=>(0,jE.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-white text-center p-4",children:[(0,jE.jsx)("h1",{className:"text-6xl font-bold text-indigo-400",children:"404"}),(0,jE.jsx)("h2",{className:"text-3xl font-semibold mt-4 mb-2",children:"Page Not Found"}),(0,jE.jsx)("p",{className:"text-lg text-gray-300 mb-6",children:"Oops! The page you're looking for doesn't exist."}),(0,jE.jsx)(St,{to:"/",className:"px-6 py-3 bg-indigo-600 rounded-lg text-lg font-medium hover:bg-indigo-500 transition-colors",children:"Go Back Home"})]}),yU=e=>{let{children:t}=e;const{currentUser:n,userProfile:r,loading:i}=VE(),s=ye();return i?(0,jE.jsx)("div",{className:"min-h-screen bg-gray-900"}):n?null!==r&&void 0!==r&&r.isProfileComplete||"/setup"===s.pathname?t:(0,jE.jsx)(je,{to:"/setup",replace:!0}):(0,jE.jsx)(je,{to:"/auth",state:{from:s},replace:!0})};const vU=function(){return(0,jE.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,jE.jsxs)(ze,{children:[(0,jE.jsx)(Ue,{path:"/",element:(0,jE.jsx)(MN,{})}),(0,jE.jsx)(Ue,{path:"/auth",element:(0,jE.jsx)(FN,{})}),(0,jE.jsx)(Ue,{path:"/dashboard",element:(0,jE.jsx)(yU,{children:(0,jE.jsx)(sD,{})})}),(0,jE.jsx)(Ue,{path:"/room/:roomId",element:(0,jE.jsx)(yU,{children:(0,jE.jsx)(pU,{})})}),(0,jE.jsx)(Ue,{path:"/setup",element:(0,jE.jsx)(yU,{children:(0,jE.jsx)(mU,{})})}),(0,jE.jsx)(Ue,{path:"*",element:(0,jE.jsx)(gU,{})})]})})};c.createRoot(document.getElementById("root")).render((0,jE.jsx)(a.StrictMode,{children:(0,jE.jsxs)(wt,{children:[" ",(0,jE.jsxs)(zE,{children:[" ",(0,jE.jsx)(vU,{})]})]})}))})();
//# sourceMappingURL=main.43f2efd0.js.map